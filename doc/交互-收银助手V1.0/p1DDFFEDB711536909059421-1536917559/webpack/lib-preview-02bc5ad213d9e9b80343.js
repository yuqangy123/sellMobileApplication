(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+Cau":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l});var r=n("MVZn"),a=n.n(r),o=n("rVSK"),i=n.n(o),c=n("zkrS"),s=n("upRB"),u=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return e&&window.parent.postMessage(i()({event:e,payload:t}),n)},n=function(n){if(n.source!==window&&!n.origin.includes("qiyukf")&&n.data&&"string"==typeof n.data)try{var r=JSON.parse(n.data),a=r.event,o=r.payload,i=void 0===o?{}:o;e[a]&&e[a](t,{type:a,payload:i,event:n})}catch(e){console.warn("[receive] error message data",e,n)}};return window.addEventListener("message",n),{send:t,clear:function(){return window.removeEventListener("message",n)}}},l={"message:get:preview-state":function(e){var t=d(),n=t.state,r=t.isHighlight;e("message:data:preview-state",a()({},n.model.current,{isHighlight:r}))},"message:set:preview-state":function(e,t){var n=t.payload,r=n.isHighlight,a=n.screenCid,o=d(),i=o.state.model,c=i.current,s=i.screens,u=o.dispatch;if(void 0!==r&&u({type:"reducer:preview-toolbar:update:highlight",payload:{isHighlight:r}}),c.screenCid&&void 0!==a&&a!==c.screenCid){if(!s.find(function(e){return e.cid===a}))return console.warn("[message:set:preview-state] invalid screenCid");u({type:"entry:sync-runner:set-screen",payload:{cid:a}})}},"message:get:screen-list":function(e){var t=c.a.MB.webpackInterface.store.getState().model,n=t.current;e("message:data:screen-list",t.screens.filter(function(e){return e.project_cid===n.projectCid}).map(function(e){return{cid:e.cid,name:e.name,position:e.position,parent_cid:e.parent_cid,project_cid:e.project_cid}}))},"message:get:notification-state":function(e){var t=(c.a.MB.notification&&c.a.MB.notification.store&&c.a.MB.notification.store.getState()||{}).notifications;e("message:data:notification-state",{unreadCount:t?t.notifications.unreadNum:0})},"message:get:notification-list":function(e){var t=(c.a.MB.notification&&c.a.MB.notification.store&&c.a.MB.notification.store.getState()||{}).notifications;e("message:data:notification-list",t?t.notifications.notifications:[])}},d=function(){var e=c.a.MB.webpackInterface.store,t=e.getState,n=e.dispatch,r=t(),a=Object(s.e)(r),o=r.model.current.projectCid;return{getState:t,dispatch:n,state:r,project:o&&r.model.projects.find(function(e){return e.cid===o}),isHighlight:a}}},"+c4W":function(e,t,n){var r=n("711d"),a=n("4/ic"),o=n("9ggG"),i=n("9Nap");e.exports=function(e){return o(e)?r(i(e)):a(e)}},"/5+U":function(e,t,n){"use strict";n.d(t,"h",function(){return c}),n.d(t,"j",function(){return s}),n.d(t,"o",function(){return d}),n.d(t,"k",function(){return p}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"l",function(){return v}),n.d(t,"g",function(){return g}),n.d(t,"n",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"i",function(){return w}),n.d(t,"f",function(){return S}),n.d(t,"m",function(){return E}),n.d(t,"c",function(){return x});var r=n("rVSK"),a=n.n(r),o=n("8fIB"),i=n.n(o);function c(e){var t,n;return function(){return function(e,t){if(!e||e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(n,arguments)||(t=e.apply(null,arguments),n=arguments),t}}var s=function(e){return function(t){return t&&t.preventDefault(),t&&t.stopPropagation(),e&&e(t)}},u={"&amp;":"&","&lt;":"<","&gt;":">"},l=function(e){return u[e]||e},d=function(e){return e&&e.replace(/(&amp;|&lt;|&gt;)/g,l)},p=function(e,t,n){return Math.min(Math.max(e,t),n)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Number(parseFloat((1/t*e).toFixed(2)))+n},h=function(e){var t=e.image,n=e.adjust;t.naturalWidth>=t.naturalHeight?t.style.maxWidth=n+"px":t.style.maxHeight=n+"px"},m=function(e){var t=e.url,n=e.name,r=e.type,a=document.createElement("a"),o=function(e){if(e)return e.replace(/\s|<|>|《|》|:|：|？|\?|\\|\/|"|”|\||\./g,"_")}(n)||"未命名",i="".concat(encodeURIComponent(o));r?a.href="".concat(t,"?attname=").concat(i,".").concat(r):(a.setAttribute("download",i),a.href="".concat(t)),a.click()},v=function(e){return Number(e.toFixed(2))},g=function(e){var t=e.width,n=e.height,r=e.left,a=e.top,o=e.rotate,i=void 0===o?0:o;if(0===i)return[a,r,t,n];var c=MB.atan2(t,n),s=c-i,u=s-2*c,l=s+180,d=u+180,p=r+t/2,f=a+n/2,h=MB.hypotenuse(t/2,n/2),m=1/0,v=1/0,g=-1/0,y=-1/0;return[s,u,l,d].forEach(function(e){var t=Math.round(p+h*MB.cos(e)),n=Math.round(f+h*MB.sin(e));t<m&&(m=t),n<v&&(v=n),t>g&&(g=t),n>y&&(y=n)}),[v,m,g-m,y-v]},y=function(e){return new i.a(function(t){return setTimeout(t,e)})},b=function(){return console.error("下载失败")},w=function(e){var t="".concat(e).charCodeAt(0);return t>=19968&&t<=40869},S=function(){try{var e=MB.localStorageDelegate.getItem("user_pick_color");return JSON.parse(e||"[]")}catch(e){return[]}},E=function(e){var t=S();return t.includes(e)?{history:t,focusColor:e}:(t.unshift(e),t.length>40&&t.pop(),MB.localStorageDelegate.setItem("user_pick_color",a()(t)),{history:t,focusColor:null})},x=function(e){var t=S(),n=t.indexOf(e);return t.splice(n,1),MB.localStorageDelegate.setItem("user_pick_color",a()(t)),t}},"/9aa":function(e,t){e.exports=function(){return!1}},"/MKq":function(e,t){function n(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function c(e){n(i,a,o,c,s,"next",e)}function s(e){n(i,a,o,c,s,"throw",e)}c(void 0)})}}var a=function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.join("").replace(/<br>/g,"<br/>").replace(/&nbsp;/g," ").replace(i,""));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.prepareHTMLString=a;var o=function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","<style>".concat(c).concat(t.join(""),"</style>").replace(/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,"").replace(/#iefix&/g,"").replace(i,""));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.prepareCSSString=o;var i=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,c='\ninput[type="radio"] { -webkit-appearance: radio; -moz-appearance: radio; }\ninput[type="checkbox"] { -webkit-appearance: checkbox; -moz-appearance: checkbox; }\ninput[type="radio"], input[type="checkbox"] { box-sizing: border-box; max-width: 20px; max-height: 20px; }\ninput { -webkit-appearance: textfield; -moz-appearance: textfield; }\nselect { -webkit-appearance: menulist; -moz-appearance: menulist; }\n';t.prepareSVGString=function(e){var t=e.domString,n=e.width,r=e.height;return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'.concat(n,'" height="').concat(r,'">\n<switch>\n  <foreignObject width="').concat(n,'" height="').concat(r,'">\n    <body xmlns="http://www.w3.org/1999/xhtml" style="font-size:16px">').concat(t,'</body>\n  </foreignObject>\n  <text font-size="24">\n    <tspan x="').concat(n/2,'" y="').concat(r/2,'" text-anchor="middle">Feature not supported</tspan>\n  </text>\n</switch>\n</svg>')},t.prepareImageElement=function(e){var t=e.svgDataUrl,n=e.width,r=e.height;return new Promise(function(e,a){var o=document.createElement("img");o.addEventListener("error",a),o.addEventListener("load",function(){return e(o)}),o.crossOrigin="anonymous",o.width=n,o.height=r,o.src=t})},t.prepareCanvasElement=function(e){var t=e.imageElement,n=e.width,r=e.height;return new Promise(function(e){var a=document.createElement("canvas");a.width=n,a.height=r,setTimeout(function(){a.getContext("2d").drawImage(t,0,0),e(a)},0)})}},"/N2d":function(e,t,n){"use strict";n("9Kre"),n("rVSK"),n("cJHP");var r=n("o0o1"),a=n.n(r),o=n("yXPU"),i=n.n(o),c=n("q1tI"),s=n.n(c),u=n("KAy6"),l=n.n(u),d=n("t5S/"),p=n("87hQ"),f=n("zkrS"),h={cid:"default",name:"".concat(f.a.I18N.default," ").concat(f.a.I18N.state)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return"prev"!==e?"".concat(e,"+").concat(t):"prev"},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.cid,a=t.cid,o=e.width*n,i=e.height*n,c=[],s=function(e,t){t&&(t=x(t,o,i)),t&&c.push({link:e,toId:m(e.target_cid||r,e.targetstate_cid||"default"),relativeStyle:g(t,o,i)})},u=0,l=function(e){return e.cwidgets().reduce(function(t,r){return"pg"===r.name?(c.push({link:e,globalGestureIndex:u}),u++,t):S(t||w(),b(r,n))},null)};f.a.SpineModel.Link.select(function(e){if(e.state_cid){var t=f.a.SpineModel.Screen.find(e.state_cid),o=t&&f.a.SpineModel.Template.find(t.project_cid),i=o&&l(e);o&&i&&f.a.SpineModel.Panel.findAllByAttribute("template_cid",o.cid).filter(function(e){return e.screen_cid===r&&e.screenstate_cid===a}).forEach(function(t){var r=b(t,n),a={x:i.min.x+r.min.x,y:i.min.y+r.min.y},o={x:a.x+Math.min(i.max.x-i.min.x,r.max.x-r.min.x),y:a.y+Math.min(i.max.y-i.min.y,r.max.y-r.min.y)};s(e,{min:a,max:o})})}else if(e.screen_cid===r&&e.sourcestate_cid===a){var c=l(e);c&&s(e,c)}return!1});var d=[],p=f.a.SpineModel.Widget.findAllByAttribute("screen_cid",r),v=f.a.SpineModel.Widgetstate.findAllByAttribute("screenstate_cid",a);return p.forEach(function(e){if("sticky"===e.name){e=v.find(function(t){return t.widget_cid===e.cid})||e;var t=b(e,n),r=t.min,a=t.max;d.push({widget:e,relativeTop:E((r.y+e.slt*n)/i,0,1),relativeLeft:E((a.x+e.slw*n)/o,0,1),backgroundColor:e.bg||"#fffbba",contentStyle:{textAlign:e.ha||"left",fontSize:"".concat(e.fs||12,"px"),lineHeight:"".concat(e.lh||20,"px"),color:e.tc||"rgba(39,54,78,0.8)"}})}}),d.sort(function(e,t){return e.widget.slt-t.widget.slt}),{id:m(r,a),screenCid:r,screenStateCid:a,screenName:e.name,screenStateName:t.name,canvasZoom:n,canvasWidth:o,canvasHeight:i,linkDataList:c,noteDataList:d}},g=function(e,t,n){var r=e.min,a=e.max;return{top:r.y/n,left:r.x/t,width:(a.x-r.x)/t,height:(a.y-r.y)/n}},y=Math.PI/180,b=function(e,t){var n=(e.width||0)*t,r=(e.height||0)*t,a=(e.left||0)*t,o=(e.top||0)*t;if(e.ro){var i=e.ro*y,c=Math.sin(i),s=Math.cos(i),u=n*s+r*-c,l=n*c+r*s;a+=.5*(n-u),o+=.5*(r-l),n=u,r=l}return{min:{x:a,y:o},max:{x:a+n,y:o+r}}},w=function(){return{min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}}},S=function(e,t){var n=e.min,r=e.max;return n.x=Math.min(n.x,t.min.x),n.y=Math.min(n.y,t.min.y),r.x=Math.max(r.x,t.max.x),r.y=Math.max(r.y,t.max.y),e},E=function(e,t,n){return Math.min(Math.max(e,t),n)},x=function(e,t,n){var r=e.min,a=e.max;return r.x=E(r.x,0,t),r.y=E(r.y,0,n),a.x=E(a.x,0,t),a.y=E(a.y,0,n),r.x!==a.x&&r.y!==a.y?e:null},C=n("lwsE"),k=n.n(C),_=n("W8MJ"),M=n.n(_),T=n("a1gu"),O=n.n(T),j=n("Nsbk"),N=n.n(j),I=n("7W2i"),A=n.n(I),R=n("lSNA"),L=n.n(R),P=n("17x9"),D=n.n(P),B=n("9DAG"),F=n("IB8Z"),U=n("2qqa"),W=n("gCaL"),z=function(e){function t(){return k()(this,t),O()(this,N()(t).apply(this,arguments))}return A()(t,e),M()(t,[{key:"render",value:function(){var e=this.props,t=e.screen,n=e.state_cid,r=e.isSnapshot,a=Object(F.a)(Widget.irecords),o=Object(U.b)(t,n,a),i=Object(W.a)(o,t.cid).widgetTreeData;return s.a.createElement(B.a,{widgetTreeData:i,isSnapshot:r})}}]),t}(c.PureComponent);L()(z,"propTypes",{screen:D.a.object,state_cid:D.a.string,isSnapshot:D.a.bool}),n.d(t,"e",function(){return q}),n.d(t,"c",function(){return V}),n.d(t,"b",function(){return Y}),n.d(t,"d",function(){return Z}),n.d(t,"a",function(){return v});Object(p.setFetchOption)({method:"GET",cache:"default",mode:"no-cors",credentials:"same-origin"});var H=function(e){var t=e.canvasData.canvasZoom,n=e.screen,r=e.screenState,a=[],o=f.a.Global.$("body"),i=o.data("scale"),c=n.hh,u=n.fh,d=r?r.cid:"default";o.data("scale",100),n.hh=0,n.fh=0,n.lsave(!1);var p="background-color: ".concat(n.bg(),";"),h=n.bgimage?"background-image: url(".concat(n.getRealBgImage(),"); background-size: 100% auto;"):"",m="canvas ".concat(n.cp().device," ").concat(n.cp().model," ").concat(n.orient()),v="width: ".concat(n.width,"px; height: ").concat(n.height,"px; transform: scale(").concat(t,"); transform-origin: top left; position: relative; z-index: 1; ").concat(p).concat(h);return a.push('<div class="'.concat(m,'" style="').concat(v,'">')),a.push(l.a.renderToString(s.a.createElement(z,{screen:n,state_cid:d,isSnapshot:!0}))),a.push("</div>"),o.data("scale",i),n.hh=c,n.fh=u,n.lsave(!1),a},q=function(){var e=i()(a.a.mark(function e(t){var n,r,o,i,c,s,u,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.canvasData,r=t.screen,o=t.screenState,n.canvasZoom,i=n.canvasWidth,c=n.canvasHeight,s=H({canvasData:n,screen:r,screenState:o}),e.next=5,Object(d.createSnapshotFromHTMLSourceList)({htmlSourceList:s,width:i,height:c});case 5:return u=e.sent,u.svgString,u.imageElement,l=u.canvasElement,e.abrupt("return",l);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.screenCid,n=e.screenStateCid,r=e.canvasZoom,a=X(t,n,r),o=a.canvasData;return{canvasData:o,htmlString:function(e){var t=e.canvasData,n=e.screen,r=e.screenState;return H({canvasData:t,screen:n,screenState:r}).join("")}({canvasData:o,screen:a.screen,screenState:a.screenState})}},Y=function(){var e=i()(a.a.mark(function e(t){var n,r,o,i,c,s,u,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.screenCid,r=t.screenStateCid,o=t.canvasZoom,i=X(n,r,o),c=i.canvasData,s=i.screen,u=i.screenState,e.next=4,q({canvasData:c,screen:s,screenState:u});case 4:return l=e.sent,e.abrupt("return",{canvasData:c,canvasElement:l});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=f.a.SpineModel.Screen.all().find(function(t){return t.cid===e}),a=f.a.SpineModel.Screenstate.all().find(function(e){return e.cid===t});return{canvasData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.cid,a=t.cid,o=e.width*n,i=e.height*n;return{screenCid:r,screenStateCid:a,screenName:e.name,screenStateName:t.name,canvasZoom:n,canvasWidth:o,canvasHeight:i}}(r,a,n),screen:r,screenState:a}},Z=function(e,t){return Number((128/Math.max(e,t)).toFixed(2))}},"/OM1":function(e,t,n){e.exports={scroll_bar_container:"ADUwX5JJyFih8zxwAzh8H"}},"/Q2I":function(e,t,n){"use strict";n.d(t,"a",function(){return j});var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("cJHP"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("17x9"),E=n.n(S),x=n("i8i4"),C=n("Y+p1"),k=n.n(C),_=n("i6OX"),M=(n("NYM8"),[]),T=y()(document.createElement("div"),{className:"modal-portal"}),O=function(e){return e.stopPropagation()},j=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=s()(this,(e=l()(t)).call.apply(e,[this].concat(o))),v()(h()(h()(n)),"onOpen",function(){M.unshift(h()(h()(n))),setTimeout(function(){return n.portal.classList.add("is-open")},50),n.focusOnConfirmBtn(),n.reassignPosiY()}),v()(h()(h()(n)),"onClose",function(){var e=M.indexOf(h()(h()(n)));setTimeout(function(){return M.splice(e,1)}),setTimeout(function(){return n.portal.classList.remove("is-open")},50),setTimeout(function(){return Object(x.render)(w.a.createElement("div",null),n.portal)},500)}),v()(h()(h()(n)),"focusOnConfirmBtn",function(){return setTimeout(function(){var e=n.portal.querySelector("footer .confirm-btn");e&&e.focus()},50)}),v()(h()(h()(n)),"listenToKey",function(e){var t=e.key,r=e.target,a=n.props,o=a.isOpen,i=a.canCloseOnEsc,c=a.onClose,s=a.canConfirmOnEnter,u=a.onConfirm,l=a.isOnConfirmDisabled;"Escape"===t&&!r.matches("input, textarea, [type=select]")&&o&&i&&c&&h()(h()(n))===M[0]&&c(),"Enter"===t&&!r.matches("textarea")&&o&&s&&u&&!l&&h()(h()(n))===M[0]&&u()}),v()(h()(h()(n)),"reassignPosiY",function(){return setTimeout(function(){var e=n.props.type,t=n.portal.querySelector(".modal-mask > div");if(t&&"alert"!==e){var r=window.innerHeight,a=t.offsetHeight,o=r<=a||(r-a)/2<.2*r?"add":"remove";t.classList[o]("is-posi-centered")}},50)}),v()(h()(h()(n)),"renderRealModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=e.type,r=e.title,a=e.className,o=e.maskClassName,i=e.children,c=e.onClose,s=e.canCloseOnClickMask,u=e.onConfirm,l=e.confirmText,d=e.isOnConfirmDisabled,p=e.onCancel,f=e.cancelText,h=e.isOnCancelDisabled,m=e.onDone,v=e.doneText,g=e.isOnDoneDisabled,y="alert"===t||p||u||m,b=w.a.createElement("div",{className:"modal-mask ".concat(o," ").concat(s?"can-close":""),onClick:s?c:null},w.a.createElement("div",{className:"".concat(t,"-modal ").concat(a),onClick:O},w.a.createElement("header",null,r,c&&w.a.createElement("button",{className:"close-btn",onClick:c},w.a.createElement(_.b,{name:"times"}))),w.a.createElement("div",{className:"content"},i),y&&w.a.createElement("footer",null,p&&w.a.createElement("button",{className:"cancel-btn",onClick:p,disabled:h},f),u&&w.a.createElement("button",{className:"confirm-btn",onClick:u,disabled:d},l),m&&w.a.createElement("button",{className:"done-btn",onClick:m,disabled:g},v))));Object(x.render)(b,n.portal)}),n}return p()(t,e),i()(t,[{key:"render",value:function(){return null}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isOpen,n=e.portalClassName;y()(this,{portal:T.cloneNode()}),document.body.appendChild(this.portal),this.portal.className+=" ".concat(n),window.addEventListener("resize",this.reassignPosiY),document.addEventListener("keydown",this.listenToKey),t&&(this.renderRealModal(),this.onOpen())}},{key:"componentWillReceiveProps",value:function(e){k()(this.props,e)||this.renderRealModal(e);var t=e.isOpen,n=this.props.isOpen;!n&&t?this.onOpen():n&&!t&&this.onClose()}},{key:"componentWillUnmount",value:function(){Object(x.unmountComponentAtNode)(this.portal),this.portal&&this.portal.remove(),document.removeEventListener("keydown",this.listenToKey),window.removeEventListener("resize",this.reassignPosiY)}}]),t}(b.PureComponent);v()(j,"propTypes",{isOpen:E.a.bool,type:E.a.oneOf(["alert","functional","display"]),title:E.a.any,className:E.a.string,maskClassName:E.a.string,portalClassName:E.a.string,children:E.a.any,onClose:E.a.func,onCloseText:E.a.string,canCloseOnClickMask:E.a.bool,canCloseOnEsc:E.a.bool,canConfirmOnEnter:E.a.bool,onConfirm:E.a.func,confirmText:E.a.string,isOnConfirmDisabled:E.a.bool,onCancel:E.a.func,isOnCancelDisabled:E.a.bool,cancelText:E.a.string,onDone:E.a.func,isOnDoneDisabled:E.a.bool,doneText:E.a.string}),v()(j,"defaultProps",{isOpen:!1,type:"functional",className:"",maskClassName:"",portalClassName:"",onClose:function(){return null},canCloseOnClickMask:!0,canCloseOnEsc:!0,canConfirmOnEnter:!0,onCloseText:I18N.close,confirmText:I18N.confirm,isOnConfirmDisabled:!1,cancelText:I18N.cancel,isOnCancelDisabled:!1,doneText:I18N.done,isOnDoneDisabled:!1})},"/TnQ":function(e,t,n){"use strict";var r=n("ANjH").compose;t.__esModule=!0,t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer=function(){return function(e){return e}}},"/h46":function(e,t,n){n("cHUd")("Map")},"0/XF":function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("i6OX"),E=n("nc5A"),x=n.n(E),C=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=s()(this,(e=l()(t)).call.apply(e,[this].concat(o))),v()(h()(h()(n)),"handleChange",function(e){n.props.onChange(e.target.value)}),v()(h()(h()(n)),"handleClear",function(e){e.preventDefault(),n.props.onChange("")}),n}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.placeholder;return w.a.createElement("div",{type:"search",className:x.a.search},w.a.createElement(S.b,{type:"dora",name:"scale",className:"search-icon"}),w.a.createElement("input",{type:"text",value:t,placeholder:n,onChange:this.handleChange}),t.length>0&&w.a.createElement(S.b,{type:"dora",name:"times_fc",className:"clear-icon",onClick:this.handleClear}))}}]),t}(b.PureComponent);C.propTypes={value:y.a.string,placeholder:y.a.string,onChange:y.a.func}},"0JQy":function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+a+")"+"?",u="[\\ufe0e\\ufe0f]?"+s+("(?:\\u200d(?:"+[o,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*"),l="(?:"+[o+r+"?",r,i,c,n].join("|")+")",d=RegExp(a+"(?="+a+")|"+l+u,"g");e.exports=function(e){return e.match(d)||[]}},"0L8M":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("pVnL"),a=n.n(r),o=n("q1tI"),i=n.n(o),c=n("i8i4"),s=n.n(c),u=n("6x+O");function l(e,t){var n=Object(u.b)();s.a.render(i.a.createElement(e,a()({},t,{onClose:function(){return setTimeout(function(){s.a.unmountComponentAtNode(n),document.body.removeChild(n)})}})),n)}},"0ZTe":function(e,t,n){var r=n("wy8a"),a=n("quyA"),o=n("Em2t"),i=n("dt0z");e.exports=function(e){return function(t){t=i(t);var n=a(t)?o(t):void 0,c=n?n[0]:t.charAt(0),s=n?r(n,1).join(""):t.slice(1);return c[e]()+s}}},"0k54":function(e,t,n){"use strict";n.d(t,"h",function(){return u}),n.d(t,"a",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"f",function(){return m}),n.d(t,"b",function(){return y});var r=n("RIqP"),a=n.n(r),o=n("MVZn"),i=n.n(o),c=n("l0oT"),s=n("DdHt"),u=function e(t,n,r){var o=i()({},n);if(0===t.length)r(o);else{var c=t.shift(),s=o.children.findIndex(function(e){return e.cid===c}),u=o.children[s].widget.z;o.children=a()(o.children),o.children[s]=e(t,o.children[s],r),o.children[s].widget.z!==u&&o.children.sort(function(e,t){var n=e.widget,r=t.widget;return n.z-r.z||n.timestamp-r.timestamp})}return o},l=function e(t,n){for(var r=0;r<n.children.length;r++){var a=n.children[r];if(a.cid===t)return a;var o=e(t,a);if(o)return o}},d=function e(t){var n=[],r=t.type,o=t.widget,i=t.children;return"group"===r?i.forEach(function(t){return n.push.apply(n,a()(e(t)))}):n.push(o),n},p=function e(t){var n=[],r=t.type,o=t.widget,i=t.children;return n.push(o),"group"===r&&i.forEach(function(t){return n.push.apply(n,a()(e(t)))}),n},f=function e(t,n){var r=[],o=n[t];return o&&r.push(o),o&&o.gid&&r.push.apply(r,a()(e(o.gid,n))),r},h=function(e){var t={},n={root:[]};return e.forEach(function(e){t[e.cid]=e,e.gid?(n[e.gid]=n[e.gid]||[],n[e.gid].push(e)):n.root.push(e)}),n.root.map(function(e){return{cid:e.cid,widget:e,children:n[e.cid]||[]}})},m=function(e){return"group"===e.type?g(e):v(e.widget)},v=function(e){var t=e.t(),n=e.l(),r=e.r(),a=e.b();return{minX:Math.min(n,r),minY:Math.min(t,a),maxX:Math.max(n,r),maxY:Math.max(t,a)}},g=function e(t){var n=1/0,r=1/0,a=-1/0,o=-1/0;if("group"===t.type)t.children.forEach(function(t){var i=e(t);n=Math.min(n,i.minX),r=Math.min(r,i.minY),a=Math.max(a,i.maxX),o=Math.max(o,i.maxY)});else{var i=t.widget.rect();n=i.left,r=i.top,a=i.right,o=i.bottom}return{minX:n,minY:r,maxX:a,maxY:o}},y=function(e,t){if(e.every(function(e){return e.gid})){var n,r,a=l(e[0].gid,t),o=a.widget.ro,i=a.children.map(function(e){return e.widget}),u=Object(s.h)(i),d=u.left,p=u.top,f=u.bottom,h=u.right,m={},v=e.map(function(e){return m[e.cid]=e.dup(),e.cid}),g=i.map(function(e){return v.includes(e.cid)?m[e.cid]:e.dup()}),y=Object(s.h)(g),b=y.left,w=y.top,S=y.bottom,E=y.right;return b===d&&w===p&&E===h&&S===f||((n=d-b)&&g.forEach(function(e){e.top-=Math.round(n/2*Object(c.d)(o)),e.left+=Math.round(n/2-n/2*Object(c.a)(o))}),(r=p-w)&&g.forEach(function(e){e.left+=Math.round(r/2*Object(c.d)(o)),e.top+=Math.round(r/2-r/2*Object(c.a)(o))}),(r=S-f)&&g.forEach(function(e){e.left-=Math.round(r/2*Object(c.d)(o)),e.top-=Math.round(r/2-r/2*Object(c.a)(o))}),(n=E-h)&&g.forEach(function(e){e.top+=Math.round(n/2*Object(c.d)(o)),e.left-=Math.round(n/2-n/2*Object(c.a)(o))})),g}return e}},"1hJj":function(e,t,n){var r=n("Z0cm");e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return r(e)?e:[e]}},"1iCU":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return s}),n.d(t,"i",function(){return u}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return d});var r="inspect",a="preview",o="comment",i=[a,r,o],c=[{label:I18N.preview.preview,icon:a},{label:I18N.preview_panel.developer_mode,icon:r},{label:I18N.preview_panel.comment,icon:o}],s=c.slice(0,2),u={preview:"打开了预览界面",inspect:"切换到标注页面",comment:"切换到评论页面"},l=[{value:"device",label:I18N.device_shell},{value:"default",label:I18N.default_shell},{value:"none",label:I18N.none_shell}],d=l.concat().splice(1,2)},"1mjR":function(e,t,n){},"2qqa":function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"d",function(){return f}),n.d(t,"a",function(){return h});var r=n("MVZn"),a=n.n(r),o=n("eTac"),i=n.n(o),c=n("cJHP"),s=n.n(c),u=n("0k54"),l=n("IB8Z"),d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3?arguments[3]:void 0,a=[];Object(l.b)(e.cid,r).forEach(function(r){if("sticky"!==r.name){var o=Widgetstate.find(t+r.cid)||r,i=Widgetstate.find(n+r.cid)||r;s()(o,{z:i.z,gid:i.gid,timestamp:i.timestamp}),o.cid=r.cid,o.screen_cid=e.cid,a.push(o)}});var o=new i.a,c=e.cpanels().map(function(r){o.add(r.template_cid);var a=Panelstate.find(t+r.cid)||r,i=Panelstate.find(n+r.cid)||r;return s()(a,{z:i.z,gid:i.gid,timestamp:i.timestamp}),a.cid=r.cid,a.screen_cid=e.cid,a});return o.forEach(function(e){Template.find(e).cscreens().forEach(function(e){Object(l.b)(e.cid,r).forEach(function(e){"sticky"!==e.name&&a.push(e)})})}),c.concat(a)},p=function(e,t,n){var r=[];Object(l.b)(e.cid,n).forEach(function(n){if("sticky"!==n.name){var a=Widgetstate.find(t+n.cid)||n;a.cid=n.cid,a.screen_cid=e.cid,r.push(a)}});var a=new i.a,o=e.cpanels().map(function(n){a.add(n.template_cid);var r=Panelstate.find(t+n.cid)||n;return r.cid=n.cid,r.screen_cid=e.cid,r});return a.forEach(function(e){Template.find(e).cscreens().forEach(function(e){Object(l.b)(e.cid,n).forEach(function(e){"sticky"!==e.name&&r.push(e)})})}),o.concat(r)},f=function(e,t){var n=e.children.filter(function(e){return 0===e.widget.primary_fixed&&("group"!==e.type?e.widget.t()<t:Object(u.f)(e).minY<t)});return a()({},e,{children:n})},h=function(e,t,n){var r=e.children.filter(function(e){if(0!==e.widget.primary_fixed)return!1;var r=t-e.widget.b();return"group"!==e.type?r<n:t-Object(u.f)(e).maxY<n});return a()({},e,{children:r})}},"2rXa":function(e,t,n){},"2s0x":function(e,t,n){e.exports={"slice-container":"yWKU8qVPbqrRIRSJ_TjGi","slice-load-wrap":"_3WsSTJxbz12iOHZ8ntxQf8","slice-item":"_2vvvzR2E0SoIZOD3DAqHza",active:"_2WpARMx4pqMBHK1KM0kjLj",download:"_1hNQ5s7ZGKL2NIxtApkdLY","icon-download":"_2Bxe5XoVHVItE0i88jpN6d","no-slice":"_2d9jp1Mvca7Pr9eZSIevfN",spinner:"_1u-FVwfgZb3ahxMGw1-PnC","rotate-infinite":"_3nSb5BvCbI3mKp-n2u4hun","download-slice-load":"_3tq61brpxkFdCxReM8KHY-"}},"4/ic":function(e,t,n){var r=n("ZWtO");e.exports=function(e){return function(t){return r(t,e)}}},"4MIG":function(e,t,n){},"4dyd":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("UJpD"),E=n.n(S),x=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=s()(this,(e=l()(t)).call.apply(e,[this].concat(o))),v()(h()(h()(n)),"handleResize",function(){var e=n.elem.getBoundingClientRect();n.props.onResize(e)}),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.elem.contentWindow.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){var e=this.elem.contentWindow;e&&e.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this;return w.a.createElement("iframe",{ref:function(t){return e.elem=t},className:E.a.detector})}}]),t}(b.PureComponent);x.propTypes={onResize:y.a.func.isRequired}},"4sDh":function(e,t,n){var r=n("4uTw"),a=n("03A+"),o=n("Z0cm"),i=n("wJg7"),c=n("shjB"),s=n("9Nap");e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,d=!1;++u<l;){var p=s(t[u]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++u!=l?d:!!(l=null==e?0:e.length)&&c(l)&&i(p,l)&&(o(e)||a(e))}},"4uTw":function(e,t,n){var r=n("Z0cm"),a=n("9ggG"),o=n("GNiM"),i=n("dt0z");e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:o(i(e))}},"6PGs":function(e,t,n){e.exports={"screen-info":"_2v9yoyzXbIx0ZN2HixE5HA"}},"6ZRU":function(e,t,n){"use strict";var r=n("MVZn"),a=n.n(r),o=n("/MKj"),i={isOpen:!1,type:"alert",alertType:"alert",title:"",desc:"",onClose:function(){return null},onCancel:null,onConfirm:null,cancelText:void 0,confirmText:void 0,canCancel:!0,canConfirm:!0,canClose:!0},c=n("lwsE"),s=n.n(c),u=n("W8MJ"),l=n.n(u),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=n("7W2i"),v=n.n(m),g=n("lSNA"),y=n.n(g),b=n("17x9"),w=n.n(b),S=n("q1tI"),E=n.n(S),x=n("6XO9"),C=(n("wfO3"),function(e){function t(){return s()(this,t),p()(this,h()(t).apply(this,arguments))}return v()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.isOpen,r=e.type,a=e.alertType,o=e.title,i=e.desc,c=void 0===i?o:i,s=e.isHTML,u=e.onClose,l=void 0===u?function(){return t({type:"container:modal:close"})}:u,d=e.onCancel,p=void 0===d?function(){return null}:d,f=e.onConfirm,h=e.canClose,m=e.canCancel,v=e.canConfirm,g=e.cancelText,y=e.confirmText,b=m?function(){p&&p(),l&&l()}:void 0,w=v?function(){f&&f(),l&&l()}:void 0;return E.a.createElement(x.Modal,{isOpen:n,type:r,portalClassName:"global-alert-portal",title:o!==c&&o?o:I18N.reminder,onClose:function(){"function"==typeof p&&p(),l()},canClose:h,onCancel:b,onConfirm:w,cancelText:g,confirmText:y},s?E.a.createElement("p",{className:"desc",dangerouslySetInnerHTML:{__html:c}}):E.a.createElement("div",{className:"desc"},c),"prompt"===a&&E.a.createElement(x.FormLabel,{name:I18N.password},E.a.createElement(x.Input,{type:"password",className:"prompt-pwd"})))}}]),t}(S.PureComponent));y()(C,"propTypes",{dispatch:w.a.func,isOpen:w.a.bool,type:w.a.string,alertType:w.a.oneOf(["confirm","alert","prompt"]),onClose:w.a.func,onCancel:w.a.func,onConfirm:w.a.func,canClose:w.a.bool,canCancel:w.a.bool,canConfirm:w.a.bool,confirmText:w.a.string,cancelText:w.a.string,title:w.a.string,desc:w.a.any,isHTML:w.a.bool}),y()(C,"defaultProps",{type:"alert"});var k={Alert:Object(o.connect)(function(e){return a()({},e.container.alert)})(C)};t.a={reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"container:modal:open":return a()({},r,{isOpen:!0});case"container:modal:close":return a()({},e,{isOpen:!1})}return e},containers:k}},"6acW":function(e,t,n){var r=n("dt0z"),a=n("gQMU");e.exports=function(e){return a(r(e).toLowerCase())}},"6nK8":function(e,t,n){var r=n("dVn5"),a=n("fo6e"),o=n("dt0z"),i=n("9NmV");e.exports=function(e,t,n){return e=o(e),void 0===(t=n?void 0:t)?a(e)?i(e):r(e):e.match(t)||[]}},"6x+O":function(e,t,n){"use strict";function r(){var e=document.createElement("div");return document.body.appendChild(e),e}function a(){var e=document.querySelector("#canvas").getBoundingClientRect(),t=document.querySelector(".mb-viewport").getBoundingClientRect();return{canvasTop:e.top,canvasLeft:e.left,canvasWidth:e.width,canvasHeight:e.height,screenTop:t.top,screenLeft:t.left,screenWidth:t.width,screenHeight:t.height}}function o(e){var t=e.getBoundingClientRect(),n=t.top,r=t.left,a=t.right,o=t.bottom,i=document.elementFromPoint((r+a)/2,(n+o)/2);return e.contains(i)}function i(){var e=document.getSelection();if(!(e.rangeCount>0))return{};for(var t={},n=e.getRangeAt(0).commonAncestorContainer;n&&"P"!==n.nodeName&&"text_editor"!==n.id;){if(1===n.nodeType)switch(n.nodeName){case"I":t.italic=!0;break;case"B":t.bold=!0;break;case"U":t.underline=!0;break;case"STRIKE":t.lineThrough=!0;break;case"FONT":t.tc=n.color;var r=n.style.backgroundColor;r&&(t.bg=MB.rgb2hex(r));break;case"SPAN":t.bg=MB.rgb2hex(n.style.backgroundColor)}n=n.parentNode}return t}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return c});var c=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},"6xEa":function(e,t,n){var r,a=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function a(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(n){return a(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,a=t.length;r<a;r++){var i=t.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,a=n.length;r<a;r++)n[r]=256*t[2*r]+t[2*r+1];var i=[];return n.forEach(function(t){i.push(e(t))}),o.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return a(n,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,a,o,i={},c={},s="",u="",l="",d=2,p=3,f=2,h=[],m=0,v=0;for(o=0;o<e.length;o+=1)if(s=e.charAt(o),Object.prototype.hasOwnProperty.call(i,s)||(i[s]=p++,c[s]=!0),u=l+s,Object.prototype.hasOwnProperty.call(i,u))l=u;else{if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,v==t-1?(v=0,h.push(n(m)),m=0):v++;for(a=l.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a>>=1}else{for(a=1,r=0;r<f;r++)m=m<<1|a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a=0;for(a=l.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a>>=1}0==--d&&(d=Math.pow(2,f),f++),delete c[l]}else for(a=i[l],r=0;r<f;r++)m=m<<1|1&a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a>>=1;0==--d&&(d=Math.pow(2,f),f++),i[u]=p++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,v==t-1?(v=0,h.push(n(m)),m=0):v++;for(a=l.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a>>=1}else{for(a=1,r=0;r<f;r++)m=m<<1|a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a=0;for(a=l.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a>>=1}0==--d&&(d=Math.pow(2,f),f++),delete c[l]}else for(a=i[l],r=0;r<f;r++)m=m<<1|1&a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(a=2,r=0;r<f;r++)m=m<<1|1&a,v==t-1?(v=0,h.push(n(m)),m=0):v++,a>>=1;for(;;){if(m<<=1,v==t-1){h.push(n(m));break}v++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var a,o,i,c,s,u,l,d=[],p=4,f=4,h=3,m="",v=[],g={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)d[a]=a;for(i=0,s=Math.pow(2,2),u=1;u!=s;)c=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),i|=(c>0?1:0)*u,u<<=1;switch(i){case 0:for(i=0,s=Math.pow(2,8),u=1;u!=s;)c=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),i|=(c>0?1:0)*u,u<<=1;l=e(i);break;case 1:for(i=0,s=Math.pow(2,16),u=1;u!=s;)c=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),i|=(c>0?1:0)*u,u<<=1;l=e(i);break;case 2:return""}for(d[3]=l,o=l,v.push(l);;){if(g.index>t)return"";for(i=0,s=Math.pow(2,h),u=1;u!=s;)c=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),i|=(c>0?1:0)*u,u<<=1;switch(l=i){case 0:for(i=0,s=Math.pow(2,8),u=1;u!=s;)c=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),i|=(c>0?1:0)*u,u<<=1;d[f++]=e(i),l=f-1,p--;break;case 1:for(i=0,s=Math.pow(2,16),u=1;u!=s;)c=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),i|=(c>0?1:0)*u,u<<=1;d[f++]=e(i),l=f-1,p--;break;case 2:return v.join("")}if(0==p&&(p=Math.pow(2,h),h++),d[l])m=d[l];else{if(l!==f)return null;m=o+o.charAt(0)}v.push(m),d[f++]=o+m.charAt(0),o=m,0==--p&&(p=Math.pow(2,h),h++)}}};return o}();void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"740n":function(e,t,n){e.exports={scrollbar:"_1Su5P8hkspcsNxxqlCFN8Z"}},"79/T":function(e,t,n){var r=n("sgoq")(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});e.exports=r},"7GkX":function(e,t,n){var r=n("kekF")(Object.keys,Object);e.exports=r},"7Qib":function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"c",function(){return g}),n.d(t,"f",function(){return y}),n.d(t,"a",function(){return b}),n.d(t,"g",function(){return w});var r=n("lSNA"),a=n.n(r),o=n("cJHP"),i=n.n(o),c=n("J4zp"),s=n.n(c),u=n("l00i"),l=n.n(u),d=n("u6S6"),p=n.n(d),f=n("79/T"),h=n.n(f),m=n("t3Un");n.d(t,"e",function(){return m.b}),n.d(t,"h",function(){return m.c}),n.d(t,"d",function(){return m.a});var v=function(e){return MB.localStorageDelegate.getItem(e)},g=function(e,t){return MB.localStorageDelegate.setItem(e,t)};function y(e){return e?{hidden:!0}:{}}function b(e){return l()(e).reduce(function(e,t){var n=s()(t,2),r=n[0],o=n[1];return i()(e,a()({},p()(r),o))},{})}function w(e){return l()(e).reduce(function(e,t){var n=s()(t,2),r=n[0],o=n[1];return i()(e,a()({},h()(r),o))},{})}},"7bO/":function(e,t,n){"use strict";var r=n("Ev6p"),a=n("92lH"),o=n("udQi"),i=n("tw9P"),c=n("mbVZ"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var l="proc first argument (Saga function result) must be an iterator",d={toString:function(){return"@@redux-saga/CHANNEL_END"}},p={toString:function(){return"@@redux-saga/TASK_CANCEL"}},f={wildcard:function(){return r.o},default:function(e){return"symbol"===(void 0===e?"undefined":u(e))?function(t){return t.type===e}:function(t){return t.type===String(e)}},array:function(e){return function(t){return e.some(function(e){return h(e)(t)})}},predicate:function(e){return function(t){return e(t)}}};function h(e){return("*"===e?f.wildcard:r.n.array(e)?f.array:r.n.stringableFunc(e)?f.default:r.n.func(e)?f.predicate:f.default)(e)}var m=function(e){return{fn:e}};function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return r.r},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.r,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.r,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",w=arguments[8];Object(r.g)(e,r.n.iterator,l);var S=Object(r.k)(F,Object(r.w)("[...effects]","all([...effects])")),E=g.sagaMonitor,x=g.logger,C=g.onError,k=x||r.p,_=function(e){var t=e.sagaStack;!t&&e.stack&&(t=-1!==e.stack.split("\n")[0].indexOf(e.message)?e.stack:"Error: "+e.message+"\n"+e.stack),k("error","uncaught at "+b,t||e.message||e)},M=Object(a.e)(t),T=Object.create(f);A.cancel=r.r;var O=function(e,t,n,a){var o,i;return n._deferredEnd=null,(o={})[r.e]=!0,o.id=e,o.name=t,"done",(i={}).done=i.done||{},i.done.get=function(){if(n._deferredEnd)return n._deferredEnd.promise;var e=Object(r.i)();return n._deferredEnd=e,n._isRunning||(n._error?e.reject(n._error):e.resolve(n._result)),e.promise},o.cont=a,o.joiners=[],o.cancel=I,o.isRunning=function(){return n._isRunning},o.isCancelled=function(){return n._isCancelled},o.isAborted=function(){return n._isAborted},o.result=function(){return n._result},o.error=function(){return n._error},o.setContext=function(e){Object(r.g)(e,r.n.object,Object(r.h)("task",e)),r.s.assign(T,e)},function(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}}(o,i),o}(y,b,e,w),j={name:b,cancel:function(){j.isRunning&&!j.isCancelled&&(j.isCancelled=!0,A(p))},isRunning:!0},N=function(e,t,n){var a=[],o=void 0,i=!1;function c(e){u(),n(e,!0)}function s(e){a.push(e),e.cont=function(s,u){i||(Object(r.t)(a,e),e.cont=r.r,u?c(s):(e===t&&(o=s),a.length||(i=!0,n(o))))}}function u(){i||(i=!0,a.forEach(function(e){e.cont=r.r,e.cancel()}),a=[])}return s(t),{addTask:s,cancelAll:u,abort:c,getTasks:function(){return a},taskNames:function(){return a.map(function(e){return e.name})}}}(0,j,R);function I(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,N.cancelAll(),R(p))}return w&&(w.cancel=I),e._isRunning=!0,A(),O;function A(t,n){if(!j.isRunning)throw new Error("Trying to resume an already finished generator");try{var a=void 0;n?a=e.throw(t):t===p?(j.isCancelled=!0,A.cancel(),a=r.n.func(e.return)?e.return(p):{done:!0,value:p}):a=t===d?r.n.func(e.return)?e.return():{done:!0}:e.next(t),a.done?(j.isMainRunning=!1,j.cont&&j.cont(a.value)):L(a.value,y,"",A)}catch(e){j.isCancelled&&_(e),j.isMainRunning=!1,j.cont(e,!0)}}function R(t,n){e._isRunning=!1,M.close(),n?(t instanceof Error&&Object.defineProperty(t,"sagaStack",{value:"at "+b+" \n "+(t.sagaStack||t.stack),configurable:!0}),O.cont||(t instanceof Error&&C?C(t):_(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),O.cont&&O.cont(t,n),O.joiners.forEach(function(e){return e.cb(t,n)}),O.joiners=null}function L(e,l){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",v=arguments[3],g=Object(r.v)();E&&E.effectTriggered({effectId:g,parentEffectId:l,label:f,effect:e});var y=void 0;function w(e,t){y||(y=!0,v.cancel=r.r,E&&(t?E.effectRejected(g,e):E.effectResolved(g,e)),v(e,t))}w.cancel=r.r,v.cancel=function(){if(!y){y=!0;try{w.cancel()}catch(e){_(e)}w.cancel=r.r,E&&E.effectCancelled(g)}};var x=void 0;return r.n.promise(e)?P(e,w):r.n.helper(e)?B(m(e),g,w):r.n.iterator(e)?D(e,g,b,w):r.n.array(e)?S(e,g,w):(x=i.c.take(e))?function(e,t){var n=e.channel,r=e.pattern,o=e.maybe;n=n||M;var i=function(e){return e instanceof Error?t(e,!0):Object(a.d)(e)&&!o?t(d):t(e)};try{n.take(i,h(r))}catch(e){return t(e,!0)}t.cancel=i.cancel}(x,w):(x=i.c.put(e))?function(e,t){var a=e.channel,i=e.action,c=e.resolve;Object(o.a)(function(){var e=void 0;try{e=(a?a.put:n)(i)}catch(e){if(a||c)return t(e,!0);_(e)}if(!c||!r.n.promise(e))return t(e);P(e,t)})}(x,w):(x=i.c.all(e))?F(x,g,w):(x=i.c.race(e))?function(e,t,n){var o=void 0,i=Object.keys(e),c={};i.forEach(function(t){var u=function(c,u){if(!o)if(u)n.cancel(),n(c,!0);else if(!Object(a.d)(c)&&c!==d&&c!==p){var l;n.cancel(),o=!0;var f=((l={})[t]=c,l);n(r.n.array(e)?[].slice.call(s({},f,{length:i.length})):f)}};u.cancel=r.r,c[t]=u}),n.cancel=function(){o||(o=!0,i.forEach(function(e){return c[e].cancel()}))},i.forEach(function(n){o||L(e[n],t,n,c[n])})}(x,g,w):(x=i.c.call(e))?function(e,t,n){var a=e.context,o=e.fn,i=e.args,c=void 0;try{c=o.apply(a,i)}catch(e){return n(e,!0)}return r.n.promise(c)?P(c,n):r.n.iterator(c)?D(c,t,o.name,n):n(c)}(x,g,w):(x=i.c.cps(e))?function(e,t){var n=e.context,a=e.fn,o=e.args;try{var i=function(e,n){return r.n.undef(e)?t(n):t(e,!0)};a.apply(n,o.concat(i)),i.cancel&&(t.cancel=function(){return i.cancel()})}catch(e){return t(e,!0)}}(x,w):(x=i.c.fork(e))?B(x,g,w):(x=i.c.join(e))?function(e,t){if(e.isRunning()){var n={task:O,cb:t};t.cancel=function(){return Object(r.t)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())}(x,w):(x=i.c.cancel(e))?function(e,t){e===r.d&&(e=O);e.isRunning()&&e.cancel();t()}(x,w):(x=i.c.select(e))?function(e,t){var n=e.selector,r=e.args;try{var a=n.apply(void 0,[u()].concat(r));t(a)}catch(e){t(e,!0)}}(x,w):(x=i.c.actionChannel(e))?function(e,n){var r=e.pattern,o=e.buffer,i=h(r);i.pattern=r,n(Object(a.c)(t,o||c.a.fixed(),i))}(x,w):(x=i.c.flush(e))?function(e,t){e.flush(t)}(x,w):(x=i.c.cancelled(e))?function(e,t){t(!!j.isCancelled)}(0,w):(x=i.c.getContext(e))?function(e,t){t(T[e])}(x,w):(x=i.c.setContext(e))?function(e,t){r.s.assign(T,e),t()}(x,w):w(e)}function P(e,t){var n=e[r.a];r.n.func(n)?t.cancel=n:r.n.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function D(e,r,a,o){v(e,t,n,u,T,g,r,a,o)}function B(e,a,i){var c=e.context,s=e.fn,l=e.args,d=e.detached,p=function(e){var t=e.context,n=e.fn,a=e.args;if(r.n.iterator(n))return n;var o=void 0,i=void 0;try{o=n.apply(t,a)}catch(e){i=e}return r.n.iterator(o)?o:i?Object(r.q)(function(){throw i}):Object(r.q)(function(){var e=void 0,t={done:!1,value:o};return function(n){return e?function(e){return{done:!0,value:e}}(n):(e=!0,t)}}())}({context:c,fn:s,args:l});try{Object(o.c)();var f=v(p,t,n,u,T,g,a,s.name,d?null:r.r);d?i(f):p._isRunning?(N.addTask(f),i(f)):p._error?N.abort(p._error):i(f)}finally{Object(o.b)()}}function F(e,t,n){var o=Object.keys(e);if(!o.length)return n(r.n.array(e)?[]:{});var i=0,c=void 0,u={},l={};o.forEach(function(t){var f=function(l,f){c||(f||Object(a.d)(l)||l===d||l===p?(n.cancel(),n(l,f)):(u[t]=l,++i===o.length&&(c=!0,n(r.n.array(e)?r.f.from(s({},u,{length:o.length})):u))))};f.cancel=r.r,l[t]=f}),n.cancel=function(){c||(c=!0,o.forEach(function(e){return l[e].cancel()}))},o.forEach(function(n){return L(e[n],t,n,l[n])})}}var g="runSaga(storeInterface, saga, ...args): saga argument must be a Generator function!";n("q09E"),n("oZtI"),t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["context"]),i=o.sagaMonitor,c=o.logger,s=o.onError;if(r.n.func(o))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(c&&!r.n.func(c))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(s&&!r.n.func(s))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(o.emitter&&!r.n.func(o.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");function u(e){var t=e.getState,l=e.dispatch,d=Object(a.b)();return d.emit=(o.emitter||r.l)(d.emit),u.run=function(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var i=void 0;r.n.iterator(e)?(i=e,e=t):(Object(r.g)(t,r.n.func,g),i=t.apply(void 0,a),Object(r.g)(i,r.n.iterator,g));var c=e,s=c.subscribe,u=c.dispatch,l=c.getState,d=c.context,p=c.sagaMonitor,f=c.logger,h=c.onError,m=Object(r.v)();p&&(p.effectTriggered=p.effectTriggered||r.r,p.effectResolved=p.effectResolved||r.r,p.effectRejected=p.effectRejected||r.r,p.effectCancelled=p.effectCancelled||r.r,p.actionDispatched=p.actionDispatched||r.r,p.effectTriggered({effectId:m,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:a}}));var y=v(i,s,Object(r.x)(u),l,d,{sagaMonitor:p,logger:f,onError:h},m,t.name);return p&&p.effectResolved(m,y),y}.bind(null,{context:n,subscribe:d.subscribe,dispatch:l,getState:t,sagaMonitor:i,logger:c,onError:s}),function(e){return function(t){i&&i.actionDispatched&&i.actionDispatched(t);var n=e(t);return d.emit(t),n}}}return u.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},u.setContext=function(e){Object(r.g)(e,r.n.object,Object(r.h)("sagaMiddleware",e)),r.s.assign(n,e)},u}},"7eYF":function(e,t,n){"use strict";var r=n("RIqP"),a=n.n(r),o=n("MVZn"),i=n.n(o),c=n("o0o1"),s=n.n(c),u=n("ANjH"),l=n("WVP6"),d=n("7bO/"),p=n("/TnQ"),f=n("IV71"),h=n("zkrS"),m=n("J4zp"),v=n.n(m),g=n("upRB"),y=n("7Qib"),b={"entry:init:preview-setting":function(e){var t=e.getState,n=e.dispatch,r=t(),a=Object(g.b)(r),o=Object(y.b)("preview-shell-type")?Object(y.b)("preview-shell-type"):a.shell_type;n({type:"reducer:preview-toolbar:update",payload:{isScrollable:"false"!==Object(y.b)("preview-is-scrollable"),isStickyShow:"false"!==Object(y.b)("preview-is-stickyshow"),isHighlight:Object(y.b)("preview-is-highlight")?"false"!==Object(y.b)("preview-is-highlight"):a.highlight,shellType:o}})},"entry:preview-setting:update:is-highlight":function(e,t){var n=e.dispatch,r=t.payload.isHighlight;Object(y.c)("preview-is-highlight",r),n({type:"reducer:preview-toolbar:update",payload:{isHighlight:r}})},"entry:preview-setting:update:shell-type":function(e,t){var n=e.dispatch,r=t.payload.shellType;Object(y.c)("preview-shell-type",r),n({type:"reducer:preview-toolbar:update",payload:{shellType:r}}),setTimeout(function(){MB.runner.reload()})},"entry:preview-setting:update:is-scrollable":function(e,t){var n=e.dispatch,r=t.payload.isScrollable;Object(y.c)("preview-is-scrollable",r),n({type:"reducer:preview-toolbar:update",payload:{isScrollable:r}}),setTimeout(function(){MB.runner.reload()})},"entry:preview-setting:update:is-sticky-show":function(e,t){var n=e.dispatch,r=t.payload.isStickyShow;Object(y.c)("preview-is-stickyshow",r),n({type:"reducer:preview-toolbar:update",payload:{isStickyShow:r}})}},w=n("Gbs1"),S=i()({},b,{"entry:init:preview:scale":function(e){var t=e.getState,n=e.dispatch,r=t(),a=Object(g.b)(r);if(MB.isUIChina()&&"geely_center_control"===a.model)n({type:"preview:set:scale",payload:{scale:40}});else{var o=function(e){return Number(MB.localStorageDelegate.getItem("preview_scale_".concat(e)))}(a.cid);o&&!MB.isForum()?n({type:"preview:set:scale",payload:{scale:o}}):n({type:"entry:auto-fit:preview:scale"})}},"entry:auto-fit:preview:scale":function(e){var t=e.getState,n=e.dispatch,r=t(),a=r.container.previewSetting.isFullScreenMode,o=Object(g.b)(r),i=Object(g.d)(r),c=Object(g.i)(r),s=Object(w.b)(o,c),u="landscape"===i.orientation?[s.height,s.width]:[s.width,s.height],l=v()(u,2),d=l[0],p=l[1],f=o.template?.8:1,h=a||MB.isForum()?0:500,m=window.innerWidth*f-h,y=window.innerHeight*f-56,b=100*Math.min((y-40)/p,(m-40)/d);n({type:"preview:set:scale",payload:{scale:Math.min(Math.max(b,20),100)}})},"entry:preview:set:scale":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.scale,o=r(),i=o.model.current.projectCid;!o.container.previewSetting.isFullScreenMode&&function(e,t){MB.localStorageDelegate.setItem("preview_scale_".concat(e),t)}(i,a),n({type:"preview:set:scale",payload:{scale:a}})},"entry:update:screen:state":function(e,t){var n=e.dispatch,r=t.payload,a=r.screen,o=r.stateCid,i=a.dup();i.state_cid=o,n({type:"screens:update-local",payload:i})},"entry:preview:set:canvas:offset":function(e,t){var n=e.getState,r=e.dispatch,a=t.payload.offset,o=n(),i=Object(g.d)(o),c=Object(g.c)(o),s=document.querySelector("#preview_scrollBar_viewport").getBoundingClientRect(),u=s.width,l=s.height,d=Math.max(3.5*u,i.width*c/100*2),p=Math.max(3.5*l,i.height*c/100*2),f=a.x,h=a.y;r({type:"preview:set:canvas:offset",payload:{offset:{x:f=-Math.max(Math.min(-f,d/2),-d/2),y:h=-Math.max(Math.min(-h,p/2),-p/2)}}})},"entry:update:scrollbar:viewport":function(e){var t=e.dispatch,n=document.querySelector("#preview_scrollBar_viewport");if(n){var r=n.getBoundingClientRect();t({type:"preview:scrollbar:viewport",payload:{width:r.width,height:r.height}})}}}),E=i()({},S,{"entry:state:init":function(e){var t=e.dispatch;t({type:"user:set",payload:h.a.MB.user||null}),t({type:"teams:refresh"}),t({type:"widgets:refresh"}),t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:h.a.MB.currentProject,screen:h.a.MB.currentScreen}})},"entry:state:clear":function(e){e.dispatch},"entry:sync-runner:set-screen":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.cid;n({type:"entry:current:set-screen",payload:{cid:a}}),"inspect"==r().container.previewSetting.toolbarActiveItem&&n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:a}}),h.a.MB.runner.loadScreen(a)},"entry:refresh:team-related":function(e){var t=e.dispatch;t({type:"teams:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:h.a.MB.currentProject,screen:h.a.MB.currentScreen}})},"entry:refresh:project-related":function(e){var t=e.dispatch;t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"widgets:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:h.a.MB.currentProject,screen:h.a.MB.currentScreen}})},"entry:listpage:toggle:order":function(e){var t,n=e.dispatch,r=e.getState,a=h.a.MB.preference(),o=r().container.listpage.ui.order;o?(t="asc"===o?"desc":"asc",a.app_order=t,a.lsave(),h.a.SpineModel.queueSave()):t=a.app_order,n({type:"container:listpage:set:order",payload:{order:t}})},"entry:focus-element":function(e,t){e.dispatch;var n=t.payload,r=n.focusType,a=n.element;return a&&setTimeout(function(){switch(r){case"normal":case"external":return a.focus&&a.focus()}},100),!0},"entry:preview:select":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.toolbarActiveItem,o=r(),i=o.container.previewSetting,c=o.model.user;if(a!=i.activeItem){var s="comment"==a||"inspect"==a?"immersive":"default";"comment"==a&&(h.a.MB.currentProject.limitation.commentable||MB.promptRenew("cant_comment",{role:h.a.MB.currentProject.owner_id!==c.id?h.a.MB.currentProject.team_cid?"team":"project":"user"})),"inspect"==a&&n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:h.a.MB.currentScreen.cid}}),s!==h.a.MB.runner.mode&&(h.a.MB.runner.mode=s,setTimeout(function(){h.a.MB.runner.reload()})),n({type:"reducer:preview-toolbar:update",payload:{toolbarActiveItem:a}})}},"container:comment:select":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.select,o=r(),i=o.model,c=i.comments,s=i.commentThreads,u=o.container,l=s.find(function(e){return e.cid===u.comment.select});l&&a!==u.comment.select&&!c.find(function(e){return e.thread_cid===l.cid})&&n({type:"entry:comment-threads:delete",payload:l})},"entry:preview:clear":function(e,t){var n=e.dispatch;h.a.MB.runner.mode="default",n({type:"reducer:preview-panel:reset"}),n({type:"container:layers:clear"})}}),x=n("eTac"),C=n.n(x),k=n("q1tI"),_=n.n(k),M=n("wCGR"),T=n("6XO9"),O=n("cJHP"),j=n.n(O),N=n("iVxW"),I=n.n(N),A=n("IT1M"),R=h.a.SpineModel,L={Team:"t",Project:"p",Combo:"c",Template:"t",Screen:"s",Collaborator:"co",Comment:"cm",CommentThread:"cmth",Widget:"w"},P=I()(L),D=P.reduce(function(e,t){return e[t]=R[t].attributes,e},{});D.Widget=a()(D.Widget).concat(["id"]);var B=P.reduce(function(e,t){var n=R[t],r=D[t],a=L[t],o=function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return{dataState:r,dataModel:a}};return e[t]={refreshStateList:function(e){return n.all().map(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.forEach(function(n){return t[n]=e[n]}),t}(e,{})})},saveState:function(e,t,n){var r=t.cid,a=o(e,r),i=a.dataState,c=a.dataModel;return i&&c?(c.lsave(!n),!n&&h.a.SpineModel.queueSave(),e):e},addState:function(e,t,r){var o=t.cid||h.a.SpineModel.requestCid(a);(function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return Boolean(r||a)})(e,o)&&(o=h.a.SpineModel.requestCid(a));var c=i()({},t,{cid:o});return new n(c).lsave(!r),!r&&h.a.SpineModel.queueSave(),A.Operation.arrayPush(e,c)},updateState:function(e,t,n){var r=t.cid,a=o(e,r),c=a.dataState,s=a.dataModel;return c&&s?(c=i()({},c,t),j()(s,c),s.lsave(!n),!n&&h.a.SpineModel.queueSave(),A.Operation.arrayFindSet(e,function(e){return e.cid===r},c)):e},deleteState:function(e,t,n){var r=t.cid,a=o(e,r),i=a.dataState,c=a.dataModel;return i&&c?(c.ldestroy(!n),!n&&h.a.SpineModel.queueSave(),A.Operation.arrayFindDelete(e,function(e){return e.cid===r})):e}},e},{}),F=function(e){return function(t,n,r){var a=n.cid,o=R.Project.findByAttribute("cid",a)?"Project":R.Template.findByAttribute("cid",a)?"Template":R.Combo.findByAttribute("cid",a)?"Combo":null;return B[o][e](t,n,r)}};B.ProjectAlike={refreshStateList:function(e){return a()(B.Project.refreshStateList()).concat(a()(B.Template.refreshStateList()),a()(B.Combo.refreshStateList()))},saveState:F("saveState"),addState:F("addState"),updateState:F("updateState"),deleteState:F("deleteState")};var U=B.Collaborator,W=Object(l.createStateStore)([]),z=W.getState,H=W.setState,q=W.wrapEntry,V=function(e,t){return q(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:collaborators:update",payload:e(n,i,t)})})},Y={entryMap:{"collaborators:refresh":q(function(e,t,n){var r=t.dispatch,a=n&&n.payload;(e=U.refreshStateList(e,a,!1)).forEach(function(e){e.avatar||(e.avatar="/images/avatar.png")}),r({type:"reducer:collaborators:update",payload:e})}),"collaborators:add":V(U.addState,!1),"collaborators:add-local":V(U.addState,!0),"collaborators:update":V(U.updateState,!1),"collaborators:update-local":V(U.updateState,!0),"collaborators:delete":V(U.deleteState,!1),"collaborators:delete-local":V(U.deleteState,!0)},getState:z,setState:H},X=B.Comment,Z=Object(l.createStateStore)([]),K=Z.getState,G=Z.setState,J=Z.wrapEntry,Q=function(e,t){return J(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comments:update",payload:e(n,i,t)})})},$={entryMap:{"comments:refresh":Q(X.refreshStateList,!1),"comments:add":Q(X.addState,!1),"comments:add-local":Q(X.addState,!0),"comments:update":Q(X.updateState,!1),"comments:update-local":Q(X.updateState,!0),"comments:delete":Q(X.deleteState,!1),"comments:delete-local":Q(X.deleteState,!0)},getState:K,setState:G},ee=B.CommentThread,te=Object(l.createStateStore)([]),ne=te.getState,re=te.setState,ae=te.wrapEntry,oe=function(e,t){return ae(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comment-threads:update",payload:e(n,i,t)})})},ie={entryMap:{"comment-threads:refresh":oe(ee.refreshStateList,!1),"comment-threads:save":oe(ee.saveState,!1),"comment-threads:add":oe(ee.addState,!1),"comment-threads:add-local":oe(ee.addState,!0),"comment-threads:update":oe(ee.updateState,!1),"comment-threads:update-local":oe(ee.updateState,!0),"comment-threads:delete":oe(ee.deleteState,!1),"comment-threads:delete-local":oe(ee.deleteState,!0)},getState:ne,setState:re},ce=B.ProjectAlike,se=Object(l.createStateStore)([]),ue=se.getState,le=se.setState,de=se.wrapEntry,pe=function(e,t){return de(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:projects:update",payload:e(n,i,t)})})},fe={entryMap:{"projects:refresh":pe(ce.refreshStateList,!1),"projects:add":pe(ce.addState,!1),"projects:add-local":pe(ce.addState,!0),"projects:update":pe(ce.updateState,!1),"projects:update-local":pe(ce.updateState,!0),"projects:delete":pe(ce.deleteState,!1),"projects:delete-local":pe(ce.deleteState,!0)},getState:ue,setState:le},he=B.Screen,me=Object(l.createStateStore)([]),ve=me.getState,ge=me.setState,ye=me.wrapEntry,be=function(e,t){return ye(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:screens:update",payload:e(n,i,t)})})},we={entryMap:{"screens:refresh":be(he.refreshStateList,!1),"screens:add":be(he.addState,!1),"screens:add-local":be(he.addState,!0),"screens:update":be(he.updateState,!1),"screens:update-local":be(he.updateState,!0),"screens:delete":be(he.deleteState,!1),"screens:delete-local":be(he.deleteState,!0)},getState:ve,setState:ge},Se=B.Team,Ee=Object(l.createStateStore)([]),xe=Ee.getState,Ce=Ee.setState,ke=Ee.wrapEntry,_e=function(e,t){return ke(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:teams:update",payload:e(n,i,t)})})},Me={entryMap:{"teams:refresh":_e(Se.refreshStateList,!1),"teams:add":_e(Se.addState,!1),"teams:add-local":_e(Se.addState,!0),"teams:update":_e(Se.updateState,!1),"teams:update-local":_e(Se.updateState,!0),"teams:delete":_e(Se.deleteState,!1),"teams:delete-local":_e(Se.deleteState,!0)},getState:xe,setState:Ce},Te=B.Widget,Oe=Object(l.createStateStore)([]),je=Oe.getState,Ne=Oe.setState,Ie=Oe.wrapEntry,Ae=function(e,t){return Ie(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:widgets:update",payload:e(n,i,t)})})},Re={entryMap:{"widgets:refresh":Ae(Te.refreshStateList,!1),"widgets:add":Ae(Te.addState,!1),"widgets:add-local":Ae(Te.addState,!0),"widgets:update":Ae(Te.updateState,!1),"widgets:update-local":Ae(Te.updateState,!0),"widgets:delete":Ae(Te.deleteState,!1),"widgets:delete-local":Ae(Te.deleteState,!0)},getState:je,setState:Ne},Le={id:null,name:"",email:"",avatar:"",plan:{state:"",type:"free",rawType:"free",collaboratorLimitation:0,daysLeft:""}},Pe=Object(l.createStateStore)(Le),De=Pe.getState,Be=Pe.setState,Fe=Pe.wrapEntry;var Ue={entryMap:{"user:set":Fe(function(e,t,n){var r=t.dispatch,a=n.payload,o=a.id,i=void 0===o?null:o,c=a.name,s=void 0===c?"":c,u=a.email,l=void 0===u?"":u,d=a.avatar,p=void 0===d?"":d;r({type:"reducer:user:update",payload:A.Operation.objectMerge(e,{id:i,name:s,email:l,avatar:p,plan:function(e){var t=e.plan,n=e.state,r=e.limitation,a=e.days_left,o="active"===n;return{state:n||"",type:o&&t||"free",rawType:t||"free",collaboratorLimitation:o&&r||0,daysLeft:a||""}}(a)})})}),"user:clear":Fe(function(e,t,n){(0,t.dispatch)({type:"reducer:user:update",payload:Le})})},getState:De,setState:Be},We=Object(l.createStateStore)({teamCid:null,projectCid:null,screenCid:null,userRole:"guest"}),ze=We.getState,He=We.setState,qe={"current:set":(0,We.wrapEntry)(function(e,t,n){var r=t.dispatch,a=n.payload,o=a.project,i=a.screen,c=a.userCollaborator;r({type:"reducer:current:update",payload:{teamCid:o&&o.team_cid||null,projectCid:o&&o.cid||null,screenCid:i&&i.cid||null,userRole:function(e){return Ve.has(e)?e:"guest"}(c&&c.role)}})})},Ve=new C.a(["owner","admin","editor","viewer"]);var Ye={entryMap:qe,getState:ze,setState:He},Xe=n("rVSK"),Ze=n.n(Xe);function Ke(e){return JSON.parse(h.a.Storage.getItem("".concat(e,"_commentTick"))||"{}")}function Ge(e,t){h.a.Storage.setItem("".concat(e,"_commentTick"),Ze()(t))}function Je(e,t){var n=Ke(e);n[t]=Math.ceil(.001*Date.now()+2),Ge(e,n)}function Qe(e,t,n){0!==n&&(e[t]=(e[t]||0)+n)}var $e=Object(l.createStateStore)({projectCid:null,unreadCommentMap:{},unreadCountThreadMap:{},unreadCountScreenMap:{}}),et=$e.getState,tt=$e.setState,nt=$e.wrapEntry,rt={entryMap:{"unread-comment:init-for-project":nt(function(e,t,n){var r=t.dispatch,a=n.payload,o=a.projectCid,i=a.commentThreadList,c=a.commentList,s=Ke(o),u={},l={};i.forEach(function(e){var t=e.cid,n=e.screen_cid;l[t]=n,u[n]=s[n]});var d={},p={},f={};c.forEach(function(e){var t=e.cid,n=e.thread_cid,r=e.updated_at;(u[l[n]]||0)>=r||(d[t]=!0,Qe(p,n,1))}),i.forEach(function(e){var t=e.cid,n=e.screen_cid;return Qe(f,n,p[t]||0)}),Ge(o,u),function(){for(var e=.001*Date.now()-2592e3,t=[],n=function(n,r){var a=h.a.Storage.key(n);if(!a.endsWith("_commentTick"))return"continue";var o=JSON.parse(h.a.Storage.getItem(a)||"{}"),i=I()(o);i.forEach(function(t){o[t]<=e&&delete o[t]});var c=I()(o);0===c.length?t.push(a):i.length!==c.length&&h.a.Storage.setItem(a,Ze()(o))},r=0,a=h.a.Storage.length;r<a;r++)n(r);t.forEach(function(e){return h.a.Storage.removeItem(e)})}(),r({type:"reducer:unread-comment:update",payload:{projectCid:o,unreadCommentMap:d,unreadCountThreadMap:p,unreadCountScreenMap:f}})}),"unread-comment:set-unread":nt(function(e,t,n){var r=t.dispatch,a=n.payload,o=a.commentCid,i=a.threadCid,c=a.screenCid,s=e.unreadCommentMap,u=e.unreadCountThreadMap,l=e.unreadCountScreenMap;s[o]||(r({type:"reducer:unread-comment:update",payload:A.Operation.objectMerge(e,{unreadCommentMap:A.Operation.objectSet(s,o,!0),unreadCountThreadMap:A.Operation.objectSet(u,i,(u[i]||0)+1),unreadCountScreenMap:A.Operation.objectSet(l,c,(l[c]||0)+1)})}),Je(e.projectCid,c))}),"unread-comment:set-read":nt(function(e,t,n){var r=t.dispatch,a=n.payload.screenCid,o=e.unreadCountScreenMap;r({type:"reducer:unread-comment:update",payload:A.Operation.objectMerge(e,{unreadCountScreenMap:A.Operation.objectDelete(o,a)})}),Je(e.projectCid,a)})},getState:et,setState:tt},at=i()({},Y.entryMap,$.entryMap,ie.entryMap,fe.entryMap,we.entryMap,Me.entryMap,Re.entryMap,Ue.entryMap,Ye.entryMap,rt.entryMap,{"entry:add-mock-collaborator":function(e){var t=e.dispatch,n=Me.getState(),r=fe.getState(),a=Y.getState(),o=new C.a(a.map(function(e){return e.cid})),i=function(e,n){var r="co_MOCK_".concat(e.cid);o.has(r)||(t({type:"collaborators:add-local",payload:{cid:r,role:"owner",user_id:e.owner_id,name:e.owner_name,email:e.owner_email||"email_MOCK_".concat(e.owner_id),avatar:e.owner_avatar,team_cid:n?e.cid:null,project_cid:n?null:e.cid}}),0)};n.forEach(function(e){return i(e,!0)}),r.forEach(function(e){return i(e,!1)})},"entry:current:set":function(e,t){var n=e.dispatch,r=t.payload,a=r.project,o=r.screen,i=Ye.getState(),c=a&&a.cid||i.projectCid,s=o&&o.cid||i.screenCid;n({type:"current:set",payload:{project:a=fe.getState().find(function(e){return e.cid===c}),screen:o=we.getState().find(function(e){return e.cid===s}),userCollaborator:a&&function(e,t){var n=Ue.getState();return n&&Y.getState().find(function(r){return r.user_id===n.id&&(r.project_cid===e||r.team_cid===t)})}(a.cid,a.team_cid)}})},"entry:current:set-screen":function(e,t){var n=e.dispatch,r=t.payload.cid,a=we.getState().find(function(e){return e.cid===r});if(!a)return console.warn("[entry:current:set-screen] non exist screen with cid: ".concat(r));n({type:"entry:current:set",payload:{screen:a}})},"entry:unread-comment:init":function(e,t){var n=e.dispatch,r=Ye.getState(),a=r.userRole,o=r.projectCid;"guest"!==a&&n({type:"unread-comment:init-for-project",payload:{projectCid:o,commentThreadList:ie.getState(),commentList:$.getState()}})},"entry:comment-threads:add":function(e,t){var n=e.getState,r=e.dispatch,a=t.payload,o=a.top,i=a.left,c=a.message,s=a.cancelSelect,u=Ue.getState(),l=Ye.getState().screenCid,d=100/Object(g.c)(n()),p=.001*Date.now(),f=h.a.SpineModel.requestCid("cmth");r({type:c?"comment-threads:add":"comment-threads:add-local",payload:{cid:f,top:Math.round(o*d),left:Math.round(i*d),screen_cid:l,user_id:u.id,created_at:p,updated_at:p}}),c&&r({type:"comments:add",payload:{thread_cid:f,message:c,user_id:u.id,created_at:p,updated_at:p}}),r({type:"container:comment:select",payload:{select:s?null:f}})},"entry:comment-threads:update":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload,o=a.cid,i=a.top,c=a.left,s=void 0===$.getState().find(function(e){return e.thread_cid===o}),u=.001*Date.now(),l=100/Object(g.c)(r());n({type:s?"comment-threads:update-local":"comment-threads:update",payload:{cid:o,top:Math.round(i*l),left:Math.round(c*l),updated_at:u}})},"entry:comment-threads:delete":function(e,t){var n=e.dispatch,r=t.payload.cid;n({type:"comment-threads:delete",payload:{cid:r}}),$.getState().forEach(function(e){return e.thread_cid===r&&n({type:"comments:delete-local",payload:e})})},"entry:comments:add":function(e,t){var n=e.dispatch,r=t.payload,a=r.thread_cid,o=r.message,i=Ue.getState(),c=.001*Date.now();n({type:"comment-threads:save",payload:{cid:a}}),n({type:"comments:add",payload:{thread_cid:a,message:o,user_id:i.id,created_at:c,updated_at:c}}),n({type:"container:comment:select",payload:{select:null}})},"entry:comments:update":function(e,t){var n=e.dispatch,r=t.payload;n({type:"comments:update",payload:{cid:r.cid,message:r.message,updated_at:.001*Date.now()}})},"entry:state:push-data":function(e,t){var n=e.dispatch,r=t.payload,a=r.pushType,o=r.action,i=r.data;switch(a){case"comment-threads":var c=ie.getState().find(function(e){return e.cid===i.cid});"update"!==o||c?"update"===o&&c?n({type:"comment-threads:update-local",payload:i}):"destroy"===o&&c&&(n({type:"comment-threads:delete-local",payload:i}),$.getState().forEach(function(e){return e.thread_cid===i.cid&&n({type:"comments:delete-local",payload:e})})):n({type:"comment-threads:add-local",payload:i});break;case"comments":var s=$.getState().find(function(e){return e.cid===i.cid});"update"!==o||s?"update"===o&&s?n({type:"comments:update-local",payload:i}):"destroy"===o&&s&&n({type:"comments:delete-local",payload:i}):n({type:"comments:add-local",payload:i});var u=Ye.getState().screenCid,l=ie.getState().find(function(e){return e.cid===i.thread_cid});l&&l.screen_cid===u&&n({type:"unread-comment:set-unread",payload:{commentCid:i.cid,threadCid:l.cid,screenCid:u}})}},"entry:projects:delete":function(e,t){var n=e.dispatch,r=t.payload,a=Ue.getState(),o=r.owner_id===a.id||r.canAdmin()&&r.team_cid,i=o?I18N.del_app_title:I18N.exit_app_title,c=[_.a.createElement("p",{key:"1"},_.a.createElement(M.a,{variableMap:{verb:o?"delete":"leave",noun:"app",ugn:_.a.createElement(T.AppName,{name:r.name,withQuote:!0,withQuestionMark:"en"===MBLocale})}})),o&&_.a.createElement("p",{key:"2",className:"desc tertiary",dangerouslySetInnerHTML:{__html:I18N.del_app_desc_more}})];n({type:"container:modal:open",payload:{title:i,desc:c,canCancel:!0,canConfirm:!0,onConfirm:function(){if(o)n({type:"projects:delete",payload:r});else{var e=Y.getState().find(function(e){return e.project_cid===r.cid&&e.user_id===a.id});n({type:"collaborators:delete",payload:e}),n({type:"projects:delete-local",payload:r})}h.a.SpineModel.queueSave()}}})},"entry:teams:delete":function(e,t){var n=e.dispatch,r=t.payload,a=Ue.getState(),o=r.owner_id===a.id;if(o&&r.cprojects().length>0)return n({type:"container:modal:open",payload:{title:I18N.warning,desc:I18N.delete_projects_first,canCancel:!1,canConfirm:!0}});var i=_.a.createElement(M.a,{variableMap:{verb:o?"delete":"leave",noun:"team",ugn:_.a.createElement(T.TeamName,{name:r.name,withQuote:!0,withQuestionMark:"en"===MBLocale})}});n({type:"container:modal:open",payload:{title:o?I18N.del_team_title:I18N.exit_team_title,desc:i,canCancel:!0,canConfirm:!0,onConfirm:function(){if(o)n({type:"teams:delete",payload:r});else{var e=Y.getState().find(function(e){return e.team_cid===r.cid&&e.user_id===a.id});n({type:"collaborators:delete",payload:e}),n({type:"teams:delete-local",payload:r})}}}})}});function ot(e,t){var n=t.getState,r=t.setState,a=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,o=arguments.length>1?arguments[1]:void 0;return o.type!==e?t:(r(o.payload||t),n())}}var it={collaborators:ot("reducer:collaborators:update",Y),comments:ot("reducer:comments:update",$),commentThreads:ot("reducer:comment-threads:update",ie),projects:ot("reducer:projects:update",fe),screens:ot("reducer:screens:update",we),teams:ot("reducer:teams:update",Me),widgets:ot("reducer:widgets:update",Re),user:Object(l.createStateStoreReducer)("reducer:user:update",Ue),current:Object(l.createStateStoreReducer)("reducer:current:update",Ye),unreadComment:Object(l.createStateStoreReducer)("reducer:unread-comment:update",rt)},ct=Object(p.composeWithDevTools)({});t.a=function(e){var t=e.viewMap,n=e.containerReducerMap,r=e.sagaMap,o=e.extendCallback,c=new f.a;if(t)for(var p in t)c.setView(p,t[p]);var h=function(e){var t,n=e.entryMap,r=e.reducerMap,a=e.sagaMap,o=Object(l.createReduxEntry)(),i=o.middleware;(0,o.setEntryMap)(n);var c=[i];a&&(t=Object(d.a)(),c.push(t));var p=Object(u.createStore)(Object(u.combineReducers)(r),ct(u.applyMiddleware.apply(void 0,c)));if(a){var f=function(e){t.run(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,a[e]();case 3:t.next=0;break;case 5:case"end":return t.stop()}},t,this)}))};for(var h in a)f(h)}return{store:p}}({initialState:{model:{},container:{}},entryMap:i()({},at,E,{"entry:webpack-interface:view:call":function(e,t){var n=t.payload;setTimeout(function(){return c.callViewMethod.apply(c,[n.name,n.method].concat(a()(n.args||{})))},0)}}),reducerMap:{model:Object(u.combineReducers)(it),container:Object(u.combineReducers)(n)},sagaMap:r}).store;return c.setStore(h),o&&o(c),c}},"7tbW":function(e,t,n){var r=n("LGYb");e.exports=function(e){return e&&e.length?r(e):[]}},"87hQ":function(e,t){function n(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function c(e){n(i,a,o,c,s,"next",e)}function s(e){n(i,a,o,c,s,"throw",e)}c(void 0)})}}var a=window,o=a.fetch,i=a.FileReader,c=a.URL,s=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",c.createObjectURL(r));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.dataUrlToBlobUrl=s;var u=function(e){return new Promise(function(t){var n=new i;n.addEventListener("load",function(){return t(n.result)},!1),n.readAsDataURL(e)})};t.blobToDataUrl=u;var l={method:"GET",cache:"default",mode:"cors",credentials:"same-origin"};t.setFetchOption=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l=Object.assign({},l,e)};var d={},p={};t.resetFetchCache=function(){d={},p={}},t.fetchTextWithCache=function(e){return d[e]||(d[e]=o(e,l).then(function(e){return e.text()})),d[e]};var f=function(e){return p[e]||(p[e]=o(e,l).then(function(e){return e.blob()})),p[e]};t.fetchBlobWithCache=f;var h=function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,f(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.fetchDataUrlWithCache=h},"8OQS":function(e,t,n){var r=n("iVxW");e.exports=function(e,t){if(null==e)return{};var n,a,o={},i=r(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}},"92lH":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return f});var r=n("Ev6p"),a=n("mbVZ"),o=n("udQi"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c={type:"@@redux-saga/CHANNEL_END"},s=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type};function u(){var e=[];return{subscribe:function(t){return e.push(t),function(){return Object(r.t)(e,t)}},emit:function(t){for(var n=e.slice(),r=0,a=n.length;r<a;r++)n[r](t)}}}var l="invalid buffer passed to channel factory function",d="Saga was provided with an undefined action";function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a.none(),n=arguments[2];arguments.length>2&&Object(r.g)(n,r.n.func,"Invalid match function passed to eventChannel");var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.a.fixed(),t=!1,n=[];function o(){if(t&&n.length)throw Object(r.m)("Cannot have a closed channel with pending takers");if(n.length&&!e.isEmpty())throw Object(r.m)("Cannot have pending takers with non empty buffer")}return Object(r.g)(e,r.n.buffer,l),{take:function(a){o(),Object(r.g)(a,r.n.func,"channel.take's callback must be a function"),t&&e.isEmpty()?a(c):e.isEmpty()?(n.push(a),a.cancel=function(){return Object(r.t)(n,a)}):a(e.take())},put:function(a){if(o(),Object(r.g)(a,r.n.notUndef,d),!t){if(!n.length)return e.put(a);for(var i=0;i<n.length;i++){var c=n[i];if(!c[r.b]||c[r.b](a))return n.splice(i,1),c(a)}}},flush:function(n){o(),Object(r.g)(n,r.n.func,"channel.flush' callback must be a function"),t&&e.isEmpty()?n(c):n(e.flush())},close:function(){if(o(),!t&&(t=!0,n.length)){var e=n;n=[];for(var r=0,a=e.length;r<a;r++)e[r](c)}},get __takers__(){return n},get __closed__(){return t}}}(t),i=function(){o.__closed__||(u&&u(),o.close())},u=e(function(e){s(e)?i():n&&!n(e)||o.put(e)});if(o.__closed__&&u(),!r.n.func(u))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:o.take,flush:o.flush,close:i}}function f(e){var t=p(function(t){return e(function(e){e[r.c]?t(e):Object(o.a)(function(){return t(e)})})});return i({},t,{take:function(e,n){arguments.length>1&&(Object(r.g)(n,r.n.func,"channel.take's matcher argument must be a function"),e[r.b]=n),t.take(e)}})}},"980g":function(e,t,n){e.exports=n("nhzr")},"9DAG":function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("lSNA"),h=n.n(f),m=n("17x9"),v=n.n(m),g=n("q1tI"),y=n.n(g),b=n("MVZn"),w=n.n(b),S=n("eTac"),E=n.n(S),x=n("0k54"),C=n("jybS");var k=function(e){function t(){return a()(this,t),s()(this,l()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.treeData,n=e.top,r=e.left,a=e.isSnapshot,o=t.widget,i=o.v&&Link.find(o.link_cids),c=i?i.cid:"",s=i&&"tap"!==i.gesture?i.gesture:"",u=o.mainState().cid,l="ppanel panel".concat(i?" clickable":""),d=function(e,t,n,r){var a={left:r,width:e.width,height:e.height,zIndex:e.z};if(t){if(e.primary_fixed?(a.position="fixed",e.primary_fixed===Widget.FIXED_TYPE.bottom?a.bottom=e.cs().height-(n+e.height):a.top=n):a.top=n,e.v){var o=e.mainState();a.pointerEvents=e.width<o.width||e.height<o.height?"auto":"",a.opacity=1}else a.pointerEvents="none",a.opacity=0;a.overflow=MB.isPhantom()?"hidden":""}else a.top=e.top,a.left=e.left,a.opacity=e.v?1:.4,a.overflow="hidden";return a}(o,!0,n,r);return y.a.createElement("div",{"data-cid":o.cid,"data-link_cid":c,className:l,id:"panel".concat(o.cid,"p"),style:d},t.children.map(function(e){return y.a.createElement(_,{key:e.cid,panel_cid:o.cid,treeData:e,isActive:e.cid===u,isSnapshot:a})}),y.a.createElement("div",{className:"region gesture ".concat(s)}))}}]),t}(g.PureComponent);h()(k,"propTypes",{treeData:v.a.object,top:v.a.number,left:v.a.number,isSnapshot:v.a.bool});var _=function(e){function t(){return a()(this,t),s()(this,l()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.treeData,n=e.panel_cid,r=e.isActive,a=e.isSnapshot,o=t.widget,i="state".concat(n).concat(o.cid,"p"),c=r?"pstate state active":"pstate state",s=o.bgimage?"url(".concat(o.getRealBgImage(),")"):"",u={backgroundColor:o.bgcolor,width:o.w(),height:o.h(),backgroundImage:s};return y.a.createElement("div",{id:i,className:c,"data-cid":o.cid,style:u},y.a.createElement("div",{className:"pwidgets"},y.a.createElement("div",{className:"pscontainer"},t.children.map(function(e){return y.a.createElement(T,{key:e.cid,treeData:e,offSetX:0,offSetY:0,isSnapshot:a})}))))}}]),t}(g.PureComponent);h()(_,"propTypes",{treeData:v.a.object,panel_cid:v.a.string,isActive:v.a.bool,isSnapshot:v.a.bool});var M=new E.a(["pg","sticky","lr","webpage"]),T=function(e){function t(){return a()(this,t),s()(this,l()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,n=e.treeData,r=e.offSetX,a=e.offSetY,o=e.isSnapshot,i=n.cid,c=n.type,s=n.children,u=n.widget;if(o&&M.has(u.name))return null;var l=Object(x.f)(n),d=l.minX,p=l.minY,f=l.maxX,h=l.maxY,m=p-a,v=d-r;if("group"===c){var g=u.primary_fixed===Widget.FIXED_TYPE.bottom,b=w()({left:v,top:g?"":m,bottom:g?u.cs().height-h:"",width:f-d,height:h-p},function(e,t){var n,r,a;return!MB.isPhantom()&&"none"!=e.ani_name&&e.v&&(r=e.ani_count,e.ani_delay&&"0"!=e.ani_delay&&(n=e.ani_delay),e.ani_duration&&"0"!=e.ani_duration&&(a=e.ani_duration)),{position:e.primary_fixed?"fixed":"absolute",zIndex:e.z,opacity:e.v?e.o/100:0,transform:e.ro?"rotate(".concat(e.ro,"deg)"):"",animationDelay:n,animationDuration:a,animationIterationCount:r}}(u)),S=function(e){var t="group";return!MB.isPhantom()&&"none"!=e.ani_name&&e.v&&(t+=" animated ".concat(e.ani_name)),Link.exists(e.link_cids)&&(t+=" clickable"),e.v||(t+=" invisible"),t}(u),E=Link.exists(u.link_cids)?u.link_cids:"",_=u.v&&Link.find(u.link_cids),T=_&&"tap"!==_.gesture?_.gesture:"";return y.a.createElement("div",{"data-cid":i,"data-link_cid":E,className:S,style:b},s.map(function(e){return y.a.createElement(t,{key:e.cid,treeData:e,offSetX:d,offSetY:p,isSnapshot:o})}),y.a.createElement("div",{className:"region gesture ".concat(T)}))}return"panel"===c?y.a.createElement(k,{treeData:n,top:m,left:v,isSnapshot:o}):y.a.createElement(C.a,{widget:u,postfix:"p",top:m,left:v})}}]),t}(g.PureComponent);h()(T,"propTypes",{treeData:v.a.object,offSetX:v.a.number,offSetY:v.a.number,isSnapshot:v.a.bool}),n.d(t,"a",function(){return O});var O=function(e){function t(){return a()(this,t),s()(this,l()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.widgetTreeData,n=e.isSnapshot;return t.children.map(function(e){return y.a.createElement(T,{key:e.cid,treeData:e,offSetX:0,offSetY:0,isSnapshot:n})})}}]),t}(g.PureComponent);h()(O,"propTypes",{widgetTreeData:v.a.object,isSnapshot:v.a.bool})},"9Nap":function(e,t){e.exports=function(e){return e}},"9NmV":function(e,t){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",a="\\d+",o="[\\u2700-\\u27bf]",i="[a-z\\xdf-\\xf6\\xf8-\\xff]",c="[^\\ud800-\\udfff"+n+a+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",l="[A-Z\\xc0-\\xd6\\xd8-\\xde]",d="(?:"+i+"|"+c+")",p="(?:"+l+"|"+c+")",f="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",h="[\\ufe0e\\ufe0f]?"+f+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",s,u].join("|")+")[\\ufe0e\\ufe0f]?"+f+")*"),m="(?:"+[o,s,u].join("|")+")"+h,v=RegExp([l+"?"+i+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,l,"$"].join("|")+")",p+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,l+d,"$"].join("|")+")",l+"?"+d+"+(?:['’](?:d|ll|m|re|s|t|ve))?",l+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,m].join("|"),"g");e.exports=function(e){return e.match(v)||[]}},"9ggG":function(e,t,n){var r=n("Z0cm"),a=n("/9aa"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}},"9gsH":function(e,t,n){},An9T:function(e,t,n){e.exports={shell:"xQWL5y1StSdX9vRfMCP2i"}},CMye:function(e,t,n){var r=n("GoyQ");e.exports=function(e){return e==e&&!r(e)}},CUi3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayActMap=t.objectActMap=t.ArrayOf=t.ObjectAs=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("JGuq"),o=n("OBS2"),i=a.Operation.objectSet,c=a.Operation.objectDelete,s=a.Operation.objectMerge,u=a.Operation.arraySet,l=a.Operation.arrayDelete,d=a.Operation.arrayInsert,p=a.Operation.arrayPush,f=a.Operation.arrayUnshift,h=a.Operation.arrayPop,m=a.Operation.arrayShift,v=a.Operation.arrayConcat,g=a.Operation.arrayMatchPush,y=a.Operation.arrayMatchDelete,b=a.Operation.arrayMatchMove,w=a.Operation.arrayFindPush,S=a.Operation.arrayFindDelete,E=a.Operation.arrayFindMove,x=a.Operation.arrayFindSet,C={set:function(e,t){var n=t.key,r=t.value;return i(e,n,r)},delete:function(e,t){var n=t.key;return c(e,n)},merge:function(e,t){var n=t.merge;return s(e,n)}},k={set:function(e,t){var n=t.index,r=t.value;return u(e,n,r)},delete:function(e,t){var n=t.index;return l(e,n)},insert:function(e,t){var n=t.index,r=t.value;return d(e,n,r)},push:function(e,t){var n=t.value;return p(e,n)},pop:function(e,t){return h(e)},shift:function(e,t){return m(e)},unshift:function(e,t){var n=t.value;return f(e,n)},concat:function(e,t){var n=t.concat;return v(e,n)},matchPush:function(e,t){var n=t.value;return g(e,n)},matchDelete:function(e,t){var n=t.value;return y(e,n)},matchMove:function(e,t){var n=t.index,r=t.value;return b(e,n,r)},findPush:function(e,t){var n=t.find,r=t.value;return w(e,n,r)},findDelete:function(e,t){var n=t.find;return S(e,n)},findMove:function(e,t){var n=t.find,r=t.index;return E(e,n,r)},findSet:function(e,t){var n=t.find,r=t.value;return x(e,n,r)}};t.ObjectAs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new o.ObjectScheme(e,r({},t),r({},C,n))},t.ArrayOf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new o.ArrayScheme(e,[t],r({},k,n))},t.objectActMap=C,t.arrayActMap=k},Clcl:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p});var r=n("MVZn"),a=n.n(r),o=n("rVSK"),i=n.n(o),c=n("os03"),s=function(){if(MB.user&&MB.user.id){var e=MB.user;return{id:e.id,name:e.name,email:e.email,current_plan:e.current_plan,paid:e.paid,next_billing_on:e.next_billing_on,login_times:e.login_times}}},u=function(e){return Object(c.e)("/api/v2/reports",{timeout:1e4,method:"POST",body:i()(a()({href:window.parent.location.href,userAgent:navigator.userAgent,user:s(),currentProjectCid:MB.currentProject&&MB.currentProject.cid||"",currentScreenCid:MB.currentScreen&&MB.currentScreen.cid||""},e))})},l=function(e){var t=e.timeInterval,n=void 0===t?6e5:t,r=e.type,a=void 0===r?"DEFAULT":r,o=e.getReportObject;if(n&&o){var i=(new Date).toISOString(),c=Date.now();return setInterval(function(){return u({timeInit:i,timeDelta:Date.now()-c,type:a,state:o()}).then(function(){c=Date.now()},function(e){return console.warn("[Error] report ".concat(a," failed:"),e)})},n)}},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0]instanceof Error&&t.shift()||new Error("DEFAULT_ERROR"),a=t.map(function(e){try{return i()(e)}catch(t){return e.toString()}}).join("\n");console.warn("[REPORT_ERROR]",a,r);var o=s();return window.Raven&&window.Raven.isSetup()&&(window.Raven.setUserContext(o),window.Raven.captureException(r,{extra:{message:a},tags:{report_version:"v1",origin:location.origin,user_current_plan:o&&o.current_plan}})),MB.ga&&MB.ga("send","event","report-error",a,r.stack||r.toString()),{error:r,message:a}},p=function(){var e=d.apply(void 0,arguments),t=e.error,n=e.message;console.warn("[NUKE]",n,t),setInterval(function(){window.alert([window.I18N&&I18N.error_happened,n,t].join("\n")),location.reload()},5e3)}},CoAX:function(e,t,n){"use strict";var r=n("WF1K"),a=["fontFamily","fontWeight","fontSize","color","fontStyle","textDecoration","letterSpacing","lineHeight"],o=function e(t,n){if("fontFamily"===n)return t.fontFamily||r.b.fontFamily;if("fontWeight"===n)return t.fontWeight||r.b.fontWeight;if("boldType"===n)return Number(t.boldType)?1:0;if("fontSize"===n)return t.fontSize||r.b.fontSize;if("color"===n)return t.color||r.b.color;if("fontStyle"===n)return t.fontStyle||r.b.fontStyle;if("textDecoration"===n)return t.textDecoration||r.b.textDecoration;if("letterSpacing"===n)return t.letterSpacing||r.b.letterSpacing;if("lineHeight"===n){var a=t.lineHeight;return a&&"normal"!==a?a:Widget.getNormalLineHeight(e(t,"fontFamily"),e(t,"fontSize"))}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2?arguments[2]:void 0,r=t[0],a=t[1],i=e[r].children[a];return o(i,n)},c=function(e,t,n){if(!e)return null;var r={fontFamily:i(e,t,"fontFamily"),fontWeight:i(e,t,"fontWeight"),boldType:i(e,t,"boldType"),fontSize:i(e,t,"fontSize"),color:i(e,t,"color"),fontStyle:i(e,t,"fontStyle"),textDecoration:i(e,t,"textDecoration"),letterSpacing:i(e,t,"letterSpacing"),lineHeight:i(e,t,"lineHeight"),paraSpacing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if("paraSpacing"===(arguments.length>2?arguments[2]:void 0))return e[t[0]].paraSpacing}(e,t,"paraSpacing")};return n?r[n]:r},s=function(e){return"rich_text"===e.name?{width:e.initialWidth(P),height:e.initialHeight(P)}:{width:e.width,height:e.height}},u=n("MVZn"),l=n.n(u),d=n("Kgbp"),p=n.n(d),f=n("FkXu"),h=function(e){return"marginTop"===e?"paraSpacing":e},m=function(e,t,n){var r={};return a.forEach(function(n){var a=function(e,t){var n=h(e),r=t.replace(/'|"/g,"");return["fontSize","lineHeight","letterSpacing","paraSpacing"].includes(n)&&"px"===r.slice(-2)&&(r=Number(r.slice(0,-2))),r}(n,e[n])||t[n];r[n]=a}),r.fontFamily=(r.fontFamily||"").split(",")[0].trim(),r.fontWeight=Object(f.g)(r.fontWeight,t.fontWeight,n),r},v=function(e,t){var n=p()(e.getElementsByTagName("p"));return 0===n.length?[{paraSpacing:t.paraSpacing,children:[l()({},t.child,{text:""})]}]:n.map(function(e,n,r){var a,o=p()(e.getElementsByTagName("span"));return a=0===o.length?[l()({},t.child,{text:""})]:o.map(function(e){return l()({text:e.innerText,boldType:Number(e.dataset.boldtype)?1:0},m(e.style,t.child,Number(e.dataset.boldtype)))}),{paraSpacing:function(e,t){var n=e===t.length-1&&t.length>1?e-1:e;return Number(t[n].style.marginBottom.replace("px",""))}(n,r),children:a}})},g=n("J4zp"),y=n.n(g),b=n("l00i"),w=n.n(b),S=n("6xEa"),E=n.n(S),x=n("Clcl"),C=[["&","&amp;"],["<","&lt;"],[">","&gt;"]],k=C.concat().reverse(),_=function(e){var t=e;return C.forEach(function(e){var n=y()(e,2),r=n[0],a=n[1];return t=t.replace(new RegExp(r,"g"),a)}),t},M=function(e){var t=e;return k.forEach(function(e){var n=y()(e,2),r=n[0],a=n[1];return t=t.replace(new RegExp(a,"g"),r)}),t},T=function(e){return"rich_text"===e.name},O=function(e){if(!T(e))return e;var t=l()({},e,{text:function(e){return E.a.compressToUTF16(e)}(e.text)});try{JSON.parse(j(t).text)}catch(n){Object(x.c)(n,e.cid,e.text,t.text,j(t).text)}return t},j=function(e){return T(e)?l()({},e,{text:function(e){return E.a.decompressFromUTF16(e)}(e.text)}):e},N=n("j+XH"),I=function(e){return w()(e).map(function(e){var t=y()(e,2),n=t[0],r=t[1];return"".concat(function(e){return e.replace(/[A-Z]/g,function(e){return"-".concat(e.toLowerCase())})}(n),":").concat(r,";")}).join(" ")},A=function(e){return{lineHeight:0,marginBottom:e.paraSpacing+"px"}},R=/modao.cc/.test(window.MBServer)?function(e,t){return N.b.includes(e)?"".concat(e,", ").concat(N.a["zh-CN"][t],", sans-serif"):"".concat(e,", sans-serif")}:function(e){return e},L=function(e,t){var n=o(e,"fontFamily"),r=o(e,"fontWeight"),a=o(e,"boldType");return{fontFamily:R(n,t),fontWeight:Object(f.e)(r,a),fontSize:o(e,"fontSize")+"px",color:o(e,"color"),fontStyle:o(e,"fontStyle"),letterSpacing:o(e,"letterSpacing")+"px",lineHeight:o(e,"lineHeight")+"px",textDecoration:o(e,"textDecoration")}},P=function(e,t,n){for(var r=MB.currentProject.device,a="",i=t||{start:[0,0,0],end:[]},c=y()(i.start,3),s=c[0],u=c[1],l=c[2],d=y()(i.end,3),p=d[0],f=d[1],h=d[2],m=[],v=s;;v++){for(var g=e[v],b=[],w=v===s,S=v===p,E=v===s?u:0;;E++){var x=w&&E===u,C=S&&E===f,k=g.children[E],M=k.text.slice(x?l:0,C?h:k.text.length),T=_(M);if(b.push('<span class="'.concat(D,'" data-boldtype="').concat(o(k,"boldType"),'" style="').concat(I(L(k,r)),'">').concat(""===k.text?"<br>":T,"</span>")),n&&(a+=M),E===(C?f:g.children.length-1))break}var O=b.join("");if(m.push('<p style="'.concat(I(A(g)),'">').concat(O,"</p>")),n&&v!==p&&(a+="\n"),v===(S?p:e.length-1))break}var j=m.join("");return n?{text:a,HTML:j}:j},D="--mb--rich-text--",B=function(e){return new RegExp(D).test(e)};n.d(t,"f",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return v}),n.d(t,"e",function(){return P}),n.d(t,"h",function(){return B}),n.d(t,"g",function(){return M}),n.d(t,"a",function(){return O}),n.d(t,"b",function(){return j})},DNkW:function(e,t,n){var r=n("93I4"),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},DR1i:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){(function(r){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(26)).log=function(){return"object"===("undefined"==typeof console?"undefined":a(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var a=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++a)}),e.splice(o,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(25))},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(e){var r,a=n(33),o=n(15),i=n(39),c=n(40),s=n(41);e&&e.ArrayBuffer&&(r=n(43));var u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=u||l;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=a(p),h={type:"error",data:"parser error"},m=n(44);function v(e,t,n){for(var r=new Array(e.length),a=c(e.length,n),o=function(e,n,a){t(n,function(t,n){r[e]=n,a(t,r)})},i=0;i<e.length;i++)o(i,e[i],a)}t.encodePacket=function(n,r,a,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof a&&(o=a,a=null);var i=void 0===n.data?void 0:n.data.buffer||n.data;if(e.ArrayBuffer&&i instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var a=e.data,o=new Uint8Array(a),i=new Uint8Array(1+a.byteLength);i[0]=p[e.type];for(var c=0;c<o.length;c++)i[c+1]=o[c];return r(i.buffer)}(n,r,o);if(m&&i instanceof e.Blob)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(d)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var a=new FileReader;return a.onload=function(){e.data=a.result,t.encodePacket(e,n,!0,r)},a.readAsArrayBuffer(e.data)}(e,n,r);var a=new Uint8Array(1);a[0]=p[e.type];var o=new m([a.buffer,e.data]);return r(o)}(n,r,o);if(i&&i.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(n,o);var c=p[n.type];return void 0!==n.data&&(c+=a?s.encode(String(n.data),{strict:!1}):String(n.data)),o(""+c)},t.encodeBase64Packet=function(n,r){var a,o="b"+t.packets[n.type];if(m&&n.data instanceof e.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(o+e)},i.readAsDataURL(n.data)}try{a=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var c=new Uint8Array(n.data),s=new Array(c.length),u=0;u<c.length;u++)s[u]=c[u];a=String.fromCharCode.apply(null,s)}return o+=e.btoa(a),r(o)},t.decodePacket=function(e,n,r){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=s.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var a=e.charAt(0);return Number(a)==a&&f[a]?e.length>1?{type:f[a],data:e.substring(1)}:{type:f[a]}:h}a=new Uint8Array(e)[0];var o=i(e,1);return m&&"blob"===n&&(o=new m([o])),{type:f[a],data:o}},t.decodeBase64Packet=function(e,t){var n=f[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var a=r.decode(e.substr(1));return"blob"===t&&m&&(a=new m([a])),{type:n,data:a}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var a=o(e);return n&&a?m&&!d?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void v(e,function(e,r){t.encodePacket(e,!!a&&n,!1,function(e){r(null,function(e){return e.length+":"+e}(e))})},function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var a;if("function"==typeof n&&(r=n,n=null),""===e)return r(h,0,1);for(var o,i,c="",s=0,u=e.length;s<u;s++){var l=e.charAt(s);if(":"===l){if(""===c||c!=(o=Number(c)))return r(h,0,1);if(c!=(i=e.substr(s+1,o)).length)return r(h,0,1);if(i.length){if(a=t.decodePacket(i,n,!1),h.type===a.type&&h.data===a.data)return r(h,0,1);if(!1===r(a,s+o,u))return}s+=o,c=""}else c+=l}return""!==c?r(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));v(e,function(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})},function(e,t){var r=t.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),a=new Uint8Array(r),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);n=r.buffer}a[o++]=t?0:1;var c=n.byteLength.toString();for(i=0;i<c.length;i++)a[o++]=parseInt(c[i]);for(a[o++]=255,r=new Uint8Array(n),i=0;i<r.length;i++)a[o++]=r[i]}),n(a.buffer)})},t.encodePayloadAsBlob=function(e,n){v(e,function(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);e=r.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(o.length+1);for(a=0;a<o.length;a++)i[a]=parseInt(o[a]);if(i[o.length]=255,m){var c=new m([t.buffer,i.buffer,e]);n(null,c)}})},function(e,t){return n(new m(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var a=e,o=[];a.byteLength>0;){for(var c=new Uint8Array(a),s=0===c[0],u="",l=1;255!==c[l];l++){if(u.length>310)return r(h,0,1);u+=c[l]}a=i(a,2+u.length),u=parseInt(u);var d=i(a,0,u);if(s)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var p=new Uint8Array(d);for(d="",l=0;l<p.length;l++)d+=String.fromCharCode(p[l])}o.push(d),a=i(a,u)}var f=o.length;o.forEach(function(e,a){r(t.decodePacket(e,n,!0),a,f)})}}).call(this,n(0))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=n(1)("socket.io-parser"),a=n(2),o=n(28),i=n(10),c=n(11);function s(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=s,t.Decoder=d;var u=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var a=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===a)return u;n+=a}return r("encoded %j as %s",e,n),n}function d(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function f(e){return{type:t.ERROR,data:"parser error: "+e}}s.prototype.encode=function(e,n){r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){o.removeBlobs(e,function(e){var n=o.deconstructPacket(e),r=l(n.packet),a=n.buffers;a.unshift(r),t(a)})}(e,n):n([l(e)])},a(d.prototype),d.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,a={type:Number(e.charAt(0))};if(null==t.types[a.type])return f("unknown packet type "+a.type);if(t.BINARY_EVENT===a.type||t.BINARY_ACK===a.type){for(var o="";"-"!==e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");a.attachments=Number(o)}if("/"===e.charAt(n+1))for(a.nsp="";++n;){var c=e.charAt(n);if(","===c)break;if(a.nsp+=c,n===e.length)break}else a.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(a.id="";++n;){var c=e.charAt(n);if(null==c||Number(c)!=c){--n;break}if(a.id+=e.charAt(n),n===e.length)break}a.id=Number(a.id)}if(e.charAt(++n)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n)),l=!1!==u&&(a.type===t.ERROR||i(u));if(!l)return f("invalid payload");a.data=u}return r("decoded %s as %j",e,a),a}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!c(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){(function(t){var r=n(31);e.exports=function(e){var n=e.xdomain,a=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!a&&o)return new XDomainRequest}catch(e){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(this,n(0))},function(e,t,n){var r=n(3),a=n(2);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=o,a(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,a=e.indexOf("["),o=e.indexOf("]");-1!=a&&-1!=o&&(e=e.substring(0,a)+e.substring(a,o).replace(/:/g,";")+e.substring(o,e.length));for(var i=n.exec(e||""),c={},s=14;s--;)c[r[s]]=i[s]||"";return-1!=a&&-1!=o&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.Buffer.isBuffer(e)||r&&(e instanceof t.ArrayBuffer||a(e))};var n="function"==typeof t.Buffer&&"function"==typeof t.Buffer.isBuffer,r="function"==typeof t.ArrayBuffer,a=r&&"function"==typeof t.ArrayBuffer.isView?t.ArrayBuffer.isView:function(e){return e.buffer instanceof t.ArrayBuffer}}).call(this,n(0))},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(29),o=n(19),i=n(2),c=n(6),s=n(20),u=n(21),l=n(1)("socket.io-client:manager"),d=n(18),p=n(49),f=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"===r(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=h,h.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},h.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},i(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=a(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=s(n,"open",function(){r.onopen(),e&&e()}),i=s(n,"error",function(t){if(l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c);var u=setTimeout(function(){l("connect attempt timed out after %d",c),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",c)},c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(i),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",u(this,"ondata"))),this.subs.push(s(e,"ping",u(this,"onping"))),this.subs.push(s(e,"pong",u(this,"onpong"))),this.subs.push(s(e,"error",u(this,"onerror"))),this.subs.push(s(e,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},h.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new o(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&a()}function a(){~d(r.connecting,n)||r.connecting.push(n)}return n},h.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},h.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){(function(e){var r=n(7),a=n(32),o=n(45),i=n(46);t.polling=function(t){var n=!1,i=!1,c=!1!==t.jsonp;if(e.location){var s="https:"===location.protocol,u=location.port;u||(u=s?443:80),n=t.hostname!==location.hostname||u!==t.port,i=t.secure!==s}if(t.xdomain=n,t.xscheme=i,"open"in new r(t)&&!t.forceJSONP)return new a(t);if(!c)throw new Error("JSONP disabled");return new o(t)},t.websocket=i}).call(this,n(0))},function(e,t,n){var r=n(8),a=n(4),o=n(3),i=n(5),c=n(17),s=n(1)("engine.io-client:polling");e.exports=l;var u=null!=new(n(7))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),r.call(this,e)}i(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){s("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(s("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){s("pre-pause polling complete"),--r||n()})),this.writable||(s("we are currently writing - waiting to pause"),r++,this.once("drain",function(){s("pre-pause writing complete"),--r||n()}))}else n()},l.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;s("polling got data %s",e),o.decodePayload(e,this.socket.binaryType,function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){s("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(s("transport open - closing"),t()):(s("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=a.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(38),o=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),c="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!==r(n))return!1;if(a(n)){for(var o=0,s=n.length;o<s;o++)if(e(n[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||i&&n instanceof Blob||c&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&e(n[u]))return!0;return!1}}).call(this,n(34).Buffer)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";var r,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,i={},c=0,s=0;function u(e){var t="";do{t=a[e%o]+t,e=Math.floor(e/o)}while(e>0);return t}function l(){var e=u(+new Date);return e!==r?(c=0,r=e):e+"."+u(c++)}for(;s<o;s++)i[a[s]]=s;l.encode=u,l.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=t*o+i[e.charAt(s)];return t},e.exports=l},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(6),o=n(2),i=n(48),c=n(20),s=n(21),u=n(1)("socket.io-client:socket"),l=n(4),d=n(15);e.exports=h;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;function h(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[c(e,"open",s(this,"onopen")),c(e,"packet",s(this,"onpacket")),c(e,"close",s(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},h.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},h.prototype.emit=function(e){if(p.hasOwnProperty(e))return f.apply(this,arguments),this;var t=i(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:d(t))?a.BINARY_EVENT:a.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},h.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},h.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===r(this.query)?l.encode(this.query):this.query;u("sending connect packet with query %s",e),this.packet({type:a.CONNECT,query:e})}else this.packet({type:a.CONNECT})},h.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},h.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===a.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case a.CONNECT:this.onconnect();break;case a.EVENT:case a.BINARY_EVENT:this.onevent(e);break;case a.ACK:case a.BINARY_ACK:this.onack(e);break;case a.DISCONNECT:this.ondisconnect();break;case a.ERROR:this.emit("error",e.data)}},h.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},h.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=i(arguments);u("sending ack %j",r),t.packet({type:d(r)?a.BINARY_ACK:a.ACK,id:e,data:r})}}},h.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:a.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(e){return this.flags.compress=e,this},h.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(24),o=n(6),i=n(12),c=n(1)("socket.io-client");e.exports=t=u;var s=t.managers={};function u(e,t){"object"===r(e)&&(t=e,e=void 0),t=t||{};var n,o=a(e),u=o.source,l=o.id,d=o.path,p=s[l]&&d in s[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||p?(c("ignoring socket cache for %s",u),n=i(u,t)):(s[l]||(c("new io instance for %s",u),s[l]=i(u,t)),n=s[l]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}t.protocol=o.protocol,t.connect=u,t.Manager=n(12),t.Socket=n(19)},function(e,t,n){"use strict";n.r(t),n.d(t,"createUserSocket",function(){return s});var r=n(22),a=n.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={transports:["websocket"],reconnectionDelay:2e3,reconnectionDelayMax:1e4},s=function(e){var t=e.userId,n=e.socketUrl,r=e.socketPath,s=void 0===r?"/S":r,p=e.extraHeaders,f=a()(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}({},c,{path:s,query:{userId:t,fromURL:d().slice(0,128)},extraHeaders:p}));f.emitAsync=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(function(e){return f.emit.apply(f,t.concat([e]))}).then(function(e){var t=e.error,n=e.result;if(t)throw Object.assign(new Error("object"===("undefined"==typeof value?"undefined":o(value))&&t.message||"DEFAULT_USER_SOCKET_ERROR"),t);return n})};var h=0;return f.getServerTimestamp=function(){return l(u()+h)},f.calibrateTimestampOffsetAsync=function(){var e=u();return f.emitAsync("request:timestamp").then(function(t){var n=u();h=Number(t)-.5*(e+n)})},f},u=function(){return.001*Date.now()},l=function(e){return Math.round(100*e)/100},d=function(){try{return window.location.href}catch(e){return"UNKNOWN"}}},function(e,t,n){(function(t){var r=n(9),a=n(1)("socket.io-client:url");e.exports=function(e,n){var o=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(a("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),a("parse %s",e),o=r(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var i=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+i+":"+o.port,o.href=o.protocol+"://"+i+(n&&n.port===o.port?"":":"+o.port),o}}).call(this,n(0))},function(e,t){var n,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,u=[],l=!1,d=-1;function p(){l&&s&&(l=!1,s.length?u=s.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=c(p);l=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||c(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,a=+new Date,o=a-(n||a);e.diff=o,e.prev=n,e.curr=a,n=a;for(var i=new Array(arguments.length),c=0;c<i.length;c++)i[c]=arguments[c];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var a=t.formatters[r];if("function"==typeof a){var o=i[s];n=a.call(e,o),i.splice(s,1),s--}return n}),t.formatArgs.call(e,i),(r.log||t.log||console.log.bind(console)).apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=a,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function a(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),a=r.length;for(n=0;n<a;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(27),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=1e3,a=6e4,o=36e5,i=24*o;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s=n(e);if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===s&&!1===isNaN(e))return t.long?function(e){return c(e,i,"day")||c(e,o,"hour")||c(e,a,"minute")||c(e,r,"second")||e+" ms"}(e):function(e){return e>=i?Math.round(e/i)+"d":e>=o?Math.round(e/o)+"h":e>=a?Math.round(e/a)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(10),o=n(11),i=Object.prototype.toString,c="function"==typeof e.Blob||"[object BlobConstructor]"===i.call(e.Blob),s="function"==typeof e.File||"[object FileConstructor]"===i.call(e.File);t.deconstructPacket=function(e){var t=[],n=e.data,i=e;return i.data=function e(t,n){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:n.length};return n.push(t),i}if(a(t)){for(var c=new Array(t.length),s=0;s<t.length;s++)c[s]=e(t[s],n);return c}if("object"===r(t)&&!(t instanceof Date)){var c={};for(var u in t)c[u]=e(t[u],n);return c}return t}(n,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(a(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],n);else if("object"===r(t))for(var i in t)t[i]=e(t[i],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,i=e;!function e(u,l,d){if(!u)return u;if(c&&u instanceof Blob||s&&u instanceof File){n++;var p=new FileReader;p.onload=function(){d?d[l]=this.result:i=this.result,--n||t(i)},p.readAsArrayBuffer(u)}else if(a(u))for(var f=0;f<u.length;f++)e(u[f],f,u);else if("object"===r(u)&&!o(u))for(var h in u)e(u[h],h,u)}(i),n||t(i)}}).call(this,n(0))},function(e,t,n){e.exports=n(30),e.exports.parser=n(3)},function(e,t,n){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(13),o=n(2),i=n(1)("engine.io-client:socket"),c=n(18),s=n(3),u=n(9),l=n(4);function d(e,n){if(!(this instanceof d))return new d(e,n);n=n||{},e&&"object"===r(e)&&(n=e,e=null),e?(e=u(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var a="object"===(void 0===t?"undefined":r(t))&&t;a.global===a&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=d,d.priorWebsocketSuccess=!1,o(d.prototype),d.protocol=s.protocol,d.Socket=d,d.Transport=n(8),d.transports=n(13),d.parser=n(3),d.prototype.createTransport=function(e){i('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new a[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},d.prototype.open=function(){var e;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},d.prototype.setTransport=function(e){i("setting transport %s",e.name);var t=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},d.prototype.probe=function(e){i('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function a(){if(r.onlyBinaryUpgrades){var a=!this.supportsBinary&&r.transport.supportsBinary;n=n||a}n||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(a){if(!n)if("pong"===a.type&&"probe"===a.data){if(i('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;d.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"===r.readyState||(i("changing transport and sending upgrade packet"),p(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{i('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,r.emit("upgradeError",o)}}))}function o(){n||(n=!0,p(),t.close(),t=null)}function c(n){var a=new Error("probe error: "+n);a.transport=t.name,o(),i('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",a)}function s(){c("transport closed")}function u(){c("socket closed")}function l(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),o())}function p(){t.removeListener("open",a),t.removeListener("error",c),t.removeListener("close",s),r.removeListener("close",u),r.removeListener("upgrading",l)}d.priorWebsocketSuccess=!1,t.once("open",a),t.once("error",c),t.once("close",s),this.once("close",u),this.once("upgrading",l),t.open()},d.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},d.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},d.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){i("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},d.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},d.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var a={type:e,data:t,options:n};this.emit("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}},d.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),i("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},d.prototype.onError=function(e){i("socket error %j",e),d.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},d.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(i('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},d.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,n(0))},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){(function(t){var r=n(7),a=n(14),o=n(2),i=n(5),c=n(1)("engine.io-client:polling-xhr");function s(){}function u(e){if(a.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,t.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=e.hostname!==t.location.hostname||r!==e.port,this.xs=e.secure!==n}}function l(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function d(){for(var e in l.requests)l.requests.hasOwnProperty(e)&&l.requests[e].abort()}e.exports=u,e.exports.Request=l,i(u,a),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new l(e)},u.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),a=this;r.on("success",t),r.on("error",function(e){a.onError("xhr post error",e)}),this.sendXhr=r},u.prototype.doPoll=function(){c("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},o(l.prototype),l.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new r(e),a=this;try{c("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){a.onLoad()},n.onerror=function(){a.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState)try{var e=n.getResponseHeader("Content-Type");a.supportsBinary&&"application/octet-stream"===e&&(n.responseType="arraybuffer")}catch(e){}4===n.readyState&&(200===n.status||1223===n.status?a.onLoad():setTimeout(function(){a.onError(n.status)},0))},c("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){a.onError(e)},0)}t.document&&(this.index=l.requestsCount++,l.requests[this.index]=this)},l.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},l.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},l.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},l.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=s:this.xhr.onreadystatechange=s,e)try{this.xhr.abort()}catch(e){}t.document&&delete l.requests[this.index],this.xhr=null}},l.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},l.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},l.prototype.abort=function(){this.cleanup()},l.requestsCount=0,l.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",d):t.addEventListener&&t.addEventListener("beforeunload",d,!1))}).call(this,n(0))},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t,n){"use strict";(function(e){var r=n(35),a=n(36),o=n(37);function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=p(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),a=(e=c(e,r)).write(t,n);return a!==r&&(e=e.slice(0,a)),e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|f(t.length);return 0===(e=c(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?c(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=c(e,t<0?0:0|f(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=c(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,a);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,a){var o,i=1,c=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,c/=2,s/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){var l=-1;for(o=n;o<c;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*i}else-1!==l&&(o-=o-l),l=-1}else for(n+s>c&&(n=c-s),o=n;o>=0;o--){for(var d=!0,p=0;p<s;p++)if(u(e,o+p)!==u(t,p)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var i=0;i<r;++i){var c=parseInt(t.substr(2*i,2),16);if(isNaN(c))return i;e[n+i]=c}return i}function b(e,t,n,r){return z(U(t,e.length-n),e,n,r)}function w(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return w(e,t,n,r)}function E(e,t,n,r){return z(W(t),e,n,r)}function x(e,t,n,r){return z(function(e,t){for(var n,r,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o,i,c,s,u=e[a],l=null,d=u>239?4:u>223?3:u>191?2:1;if(a+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[a+1]))&&(s=(31&u)<<6|63&o)>127&&(l=s);break;case 3:o=e[a+1],i=e[a+2],128==(192&o)&&128==(192&i)&&(s=(15&u)<<12|(63&o)<<6|63&i)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:o=e[a+1],i=e[a+2],c=e[a+3],128==(192&o)&&128==(192&i)&&128==(192&c)&&(s=(15&u)<<18|(63&o)<<12|(63&i)<<6|63&c)>65535&&s<1114112&&(l=s)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=d}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return u(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?c(e,t):void 0!==n?"string"==typeof r?c(e,t).fill(n,r):c(e,t).fill(n):c(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return d(null,e)},s.allocUnsafeSlow=function(e){return d(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,a){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var o=a-r,i=n-t,c=Math.min(o,i),u=this.slice(r,a),l=e.slice(t,n),d=0;d<c;++d)if(u[d]!==l[d]){o=u[d],i=l[d];break}return o<i?-1:i<o?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function M(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function O(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=F(e[o]);return a}function j(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,a,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function L(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,o){return o||L(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,o){return o||L(e,0,n,8),a.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var a=t-e;n=new s(a,void 0);for(var o=0;o<a;++o)n[o]=this[o+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},s.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,a=1,o=this[e+--r];r>0&&(a*=256);)o+=this[e+--r]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);I(this,e,t,n,a-1,-a)}var o=0,i=1,c=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===c&&0!==this[t+o-1]&&(c=1),this[t+o]=(e/i>>0)-c&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);I(this,e,t,n,a-1,-a)}var o=n-1,i=1,c=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===c&&0!==this[t+o+1]&&(c=1),this[t+o]=(e/i>>0)-c&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,o=r-n;if(this===e&&n<t&&t<r)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var i=s.isBuffer(e)?e:U(new s(e,r).toString()),c=i.length;for(o=0;o<n-t;++o)this[o+t]=i[o%c]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,a=null,o=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(0))},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=u(e),r=n[0],i=n[1],c=new o(NaN),s=0,l=i>0?r-4:r,d=0;d<l;d+=4)t=a[e.charCodeAt(d)]<<18|a[e.charCodeAt(d+1)]<<12|a[e.charCodeAt(d+2)]<<6|a[e.charCodeAt(d+3)],c[s++]=t>>16&255,c[s++]=t>>8&255,c[s++]=255&t;return 2===i&&(t=a[e.charCodeAt(d)]<<2|a[e.charCodeAt(d+1)]>>4,c[s++]=255&t),1===i&&(t=a[e.charCodeAt(d)]<<10|a[e.charCodeAt(d+1)]<<4|a[e.charCodeAt(d+2)]>>2,c[s++]=t>>8&255,c[s++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,o=[],i=0,c=n-a;i<c;i+=16383)o.push(d(e,i,i+16383>c?c:i+16383));return 1===a?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,s=i.length;c<s;++c)r[c]=i[c],a[i.charCodeAt(c)]=c;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function d(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(l(r));return a.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var o,i,c=8*a-r-1,s=(1<<c)-1,u=s>>1,l=-7,d=n?a-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-l)-1,f>>=-l,l+=c;l>0;o=256*o+e[t+d],d+=p,l-=8);for(i=o&(1<<-l)-1,o>>=-l,l+=r;l>0;i=256*i+e[t+d],d+=p,l-=8);if(0===o)o=1-u;else{if(o===s)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,r),o-=u}return(f?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,c,s,u=8*o-a-1,l=(1<<u)-1,d=l>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-i))<1&&(i--,s*=2),(t+=i+d>=1?p/s:p*Math.pow(2,1-d))*s>=2&&(i++,s/=2),i+d>=l?(c=0,i=l):i+d>=1?(c=(t*s-1)*Math.pow(2,a),i+=d):(c=t*Math.pow(2,d-1)*Math.pow(2,a),i=0));a>=8;e[n+f]=255&c,f+=h,c/=256,a-=8);for(i=i<<a|c,u+=a;u>0;e[n+f]=255&i,f+=h,i/=256,u-=8);e[n+f-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var a=new Uint8Array(e),o=new Uint8Array(n-t),i=t,c=0;i<n;i++,c++)o[c]=a[i];return o.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var a=!1;return r=r||n,o.count=e,0===e?t():o;function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(a=!0,t(e),t=r):0!==o.count||a||t(null,n)}}},function(e,t,n){(function(e,r){var a;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(i){var c="object"==o(t)&&t,s="object"==o(e)&&e&&e.exports==c&&e,u="object"==(void 0===r?"undefined":o(r))&&r;u.global!==u&&u.window!==u||(i=u);var l,d,p,f=String.fromCharCode;function h(e){for(var t,n,r=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function m(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function v(e,t){return f(e>>t&63|128)}function g(e,t){if(0==(4294967168&e))return f(e);var n="";return 0==(4294965248&e)?n=f(e>>6&31|192):0==(4294901760&e)?(m(e,t)||(e=65533),n=f(e>>12&15|224),n+=v(e,6)):0==(4292870144&e)&&(n=f(e>>18&7|240),n+=v(e,12),n+=v(e,6)),n+=f(63&e|128)}function y(){if(p>=d)throw Error("Invalid byte index");var e=255&l[p];if(p++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function b(e){var t,n;if(p>d)throw Error("Invalid byte index");if(p==d)return!1;if(t=255&l[p],p++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|y())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|y()<<6|y())>=2048)return m(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|y()<<12|y()<<6|y())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var w={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=h(e),a=r.length,o=-1,i="";++o<a;)i+=g(r[o],n);return i},decode:function(e,t){var n=!1!==(t=t||{}).strict;l=h(e),d=l.length,p=0;for(var r,a=[];!1!==(r=b(n));)a.push(r);return function(e){for(var t,n=e.length,r=-1,a="";++r<n;)(t=e[r])>65535&&(a+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=f(t);return a}(a)}};if("object"==o(n(16))&&n(16))void 0!==(a=function(){return w}.call(t,n,t,e))&&(e.exports=a);else if(c&&!c.nodeType)if(s)s.exports=w;else{var S={}.hasOwnProperty;for(var E in w)S.call(w,E)&&(c[E]=w[E])}else i.utf8=w}(this)}).call(this,n(42)(e),n(0))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),a=r.length,o="";for(n=0;n<a;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return a%3==2?o=o.substring(0,o.length-1)+"=":a%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,r,a,o,i,c=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(c--,"="===e[e.length-2]&&c--);var l=new ArrayBuffer(c),d=new Uint8Array(l);for(t=0;t<s;t+=4)r=n[e.charCodeAt(t)],a=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],i=n[e.charCodeAt(t+3)],d[u++]=r<<2|a>>4,d[u++]=(15&a)<<4|o>>2,d[u++]=(3&o)<<6|63&i;return l}}()},function(e,t,n){(function(t){var n=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),a=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function i(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var a=new Uint8Array(n.byteLength);a.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=a.buffer}e[t]=r}}}function c(e,t){t=t||{};var r=new n;i(e);for(var a=0;a<e.length;a++)r.append(e[a]);return t.type?r.getBlob(t.type):r.getBlob()}function s(e,t){return i(e),new Blob(e,t||{})}e.exports=r?a?t.Blob:s:o?c:void 0}).call(this,n(0))},function(e,t,n){(function(t){var r=n(14),a=n(5);e.exports=u;var o,i=/\n/g,c=/\\n/g;function s(){}function u(e){r.call(this,e),this.query=this.query||{},o||(t.___eio||(t.___eio=[]),o=t.___eio),this.index=o.length;var n=this;o.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=s)},!1)}a(u,r),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},u.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,a=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=s,a.method="POST",a.setAttribute("accept-charset","utf-8"),o.name="d",a.appendChild(o),document.body.appendChild(a),this.form=a,this.area=o}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(c,"\\\n"),this.area.value=e.replace(i,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&u()}:this.iframe.onload=u}}).call(this,n(0))},function(e,t,n){(function(t){var r,a=n(8),o=n(3),i=n(4),c=n(5),s=n(17),u=n(1)("engine.io-client:websocket"),l=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{r=n(47)}catch(e){}var d=l;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=l&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=r),a.call(this,e)}d||"undefined"!=typeof window||(d=r),e.exports=p,c(p,a),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new d(e,t):new d(e):new d(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,a=0,i=r;a<i;a++)!function(e){o.encodePacket(e,n.supportsBinary,function(a){if(!n.usingBrowserWebSocket){var o={};e.options&&(o.compress=e.options.compress),n.perMessageDeflate&&("string"==typeof a?t.Buffer.byteLength(a):a.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(a):n.ws.send(a,o)}catch(e){u("websocket closed before onclose event")}--r||(n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0))})}(e[a])},p.prototype.onClose=function(){a.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||(e.b64=1),(e=i.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},p.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===p.prototype.name)}}).call(this,n(0))},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])},DdHt:function(e,t,n){"use strict";n.d(t,"f",function(){return p}),n.d(t,"i",function(){return f}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return y}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return w}),n.d(t,"e",function(){return S});var r=n("SA+Z"),a=n.n(r),o=n("Kgbp"),i=n.n(o),c=n("eTac"),s=n.n(c),u=n("cl8F"),l=n("ZXhj"),d=["top","left","width","height"];function p(e){var t=[];return e.forEach(function(e){return e.gid&&!t.includes(e.gid)&&t.push(e.gid)}),t}function f(e){var t=new s.a;return e.forEach(function(e){return e.link_cids&&t.add(e.link_cids)}),i()(t)}function h(e){var t=[];return e.forEach(function(e){var n=e.gid||e.cid;t.includes(n)||t.push(n)}),t}function m(e){return e.map(function(e){return"panel"===e.name?e.display_name||Template.find(e.template_cid).name:e.display_name})}function v(e){var t=e.map(function(e){return e.rect()});return Object(l.a)(t)}function g(e){return!e.some(function(e){return"sticky"===e.name||"pg"===e.name})&&h(e).length>1}function y(e){return e.some(function(e){return"group"===e.name})}function b(e){return h(e).length>2}function w(e){return 0!==e.length&&(1!==e.length||!e[0].locked&&/w|e/.test(e[0].zoomable))}function S(e,t){if(0===e.length)return"";var n=t.split(":"),r=a()(n),o=r[0],i=r.slice(1);if(d.includes(o)&&e.length>1)return v(e)[o];var c=e.find(function(e){return e.inspectables().includes(o)});if(c){var s;if(i.length>0){var l=JSON.parse(S([c],o));s=i.reduce(function(e,t){return e[t]},l)}else s=c[o];return s||0===s?s:function(e,t){var n=e[0];if(n){var r="".concat(n.name,"_").concat(MB.currentProject.device),a=n.name,o=u.a[r]||u.a[a];if(o&&o[t])return o[t]}return u.a[t]||""}(e,o)}}},DqDi:function(e,t,n){"use strict";n.d(t,"c",function(){return O}),n.d(t,"a",function(){return j}),n.d(t,"b",function(){return N});var r=n("PJYZ"),a=n.n(r),o=n("lSNA"),i=n.n(o),c=n("lwsE"),s=n.n(c),u=n("W8MJ"),l=n.n(u),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=n("7W2i"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("M8nv"),E=n.n(S),x=n("i6OX"),C=n("UbMB"),k=n.n(C),_=n("G916"),M=n.n(_),T=k.a.bind(M.a);var O=function(e){function t(){return s()(this,t),p()(this,h()(t).apply(this,arguments))}return v()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.activeIndex,n=e.hideBorder,r=e.className,a=e.children,o=e.onTabChange,i=function(e,t,n){var r=0===e,a=e===t-1;return{transform:"translateX(".concat(100*e,"%)"),borderLeftColor:n&&r?"transparent":"",borderRightColor:n&&a?"transparent":""}}(t,b.Children.count(a),n);return w.a.createElement("ol",{className:T("nav",r)},b.Children.map(a,function(e,n){var r={index:n,active:n===t,BgStyle:0===n?i:null,onClick:o};return w.a.cloneElement(e,r)}))}}]),t}(b.Component);O.propTypes={className:y.a.string,activeIndex:y.a.number,hideBorder:y.a.bool,children:y.a.array,onTabChange:y.a.func},O.defaultProps={hideBorder:!1,activeIndex:0};var j=function(e){function t(e){var n;return s()(this,t),n=p()(this,h()(t).call(this,e)),i()(a()(a()(n)),"handleClick",function(e){var t=n.props,r=t.index,a=t.active,o=t.onClick;a?n.toggleDropDown(e):o(r)}),i()(a()(a()(n)),"toggleDropDown",function(e){e.stopPropagation();var t=n.body.getBoundingClientRect();n.setState({dropDownOpen:!n.state.dropDownOpen,top:t.bottom,left:(t.left+t.right)/2})}),i()(a()(a()(n)),"handleDocClick",function(e){n.state.dropDownOpen&&n.body&&!n.body.contains(e.target)&&n.setState({dropDownOpen:!1})}),i()(a()(a()(n)),"handleClose",function(){n.setState({dropDownOpen:!1})}),n.state={dropDownOpen:!1},n}return v()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,r=t.active,a=t.icon,o=t.label,i=t.title,c=t.BgStyle,s=t.DropDown,u=this.state,l=u.dropDownOpen,d=u.top,p=u.left,f=Boolean(s);return w.a.createElement("li",{ref:function(t){return e.body=t},className:T("nav-item",{active:r}),title:i,onClick:this.handleClick},0===n&&w.a.createElement("div",{className:"background-cube",style:c}),w.a.createElement("div",{className:"nav-icon"},"string"==typeof a?w.a.createElement(x.b,{type:"dora",name:a}):a,f&&w.a.createElement("i",{className:"fa fa-caret-down",type:"dropdown-arrow",onClick:this.toggleDropDown})),o&&w.a.createElement("span",{className:"nav-label"},o),f&&l&&w.a.createElement(s,{top:d,left:p,onClose:this.handleClose}),f&&w.a.createElement(E.a,{onClick:this.handleDocClick}))}}]),t}(b.Component);j.propTypes={index:y.a.number,icon:y.a.oneOfType([y.a.string,y.a.object]),title:y.a.string,label:y.a.string,active:y.a.bool,BgStyle:y.a.object,onClick:y.a.func,DropDown:y.a.func};var N=function(e){var t=e.tabs,n=e.activeIndex,r=e.onChange,a=e.className,o=e.hideBorder,i=e.BgStyle;return w.a.createElement(O,{activeIndex:n,hideBorder:o,onTabChange:r,className:a},t.map(function(e){var t=e.label,n=e.icon;return w.a.createElement(j,{key:t,icon:n,label:t,BgStyle:i})}))};N.propTypes={tabs:y.a.array,activeIndex:y.a.number,onChange:y.a.func,className:y.a.string,hideBorder:y.a.bool,BgStyle:y.a.object}},EDI8:function(e,t,n){e.exports={"zoom-count":"_2nN0xGcLm4nwqxIkoQCnMF"}},Em2t:function(e,t,n){var r=n("bahg"),a=n("quyA"),o=n("0JQy");e.exports=function(e){return a(e)?o(e):r(e)}},Ev6p:function(e,t,n){"use strict";n.d(t,"u",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"o",function(){return f}),n.d(t,"r",function(){return h}),n.d(t,"l",function(){return m}),n.d(t,"g",function(){return v}),n.d(t,"n",function(){return b}),n.d(t,"s",function(){return w}),n.d(t,"t",function(){return S}),n.d(t,"f",function(){return E}),n.d(t,"i",function(){return x}),n.d(t,"j",function(){return C}),n.d(t,"v",function(){return k}),n.d(t,"q",function(){return T}),n.d(t,"p",function(){return O}),n.d(t,"k",function(){return j}),n.d(t,"w",function(){return N}),n.d(t,"m",function(){return I}),n.d(t,"h",function(){return A}),n.d(t,"x",function(){return R});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return"@@redux-saga/"+e},i=o("TASK"),c=o("HELPER"),s=o("MATCH"),u=o("CANCEL_PROMISE"),l=o("SAGA_ACTION"),d=o("SELF_CANCELLATION"),p=function(e){return function(){return e}},f=p(!0),h=function(){},m=function(e){return e};function v(e,t,n){if(!t(e))throw O("error","uncaught at check",n),new Error(n)}var g=Object.prototype.hasOwnProperty;function y(e,t){return b.notUndef(e)&&g.call(e,t)}var b={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!b.array(e)&&"object"===(void 0===e?"undefined":a(e))},promise:function(e){return e&&b.func(e.then)},iterator:function(e){return e&&b.func(e.next)&&b.func(e.throw)},iterable:function(e){return e&&b.func(Symbol)?b.func(e[Symbol.iterator]):b.array(e)},task:function(e){return e&&e[i]},observable:function(e){return e&&b.func(e.subscribe)},buffer:function(e){return e&&b.func(e.isEmpty)&&b.func(e.take)&&b.func(e.put)},pattern:function(e){return e&&(b.string(e)||"symbol"===(void 0===e?"undefined":a(e))||b.func(e)||b.array(e))},channel:function(e){return e&&b.func(e.take)&&b.func(e.close)},helper:function(e){return e&&e[c]},stringableFunc:function(e){return b.func(e)&&y(e,"toString")}},w={assign:function(e,t){for(var n in t)y(t,n)&&(e[n]=t[n])}};function S(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var E={from:function(e){var t=Array(e.length);for(var n in e)y(e,n)&&(t[n]=e[n]);return t}};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},e),n=new Promise(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}function C(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(t)},e)});return r[u]=function(){return clearTimeout(n)},r}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),_=function(e){throw e},M=function(e){return{value:e,done:!0}};function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],a={name:n,next:e,throw:t,return:M};return r&&(a[c]=!0),"undefined"!=typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(n&&n.stack||n)):console[e](t,n)}function j(e,t){return function(){return e.apply(void 0,arguments)}}var N=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},I=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},A=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},R=function(e){return function(t){return e(Object.defineProperty(t,l,{value:!0}))}}},FjbR:function(e,t,n){e.exports=n("h5AQ")},FkXu:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return m}),n.d(t,"h",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return w}),n.d(t,"e",function(){return S}),n.d(t,"g",function(){return E});var r=n("iVxW"),a=n.n(r),o=n("RIqP"),i=n.n(o),c=n("yl0K"),s=c.HOSTED_COMMERCIAL_FANGZHENG_LIST,u=c.HOSTED_COMMON_LIST,l=c.WESTERN_COMMON_LIST,d=i()(s).concat(i()(u),i()(l)),p=function(e){return{label:e.label,value:e.family,limitedDevices:e.limitedDevices}},f=s.map(p),h=u.map(p),m=l.map(p),v={regular:400,light:300,bold:700},g={regular:I18N.rich_text_settings.weight.regular,light:I18N.rich_text_settings.weight.light,bold:I18N.rich_text_settings.weight.bold},y=function(e){var t=d.find(function(t){return t.family===e});return t?t.typeList.map(function(e){return{label:g[e],value:e}}):[]},b=function(e,t){var n=s.find(function(t){return t.family===e});return n?"".concat(n.label,"-").concat(g[t]):"".concat(e,"-").concat(t)},w=function(e){return v[e]?e:a()(v).find(function(t){return String(v[t])===String(e)})||"regular"},S=function(e,t){var n=v[e];return Number(t)?700:n},E=function(e,t,n){var r=w(e);return Number(n)?t:r}},G916:function(e,t,n){e.exports={nav:"xnJdrPjsJoJrp1VupFyUM","nav-item":"_3UspVqDrjxaWG9BSMdj9jf"}},GDhZ:function(e,t,n){var r=n("wF/u"),a=n("mwIZ"),o=n("hgQt"),i=n("9ggG"),c=n("CMye"),s=n("IOzZ"),u=n("9Nap"),l=1,d=2;e.exports=function(e,t){return i(e)&&c(t)?s(u(e),t):function(n){var i=a(n,e);return void 0===i&&i===t?o(n,e):r(t,i,l|d)}}},GEF2:function(e,t,n){e.exports={"preview-panel-wrapper":"_3NbQHmHCb3fdbejXqycbnR","preview-panel":"_972Atke01Y16jEOOPRt5R",expand:"_33UQXp4eOmuoqfuCsfYqsu"}},GNiM:function(e,t,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n("I01J")(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=o},Gbs1:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u});var r=n("MVZn"),a=n.n(r),o=n("J4zp"),i=n.n(o),c=function(e){return!["customize","desktop"].includes(e.model)},s=function(e,t,n){var r,a,o=u(e,t),c="landscape"===n;if("device"===t&&o.bg){var s=c?[o.height,o.width]:[o.width,o.height],l=i()(s,2);r=l[0],a=l[1]}else{var d=c?[e.height,e.width]:[e.width,e.height],p=i()(d,2);r=p[0],a=p[1]}return{width:r,height:a}},u=function(e,t){return l(e,t)||d(e,t)},l=function(e,t){var n=e.device,r=e.model;return["customize","Meizu"].includes(r)||"device"!==t?null:MB.SHELLS[r]||MB.SHELLS[n]?a()({},MB.SHELLS[r]||MB.SHELLS[n]):null},d=function(e,t){var n=e.template,r=e.combo,a=e.device,o=e.model,c=e.width,s=e.height,u="none"===t?0:12,l=c+2*u,d=s+2*u,p=n||r||"customize"===o||"web"===a?[l,d]:[Math.min(l,d),Math.max(l,d)],f=i()(p,2);return{device:"default",top:u,left:u,width:f[0],height:f[1]}}},HDyB:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},HLqo:function(e,t,n){},Hmy9:function(e,t,n){"use strict";var r=n("i8i4"),a=n.n(r),o=function(){return"Notification"in window};n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return p});var i=window,c=i.$,s=i.MB,u=function(e,t){if("new_thread_comment"!==e.event_type||!s.commentModeOn){t.notify({title:I18N.got_message,opts:{body:e.message,icon:"/images/mockingbot-logo80x80.png"},duration:1e4,onClick:function(t,n){t.preventDefault(),n();var r=window;r.focus(),s.notification.markRead(e.id,function(){return s.notification.gotoDataUrl(e.url,r,e.need_reload,e.need_new_win)})},onNotSupport:function(){return l(e)}});var n=c("#header .notifications-dropdown")[0];n&&(a.a.unmountComponentAtNode(n),s.renderNotifications(n))}},l=function(e){c("#notification").addClass("active"),setTimeout(function(){return c("#notification").removeClass("active")},1e4),c("#notification .request_permission_message").hide();var t=c("#notification .message");t.text(e.message),e.url&&(t.off("click"),t.on("click",function(t){t.preventDefault(),s.notification.markRead(e.id,function(){return s.notification.gotoDataUrl(e.url,window,e.need_reload,e.need_new_win)})}))},d=function(e,t){var n=c("#notification");n.find(".message").text(""),n.append(['<span class="request_permission_message">',I18N.notifications.request_permission,"<ul>",'<li><button class="request_permission">'.concat(I18N.notifications.enable_notification,"</button>"),'<li><button class="ask_later">'.concat(I18N.notifications.ask_later,"</button>"),'<li><button class="never_ask">'.concat(I18N.notifications.never_ask_again,"</button>"),"</ul>","</span>"].join("\n"));var r=function(){n.find(".request_permission").remove(),n.removeClass("active"),c("body").removeClass("notification-show")};n.on("click",".icon-times, .ask_later",r),n.on("click",".request_permission",function(){r(),e()}),n.on("click",".never_ask",function(){r(),t()}),c("body").addClass("notification-show")},p=function(){var e=function(e){var t=!1,n=function(){return Notification.requestPermission(function(e){"granted"===e&&(t=!0)})};return{init:function(){if(o())if("granted"===Notification.permission)t=!0;else if("denied"!==Notification.permission){if(MB.localStorageDelegate.getItem("neverAskForNotificationPermission"))return;e(n,function(){return MB.localStorageDelegate.setItem("neverAskForNotificationPermission",!0)})}},requestPermission:n,notify:function(e){var n=e.title,r=e.opts,a=e.duration,i=e.onClick,c=e.onError,s=e.onNotSupport;if(o()&&t){var u=new Notification(n,r);return setTimeout(u.close.bind(u),a||3e3),u.onclick=function(e){return i&&i(e,function(){return u.close()})},u.onerror=c,u}s&&s()}}}(d);return e.init(),e}},I01J:function(e,t){e.exports=function(e){return e}},IB8Z:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r=function(e){var t={};for(var n in e){var r=e[n];t[r.screen_cid]?t[r.screen_cid].push(r):t[r.screen_cid]=[r]}return t},a=function(e,t){return(t[e]||[]).map(function(e){return e.clone()})}},IDhZ:function(e,t,n){"use strict";var r=n("MgzW"),a=n("q1tI");function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,a,o,i,c){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,a,o,i,c],u=0;(e=Error(t.replace(/%s/g,function(){return s[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var i="function"==typeof Symbol&&Symbol.for,c=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,m=i?Symbol.for("react.placeholder"):60113;function v(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"AsyncMode";case s:return"Fragment";case c:return"Portal";case l:return"Profiler";case u:return"StrictMode";case m:return"Placeholder"}if("object"==typeof e){switch(e.$$typeof){case p:return"Context.Consumer";case d:return"Context.Provider";case h:return""!==(e=(e=e.render).displayName||e.name||"")?"ForwardRef("+e+")":"ForwardRef"}if("function"==typeof e.then&&(e=1===e._reactStatus?e._reactResult:null))return v(e)}return null}var g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y=Object.prototype.hasOwnProperty,b={},w={};function S(e){return!!y.call(w,e)||!y.call(b,e)&&(g.test(e)?w[e]=!0:(b[e]=!0,!1))}function E(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function x(e,t,n,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new x(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];C[t]=new x(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new x(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new x(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new x(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new x(e,3,!0,e,null)}),["capture","download"].forEach(function(e){C[e]=new x(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){C[e]=new x(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){C[e]=new x(e,5,!1,e.toLowerCase(),null)});var k=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(k,_);C[t]=new x(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(k,_);C[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(k,_);C[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),C.tabIndex=new x("tabIndex",1,!1,"tabindex",null);var M=/["'&<>]/;function T(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=M.exec(e);if(t){var n,r="",a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}var O={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function j(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var N={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},I=r({menuitem:!0},N),A={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R=["Webkit","ms","Moz","O"];Object.keys(A).forEach(function(e){R.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),A[t]=A[e]})});var L=/([A-Z])/g,P=/^ms-/,D=a.Children.toArray,B={listing:!0,pre:!0,textarea:!0},F=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,U={},W={};var z={};var H=Object.prototype.hasOwnProperty,q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function V(e,t){void 0===e&&o("152",v(t)||"Component")}function Y(e,t){function n(n,a){var i=function(e,t){if(e=e.contextTypes){var n,r={};for(n in e)r[n]=t[n];t=r}else t=z;return t}(a,t),c=[],s=!1,u={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===c)return null},enqueueReplaceState:function(e,t){s=!0,c=[t]},enqueueSetState:function(e,t){if(null===c)return null;c.push(t)}},l=void 0;if(a.prototype&&a.prototype.isReactComponent){if(l=new a(n.props,i,u),"function"==typeof a.getDerivedStateFromProps){var d=a.getDerivedStateFromProps.call(null,n.props,l.state);null!=d&&(l.state=r({},l.state,d))}}else if(null==(l=a(n.props,i,u))||null==l.render)return void V(e=l,a);if(l.props=n.props,l.context=i,l.updater=u,void 0===(u=l.state)&&(l.state=u=null),"function"==typeof l.UNSAFE_componentWillMount||"function"==typeof l.componentWillMount)if("function"==typeof l.componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&l.UNSAFE_componentWillMount(),c.length){u=c;var p=s;if(c=null,s=!1,p&&1===u.length)l.state=u[0];else{d=p?u[0]:l.state;var f=!0;for(p=p?1:0;p<u.length;p++){var h=u[p];null!=(h="function"==typeof h?h.call(l,d,n.props,i):h)&&(f?(f=!1,d=r({},d,h)):r(d,h))}l.state=d}}else c=null;if(V(e=l.render(),a),n=void 0,"function"==typeof l.getChildContext&&"object"==typeof(i=a.childContextTypes))for(var m in n=l.getChildContext())m in i||o("108",v(a)||"Unknown",m);n&&(t=r({},t,n))}for(;a.isValidElement(e);){var i=e,c=i.type;if("function"!=typeof c)break;n(i,c)}return{child:e,context:t}}var X=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");a.isValidElement(t)?t.type!==s?t=[t]:(t=t.props.children,t=a.isValidElement(t)?[t]:D(t)):t=D(t),this.stack=[{type:null,domNamespace:O.html,children:t,childIndex:0,context:z,footer:""}],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}return e.prototype.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=n._currentValue;this.contextStack[t]=n,this.contextValueStack[t]=r,n._currentValue=e.props.value},e.prototype.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t._currentValue=n},e.prototype.read=function(e){if(this.exhausted)return null;for(var t="";t.length<e;){if(0===this.stack.length){this.exhausted=!0;break}var n=this.stack[this.stack.length-1];if(n.childIndex>=n.children.length){var r=n.footer;t+=r,""!==r&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===n.type?this.currentSelectValue=null:null!=n.type&&null!=n.type.type&&n.type.type.$$typeof===d&&this.popProvider(n.type)}else r=n.children[n.childIndex++],t+=this.render(r,n.context,n.domNamespace)}return t},e.prototype.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?T(n):this.previousWasTextNode?"\x3c!-- --\x3e"+T(n):(this.previousWasTextNode=!0,T(n));if(e=(t=Y(e,t)).child,t=t.context,null===e||!1===e)return"";if(!a.isValidElement(e)){if(null!=e&&null!=e.$$typeof){var r=e.$$typeof;r===c&&o("257"),o("258",r.toString())}return e=D(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("string"==typeof(r=e.type))return this.renderDOM(e,t,n);switch(r){case u:case f:case l:case s:return e=D(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("object"==typeof r&&null!==r)switch(r.$$typeof){case h:return e=D(r.render(e.props,e.ref)),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case d:return n={type:e,domNamespace:n,children:r=D(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case p:return r=D(e.props.children(e.type._currentValue)),this.stack.push({type:e,domNamespace:n,children:r,childIndex:0,context:t,footer:""}),""}o("130",null==r?r:typeof r,"")},e.prototype.renderDOM=function(e,t,n){var i=e.type.toLowerCase();n===O.html&&j(i),U.hasOwnProperty(i)||(F.test(i)||o("65",i),U[i]=!0);var c=e.props;if("input"===i)c=r({type:void 0},c,{defaultChecked:void 0,defaultValue:void 0,value:null!=c.value?c.value:c.defaultValue,checked:null!=c.checked?c.checked:c.defaultChecked});else if("textarea"===i){var s=c.value;if(null==s){s=c.defaultValue;var u=c.children;null!=u&&(null!=s&&o("92"),Array.isArray(u)&&(1>=u.length||o("93"),u=u[0]),s=""+u),null==s&&(s="")}c=r({},c,{value:void 0,children:""+s})}else if("select"===i)this.currentSelectValue=null!=c.value?c.value:c.defaultValue,c=r({},c,{value:void 0});else if("option"===i){u=this.currentSelectValue;var l=function(e){if(void 0===e||null===e)return e;var t="";return a.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(c.children);if(null!=u){var d=null!=c.value?c.value+"":l;if(s=!1,Array.isArray(u)){for(var p=0;p<u.length;p++)if(""+u[p]===d){s=!0;break}}else s=""+u===d;c=r({selected:void 0,children:void 0},c,{selected:s,children:l})}}for(w in(s=c)&&(I[i]&&(null!=s.children||null!=s.dangerouslySetInnerHTML)&&o("137",i,""),null!=s.dangerouslySetInnerHTML&&(null!=s.children&&o("60"),"object"==typeof s.dangerouslySetInnerHTML&&"__html"in s.dangerouslySetInnerHTML||o("61")),null!=s.style&&"object"!=typeof s.style&&o("62","")),s=c,u=this.makeStaticMarkup,l=1===this.stack.length,d="<"+e.type,s)if(H.call(s,w)){var f=s[w];if(null!=f){if("style"===w){p=void 0;var h="",m="";for(p in f)if(f.hasOwnProperty(p)){var v=0===p.indexOf("--"),g=f[p];if(null!=g){var y=p;if(W.hasOwnProperty(y))y=W[y];else{var b=y.replace(L,"-$1").toLowerCase().replace(P,"-ms-");y=W[y]=b}h+=m+y+":",m=p,h+=v=null==g||"boolean"==typeof g||""===g?"":v||"number"!=typeof g||0===g||A.hasOwnProperty(m)&&A[m]?(""+g).trim():g+"px",m=";"}}f=h||null}p=null;e:if(v=i,g=s,-1===v.indexOf("-"))v="string"==typeof g.is;else switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":v=!1;break e;default:v=!0}v?q.hasOwnProperty(w)||(p=S(p=w)&&null!=f?p+'="'+T(f)+'"':""):(v=w,p=f,f=C.hasOwnProperty(v)?C[v]:null,(g="style"!==v)&&(g=null!==f?0===f.type:2<v.length&&("o"===v[0]||"O"===v[0])&&("n"===v[1]||"N"===v[1])),g||E(v,p,f,!1)?p="":null!==f?(v=f.attributeName,p=3===(f=f.type)||4===f&&!0===p?v+'=""':v+'="'+T(p)+'"'):p=S(v)?v+'="'+T(p)+'"':""),p&&(d+=" "+p)}}u||l&&(d+=' data-reactroot=""');var w=d;s="",N.hasOwnProperty(i)?w+="/>":(w+=">",s="</"+e.type+">");e:{if(null!=(u=c.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break e}}else if("string"==typeof(u=c.children)||"number"==typeof u){u=T(u);break e}u=null}return null!=u?(c=[],B[i]&&"\n"===u.charAt(0)&&(w+="\n"),w+=u):c=D(c.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?j(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:i,children:c,childIndex:0,context:t,footer:s}),this.previousWasTextNode=!1,w},e}(),Z={renderToString:function(e){return new X(e,!1).read(1/0)},renderToStaticMarkup:function(e){return new X(e,!0).read(1/0)},renderToNodeStream:function(){o("207")},renderToStaticNodeStream:function(){o("208")},version:"16.5.0"},K={default:Z},G=K&&Z||K;e.exports=G.default||G},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},IT1M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JGuq");Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return r.Operation}});var a=n("OBS2");Object.defineProperty(t,"Scheme",{enumerable:!0,get:function(){return a.Scheme}}),Object.defineProperty(t,"ObjectScheme",{enumerable:!0,get:function(){return a.ObjectScheme}}),Object.defineProperty(t,"ArrayScheme",{enumerable:!0,get:function(){return a.ArrayScheme}});var o=n("CUi3");Object.defineProperty(t,"ObjectAs",{enumerable:!0,get:function(){return o.ObjectAs}}),Object.defineProperty(t,"ArrayOf",{enumerable:!0,get:function(){return o.ArrayOf}}),Object.defineProperty(t,"objectActMap",{enumerable:!0,get:function(){return o.objectActMap}}),Object.defineProperty(t,"arrayActMap",{enumerable:!0,get:function(){return o.arrayActMap}})},IV71:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=function(){function e(){a()(this,e),this.store=null,this.viewMap={},this.observerMap={}}return i()(e,[{key:"setStore",value:function(e){this.store=e}},{key:"callObserver",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.observerMap[e]&&(t=this.observerMap)[e].apply(t,[e].concat(r))}},{key:"setObserver",value:function(e,t){this.observerMap[e]=t}},{key:"setView",value:function(e,t){this.viewMap[e]=t}},{key:"callViewMethod",value:function(e,t){for(var n,r=this.viewMap[e],a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];return r&&r[t]?(this.callObserver("view:".concat(e,":").concat(t)),r[t].apply(r,[this.store].concat(o))):(n=console).warn.apply(n,["[WebpackInterface][callViewMethod] missed",e,t].concat(o))}},{key:"init",value:function(){this.callObserver("init"),this.store&&this.store.dispatch({type:"entry:state:init"})}},{key:"clear",value:function(){this.store&&this.store.dispatch({type:"entry:state:clear"}),this.callObserver("clear")}}]),e}();function s(e){var t={containerReducerMap:{},viewMap:{},sagaMap:{},extendCallback:null};return e.forEach(function(e){t.containerReducerMap=u(l,t.containerReducerMap,e.containerReducerMap),t.viewMap=u(l,t.viewMap,e.viewMap),t.extendCallback=u(d,t.extendCallback,e.extendCallback),t.sagaMap=u(l,t.sagaMap,e.sagaMap)}),t}function u(e,t,n){return n?t?e(t,n):n:t}function l(e,t){var n={};function r(e,t){n[e]=t}for(var a in e)r(a,e[a]);for(var o in t)r(o,t[o]);return n}function d(e,t){return function(){return e.apply(void 0,arguments),t.apply(void 0,arguments)}}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s})},J2m7:function(e,t,n){var r=n("XKAG")(n("UfWW"));e.exports=r},JGuq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o={objectSet:function(e,t,n){return e[t]!==n?r({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)):e},objectDelete:function(e,t){if(!(t in e))return e;var n=r({},e);return delete n[t],n},objectMerge:function(e,t){for(var n in t){var a=t[n];if(e[n]!==a)return r({},e,t)}return e},arraySet:function(e,t,n){if(e[t]===n)return e;var r=[].concat(a(e));return r[t]=n,r},arrayDelete:function(e,t){return t>=0&&t<=e.length-1?[].concat(a(e.slice(0,t)),a(e.slice(t+1))):e},arrayInsert:function(e,t,n){return t=Math.min(Math.max(t,0),e.length),[].concat(a(e.slice(0,t)),[n],a(e.slice(t)))},arrayPush:function(e,t){return[].concat(a(e),[t])},arrayUnshift:function(e,t){return[t].concat(a(e))},arrayPop:function(e){if(0===e.length)return e;var t=[].concat(a(e));return t.pop(),t},arrayShift:function(e){if(0===e.length)return e;var t=[].concat(a(e));return t.shift(),t},arrayConcat:function(e,t){return t&&t.length?[].concat(a(e),a(t)):e},arrayMatchPush:function(e,t){return e.includes(t)?e:[].concat(a(e),[t])},arrayMatchDelete:function(e,t){var n=e.indexOf(t);return~n?[].concat(a(e.slice(0,n)),a(e.slice(n+1))):e},arrayMatchMove:function(e,t,n){t=Math.min(Math.max(t,0),e.length-1);var r=e.indexOf(n);return~r&&r!==t?r<t?[].concat(a(e.slice(0,r)),a(e.slice(r+1,t+1)),[n],a(e.slice(t+1))):[].concat(a(e.slice(0,t)),[n],a(e.slice(t,r)),a(e.slice(r+1))):e},arrayFindPush:function(e,t,n){return void 0===e.find(t)?[].concat(a(e),[n]):e},arrayFindDelete:function(e,t){var n=e.findIndex(t);return~n?[].concat(a(e.slice(0,n)),a(e.slice(n+1))):e},arrayFindMove:function(e,t,n){var r=e.findIndex(t),o=e[r];return~r&&r!==n?r<n?[].concat(a(e.slice(0,r)),a(e.slice(r+1,n+1)),[o],a(e.slice(n+1))):[].concat(a(e.slice(0,n)),[o],a(e.slice(n,r)),a(e.slice(r+1))):e},arrayFindSet:function(e,t,n){var r=e.findIndex(t);if(!~r||e[r]===n)return e;var o=[].concat(a(e));return o[r]=n,o}};t.Operation=o},JTWS:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=function(e){var t,n,r,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=e.inspectables(),u={};if(" "!=e.zoomable&&(t=e.w(),n=e.h(),"mtooltip"==e.name&&("top"==e.tt_placement||"bottom"==e.tt_placement?n-=e.arrowSize():t-=e.arrowSize()),e.isFullWidth()||(u.width=t),u.height=n),"mtooltip"==e.name){var l=["top","right","bottom","left"].map(function(t){return t===e.tt_placement?e.arrowSize()+"px":0});u.margin=l.join(" ")}return"pg"==e.name&&c||(u.left=e.l(),e.primary_fixed&&c?(u.position="fixed",e.primary_fixed===Widget.FIXED_TYPE.bottom?u.bottom=e.cs().height-e.b():u.top=e.t()):u.top=e.t()),u.zIndex=e.z,e.tc&&-1!=s.indexOf("tc")&&(u.color=e.tc),e.bg&&-1!=s.indexOf("bg")&&(u.backgroundColor=e.bg),e.bc&&-1!=s.indexOf("bc")&&(u.borderColor=e.bc),-1!=s.indexOf("box_shadow")&&e.box_shadow&&"line"!==e.name&&(u.boxShadow=o(JSON.parse(e.box_shadow))),-1!=s.indexOf("text_shadow")&&e.text_shadow?u.textShadow=i(JSON.parse(e.text_shadow)):e.ts>0&&(u.textShadow="0 0 ".concat(e.ts," ").concat(e.tsc)),-1!=s.indexOf("border_radius")&&e.border_radius&&(u.borderRadius=e.borderRadiusStr()),-1!=s.indexOf("ro")&&e.ro&&(u.transform="rotate(".concat(e.ro,"deg)"),u.WebkitTransform="rotate(".concat(e.ro,"deg)")),e.clip&&-1!=s.indexOf("clip")&&(u.clipPath=e.clip,u.WebkitClipPath=e.clip),-1!=s.indexOf("fs")&&e.fS()>0&&(u.fontSize=e.fS()+"px"),-1!=s.indexOf("padding")&&"mtextarea"!=e.name&&(u.padding=e.paddingS()),-1!=s.indexOf("bs")&&"line"!==e.name&&(u.borderWidth=e.bS()),-1!=s.indexOf("ls")&&"line"!==e.name&&(u.borderStyle=e.lineStyle()),-1!=s.indexOf("ha")&&"label"!==e.name&&(u.textAlign=e.ha),-1!=s.indexOf("lh")&&(u.lineHeight=e.lH()+"px"),u.fontWeight=e.bo?"bold":"normal",u.fontStyle=e.i?"italic":"normal",!MB.isPhantom()&&"none"!==e.ani_name&&c&&(e.ani_delay&&"0"!=e.ani_delay&&(u.animationDelay=e.ani_delay),u.animationIterationCount=e.ani_count,e.ani_duration&&"0"!=e.ani_duration&&(u.animationDuration=e.ani_duration)),r=e.v?-1!=s.indexOf("o")?e.o/100:"":c?0:.4,!e.v&&c&&(a="none"),""!==r&&(u.opacity=r),a&&(u.pointerEvents=a),e.transition&&(u.transition=e.transition),u},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="widget ".concat(e.name);(-1!=e.inspectables().indexOf("ha")&&(n+=" h".concat(e.ha)),-1!=e.inspectables().indexOf("va")&&(n+=" v".concat(e.va)),"normal"!=e.td&&(n+=" td".concat(e.td)),"pg"==e.name&&(n+=" s".concat(e.icon)),"switch"==e.name&&e.checked&&(n+=" checked"),t)&&(Link.find(e.link_cids)&&e.v&&(n+=" clickable"),!MB.isPhantom()&&"none"!=e.ani_name&&e.v&&(n+=" animated "+e.ani_name));return"sticky"==e.name&&(n+=e.l()>160?" rsticky":" lsticky",n+=e.slt<20?" tsticky":e.slt>e.height-20?" bsticky":""),"rich_text"===e.name&&0==e.size_type&&(n+=" auto"),n},o=function(e){return e.reduce(function(e,t){return e+=" ".concat(1===t[0]?"inset ":"").concat(t[1],"px ").concat(t[2],"px ").concat(t[3],"px ").concat(t[4],"px ").concat(t[5])},"")},i=function(e){return e.reduce(function(e,t){return e+=" ".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(t[3])},"")}},Juji:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},KAy6:function(e,t,n){"use strict";e.exports=n("IDhZ")},KKmY:function(e,t,n){},Ku8Y:function(e,t,n){e.exports={"editable-span":"_3kZ6Tt9vKO7jl4aGylRTa6","reply-textarea":"_2MMdtZStiVFrqpPWeqIzKH","btn-sort":"_3U9vAHumYl9Ansn9gzYs05","btn-cancel":"_1whvmqsHCmt8iyBc4KMnAF","btn-sure":"_3cG_7EkzOzZEovmV1UHoBq",container:"_1qDeu3cpB7cYXe6lqzlO5Q",avatarInform:"_11prqogEAAMMYQDJ2WNa86",avatar:"xGJm0OmgYp2ExjB9P_BYP","avatar-slide":"_1C_8aOGkoIAasZipcKGlxM",index:"_6wvUm87_ziDGV5DTBxNih",name:"_1Px7EkIhdlrwi7as8ggVbs"}},Kurm:function(e,t,n){e.exports={"full-screen-actions":"kbJl1VYgaCmw8Z46GFG6z"}},KwMD:function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},KxBF:function(e,t){e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}},L0cU:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("4dyd"),E=n("TSYQ"),x=n.n(E),C=n("6XO9"),k=n("v9Wr"),_="".concat(location.origin,"/snapshot.png"),M=function(e){function t(e){var n;return a()(this,t),n=s()(this,l()(t).call(this,e)),v()(h()(h()(n)),"updateIsVisible",function(){n.setState({isVisible:n.isInBoundingClientRect()})}),v()(h()(h()(n)),"setElementRef",function(e){return n.$elem=e}),v()(h()(h()(n)),"isInBoundingClientRect",function(){var e=n.props.containerRect;if(!e||!n.$elem)return!1;var t=n.$elem.getBoundingClientRect();return t.bottom>e.top&&t.top<e.bottom}),v()(h()(h()(n)),"handleClick",function(e){e.stopPropagation();var t=n.props,r=t.screenCid;(0,t.onActivate)(r)}),n.state={isVisible:!1},n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.props.containerRect&&this.updateIsVisible()}},{key:"componentDidUpdate",value:function(e,t){var n=this.isInBoundingClientRect();if(!e.containerRect&&this.props.isActive&&!n){var r=this.$elem.getBoundingClientRect();this.props.scrollIntoView(r)}this.updateIsVisible()}},{key:"render",value:function(){var e=this.props,t=e.projectToken,n=e.screenCid,r=e.canvasZoom,a=e.version,o=e.screenName,i=e.isActive,c=e.treeProps.renderItem,s=Screen.find(n),u=this.state.isVisible,l="".concat(_,"?access-token=").concat(t,"&screen-cid=").concat(n,"&version=").concat(a);return w.a.createElement("li",{className:x()("thumbnail-item",{active:i}),onClick:this.handleClick},w.a.createElement(C.Tooltip,{arrowed:!1,content:{hover:o},duration:1e3,position:"bottom",type:"block"},w.a.createElement("div",{ref:this.setElementRef,className:"image-wrapper"},c&&c(s),w.a.createElement(k.a,{screenCid:n,version:a,imageUrl:l,canvasZoom:r,isVisible:u}))),w.a.createElement("span",{className:"screen-name"},o))}}]),t}(b.PureComponent);M.propTypes={index:y.a.number,canvasZoom:y.a.number,version:y.a.string,screenCid:y.a.string,screenName:y.a.string,projectToken:y.a.string,containerRect:y.a.object,isActive:y.a.bool,onActivate:y.a.func,scrollIntoView:y.a.func,treeProps:y.a.object},M.defaultProps={treeProps:{}};var T=n("/N2d"),O=n("p7Sh"),j=n.n(O),N=n("UbMB"),I=n.n(N);n.d(t,"a",function(){return R});var A=I.a.bind(j.a),R=function(e){function t(e){var n;return a()(this,t),n=s()(this,l()(t).call(this,e)),v()(h()(h()(n)),"setContainerRef",function(e){return n.$container=e}),v()(h()(h()(n)),"updateContainerRect",function(){return n.setState({containerRect:n.$container.getBoundingClientRect()})}),v()(h()(h()(n)),"handleScroll",function(){return n.updateContainerRect()}),v()(h()(h()(n)),"handleResize",function(){return n.updateContainerRect()}),v()(h()(h()(n)),"handleScrollIntoView",function(e){var t=n.state.containerRect;n.$container.scrollTop+=e.top-t.top}),n.state={containerRect:null},n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.updateContainerRect()}},{key:"render",value:function(){var e=this,t=this.props,n=t.screenList,r=t.projectToken,a=t.activeScreenCid,o=t.className,i=t.screenTimestampMap,c=t.onClickScreenItem,s=t.treeProps,u=this.state.containerRect;return w.a.createElement("div",{ref:this.setContainerRef,className:A("thumbnail-container",o),onScroll:this.handleScroll},w.a.createElement("ol",{className:"thumbnail-list"},0===n.length&&w.a.createElement("div",{className:"not-match"},I18N.preview_panel.not_match),n.map(function(t,n){return w.a.createElement(M,{key:t.cid,index:n,screenCid:t.cid,screenName:t.name,projectToken:r,version:i[t.cid],canvasZoom:Object(T.d)(t.width,t.height),isActive:t.cid===a,containerRect:u,onActivate:c,scrollIntoView:e.handleScrollIntoView,treeProps:s})})),w.a.createElement(S.a,{onResize:this.handleResize}))}}]),t}(b.PureComponent);R.propTypes={className:y.a.string,screenList:y.a.array,projectToken:y.a.string,activeScreenCid:y.a.string,screenTimestampMap:y.a.object,onClickScreenItem:y.a.func,treeProps:y.a.object},R.defaultProps={screenTimestampMap:{}}},LGYb:function(e,t,n){var r=n("1hJj"),a=n("jbM+"),o=n("Xt/L"),i=n("xYSL"),c=n("dQpi"),s=n("rEGp"),u=200;e.exports=function(e,t,n){var l=-1,d=a,p=e.length,f=!0,h=[],m=h;if(n)f=!1,d=o;else if(p>=u){var v=t?null:c(e);if(v)return s(v);f=!1,d=i,m=new r}else m=t?[]:h;e:for(;++l<p;){var g=e[l],y=t?t(g):g;if(g=n||0!==g?g:0,f&&y==y){for(var b=m.length;b--;)if(m[b]===y)continue e;t&&m.push(y),h.push(g)}else d(m,y,n)||(m!==h&&m.push(y),h.push(g))}return h}},Lyer:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n("pVnL"),a=n.n(r),o=n("QILm"),i=n.n(o),c=n("lwsE"),s=n.n(c),u=n("W8MJ"),l=n.n(u),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=n("7W2i"),v=n.n(m),g=n("PJYZ"),y=n.n(g),b=n("lSNA"),w=n.n(b),S=n("17x9"),E=n.n(S),x=n("q1tI"),C=n.n(x),k=n("6XO9"),_=n("rwIS"),M=n.n(_),T=function(e){return MB.localStorageDelegate.setItem("guide_closed_".concat(e),!0)},O=function(e){function t(){var e,n;s()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=p()(this,(e=h()(t)).call.apply(e,[this].concat(a))),w()(y()(y()(n)),"setGuideRef",function(e){return n.guide=e}),w()(y()(y()(n)),"handleCloseGuideManually",function(){T(n.props.id)}),w()(y()(y()(n)),"autoClose",function(){var e=n.props,t=e.duration,r=e.autoClose,a=e.id;e.isOpen&&t&&(n.timer=setTimeout(function(){r(),T(a)},t))}),n}return v()(t,e),l()(t,[{key:"componentDidUpdate",value:function(e){e.isOpen!==this.props.isOpen&&this.autoClose()}},{key:"componentWillUnmout",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.isOpen,r=e.children,o=e.localeKey,c=e.position,s=e.className,u=i()(e,["id","isOpen","children","localeKey","position","className"]);if(function(e){return"true"===MB.localStorageDelegate.getItem("guide_closed_".concat(e))}(t))return r;var l=I18N.guide_base[o||t],d=l.header,p=l.content;return C.a.createElement(k.Guide,a()({ref:this.setGuideRef,isOpen:n,position:c,onClose:this.handleCloseGuideManually,className:"".concat(M.a["guide-button"]," ").concat(s),header:d,guide:C.a.createElement("div",{dangerouslySetInnerHTML:{__html:p}}),X:"right"},u),r)}}]),t}(x.PureComponent);O.propTypes={id:E.a.string.isRequired,isOpen:E.a.bool,duration:E.a.number,localeKey:E.a.string,children:E.a.element,autoClose:E.a.func,className:E.a.string,position:E.a.string},O.defaultProps={gotItText:I18N.guide_base.got_it}},M8nv:function(e,t,n){e.exports=n("eaeY")},NYM8:function(e,t,n){},O7RO:function(e,t,n){var r=n("CMye"),a=n("7GkX");e.exports=function(e){for(var t=a(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,r(i)]}return t}},OBS2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(e,t){return t.forEach(function(n){e.has(n)&&console.error("duplicate name in set",e,t,n),e.add(n)}),e},u=function(e){return function(e,t){return e instanceof Object&&t in e}(e,"toStructJSON")?e.toStructJSON():e},l=function(e,t){return console.error("DEFAULT_REDUCER",e,t),e},d=function(){function e(t,n,r){c(this,e),this.name=t,this.struct=n,this.actMap=r,this.initialState=null,this.acceptNameSet=null,this.actionReducer=null,this.structReducer=null,this.reducer=null}return a(e,[{key:"getActionReducer",value:function(){var e=this.actMap;return function(t,n){var r=n.type,a=n.payload,o=e[r];return o?o(t,a):t}}},{key:"getReducer",value:function(){var e=this.name,t=this.initialState,n=this.acceptNameSet,r=this.actionReducer,a=this.structReducer,o=function(t,n){return void 0!==n.type&&n.name===e?r(t,n):a(t,n)};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments[1];return n.has(a.name)?void 0!==a.batch&&a.name===e?a.batch.reduce(o,r):o(r,a):r}}},{key:"toStructJSON",value:function(){return u(this.struct)}}]),e}(),p=function(e){function t(e,n,r){c(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),i={},u=new Set;u.add(a.name);var l=[];for(var p in a.struct)if(a.struct.hasOwnProperty(p)){var f=a.struct[p],h=f instanceof d;i[p]=h?f.initialState:f,h&&(s(u,f.acceptNameSet),l.push(p))}return a.initialState=i,a.acceptNameSet=u,a.structReducer=t.getStructReducer(l,a.struct),a.actionReducer=a.getActionReducer(),a.reducer=a.getReducer(),a}return i(t,d),a(t,[{key:"toStructJSON",value:function(){return function(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}(this.struct,u)}}],[{key:"getStructReducer",value:function(e,t){return function(n,a){for(var o=!1,i={},c=0;c<e.length;c++){var s=e[c],u=t[s],l=n[s],d=u.reducer(l,a);i[s]=d,o=o||d!==l}return o?r({},n,i):n}}}]),t}(),f=function(e){function t(e,n,r){c(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),i=a.struct[0],s=i instanceof d,u=new Set;return u.add(a.name),a.initialState=[],a.acceptNameSet=u,a.structReducer=s?t.getStructReducer(i):l,a.actionReducer=a.getActionReducer(),a.reducer=a.getReducer(),a}return i(t,d),a(t,[{key:"toStructJSON",value:function(){return this.struct.map(u)}}],[{key:"getStructReducer",value:function(e){return function(n,r){var a=!1,o=null;function i(t,r,i){var c=e.reducer(t,r);t!==c&&(a||(o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))),o[i]=c,a=!0)}if(void 0!==r.index)i(n[r.index],r.payload,r.index);else if(void 0!==r.filter){var c=t.getFilter(r.filter);c&&n.forEach(function(e,t){return c(e,t)&&i(e,r.payload,t)})}return a?o:n}}},{key:"getFilter",value:function(e){switch(e.type){case"key-value":var t=e.key,n=e.value;return function(e,r){return e[t]===n}}return null}}]),t}();t.Scheme=d,t.ObjectScheme=p,t.ArrayScheme=f},OVdA:function(e,t,n){e.exports={"text-wrapper":"uauh7BEsBr6RNi8rM4QkK"}},P3rE:function(e,t,n){},PYuP:function(e,t,n){"use strict";n.d(t,"a",function(){return X});var r=n("o0o1"),a=n.n(r),o=n("yXPU"),i=n.n(o),c=n("cJHP"),s=n.n(c),u=n("pVnL"),l=n.n(u),d=n("Kgbp"),p=n.n(d),f=n("eTac"),h=n.n(f),m=n("MVZn"),v=n.n(m),g=n("lwsE"),y=n.n(g),b=n("W8MJ"),w=n.n(b),S=n("a1gu"),E=n.n(S),x=n("Nsbk"),C=n.n(x),k=n("7W2i"),_=n.n(k),M=n("PJYZ"),T=n.n(M),O=n("lSNA"),j=n.n(O),N=n("q1tI"),I=n.n(N),A=n("17x9"),R=n.n(A),L=n("6XO9"),P=n("wCGR"),D=n("7Qib"),B=n("nLLt"),F=n("XkTy"),U=n("rbsZ"),W=n("zAG7"),z=(n("mnpx"),I18N.open_parenthesis+I18N.pending+I18N.close_parenthesis),H={user:0,owner:1,admin:2,editor:3,viewer:4},q=function(e){var t=e.host,n=e.userRole;return(t.isTeam()&&Object(B.a)("team-collaborator-update","admin",n)?["viewer","editor","admin"]:["viewer","editor"]).map(function(e){return{value:e,label:"".concat(I18N.roles[e]).concat(I18N.colon).concat(I18N.roles[e+"_desc"])}})},V=function(e,t){var n=H[e.user_id===MB.user.id?"user":e.role],r=H[t.user_id===MB.user.id?"user":t.role];return n!==r?n-r:e.name&&t.name?e.name.localeCompare(t.name):!e.name&&t.name?1:e.name&&!t.name?-1:e.email.localeCompare(t.email)},Y=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=E()(this,(e=C()(t)).call.apply(e,[this].concat(a))),j()(T()(T()(n)),"onChangeRole",function(e){n.props.onChangeRole({collaborator:n.props.collaborator,role:e}),n.forceUpdate()}),j()(T()(T()(n)),"onDeleteCollaborator",function(){return n.props.onDeleteCollaborator(n.props.collaborator)}),n}return _()(t,e),w()(t,[{key:"render",value:function(){var e=this.props,t=e.collaborator,n=e.host,r=e.userRole,a=t.avatar,o=t.name,i=t.email,c=t.role,s=q({host:n,userRole:r}),u=function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(B.a)(t.isTeam()&&"team","collaborator-update",n.role,r)}({host:n,collaborator:t,userRole:r});return I.a.createElement("li",{className:"collaborator"},I.a.createElement("div",{className:"user"},I.a.createElement("img",{className:"avatar",src:a}),I.a.createElement("span",{className:"user-name"},o||i),!o&&I.a.createElement("span",{className:"pending"},z)),u?I.a.createElement(L.Select,{unstyled:!0,size:"small",optionList:s,value:c,onChange:this.onChangeRole}):I.a.createElement("span",{className:"role"},I18N.roles[c]),u&&I.a.createElement(L.Button,{type:"text",size:"small",className:"delete",onClick:this.onDeleteCollaborator},I18N.delete))}}]),t}(N.PureComponent);j()(Y,"propTypes",{dispatch:R.a.func,host:R.a.object,userRole:R.a.any,collaborator:R.a.object,onChangeRole:R.a.func,onDeleteCollaborator:R.a.func});var X=function(e){function t(e){var n;y()(this,t),n=E()(this,C()(t).call(this,e)),j()(T()(T()(n)),"errorMsg",function(){var e=n.props.host,t="";if(e&&e.collaborators().length>=e.limitation.collaborators+1){var r=e.limitation.collaborators?"collaborators":"cant_invite",a=e.owner_id==MB.user.id?"user":e.isTeam()?"team":"project",o=e.isTeam()?"renew":"upgrade";t=MB.renewMsg&&MB.renewMsg(r,{role:a,action:o,collaborators:e.limitation.collaborators,plan:e.owner_plan})}return t}),j()(T()(T()(n)),"updateComponent",function(){n.forceUpdate(),MB.webpackInterface&&MB.webpackInterface.refreshAll(),MB.AutoSaver&&MB.AutoSaver.triggerSave()}),j()(T()(T()(n)),"focusOnInput",function(){return setTimeout(function(){var e=document.querySelector('.collaborator-modal input[type="email"]');e&&e.focus()},100)}),j()(T()(T()(n)),"updateEmail",function(e){var t=e.target.value;return n.updatePromptList(t.trim().toLowerCase())}),j()(T()(T()(n)),"updateRole",function(e){return n.setState(function(t){var n=t.formData;return{formData:v()({},n,{role:e})}})}),j()(T()(T()(n)),"updatePromptList",function(e){if(e!==n.state.email){n.promptMapCached||(n.dedupEmailSetCached=new h.a(n.props.host.collaborators().map(function(e){return e.email.toLowerCase()})),n.promptMapCached=Collaborator.all().filter(function(e){var t=e.cid,r=e.user_id,a=e.email;return!(r===MB.user.id||t.startsWith("co_MOCK_c")||t.startsWith("co_MOCK_t")&&!t.startsWith("co_MOCK_te")||n.dedupEmailSetCached.has(a.toLowerCase()))}).reduce(function(e,t){return t.name&&(e[t.name.toLowerCase()]=t),t.email&&(e[t.email.toLowerCase()]=t),e},{}));var t=e&&new RegExp(e,"i"),r=new h.a(n.dedupEmailSetCached),a=new h.a;for(var o in n.promptMapCached){if(a.size>=10)break;var i=n.promptMapCached[o],c=i.email.toLowerCase();t&&!t.test(o)||!c||r.has(c)||(r.add(c),a.add(i))}n.setState(function(t){var n=t.formData;return{formData:v()({},n,{email:e}),isPromptListOpen:!0,promptList:p()(a)}})}}),j()(T()(T()(n)),"showPromptList",function(){return n.updatePromptList(n.state.formData.email)}),j()(T()(T()(n)),"hidePromptList",function(){return setTimeout(function(){n.dedupEmailSetCached=null,n.promptMapCached=null,n.setState({isPromptListOpen:!1})},100)}),j()(T()(T()(n)),"createOnClickPromptListItemHandler",function(e){return function(){return n.setState(function(t){var n=t.formData;return{formData:v()({},n,{email:e}),promptList:[]}})}}),j()(T()(T()(n)),"renderPromptList",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.state.promptList;return e=e||0===t.length,I.a.createElement("ul",l()({className:"prompt-list"},Object(D.f)(e)),t.map(function(e){return I.a.createElement("li",{key:e.email,onMouseDown:n.createOnClickPromptListItemHandler(e.email)},I.a.createElement("img",{className:"avatar",src:e.avatar}),I.a.createElement("span",{className:"user-name"},e.name||e.email),e.name?I.a.createElement("span",{className:"user-email"},e.email):I.a.createElement("span",{className:"pending"},z))}))}),j()(T()(T()(n)),"onInvite",function(){var e=n.props.host,t=n.state.formData,r=t.email,a=t.role,o=e.limitation,i=void 0===o?MB.user.limitation:o,c=e.collaborators(),s=void 0!==c.find(function(e){return e.email===r}),u=r&&W.a.test(r)?r===MB.user.email?I18N.cant_invite_yourself:s?I18N.already_invited:c.length>i.collaborators?n.errorMsg():null:I18N.invalid_email;u?(n.focusOnInput(),n.setState({errorMsg:u,promptPricing:c.length>i.collaborators})):(n.createCollaborator({email:r,role:a}),n.setState({formData:{email:"",role:"viewer"},promptPricing:!0}))}),j()(T()(T()(n)),"createCollaborator",function(e){var t=e.email,r=e.role,a=n.props.host,o=a.isTeam(),i=new Collaborator({email:t,role:r,cid:"co".concat(Math.uuid(10,16)).concat((new Date).valueOf()),avatar:"/images/avatar.png"});s()(i,{team_cid:o&&a.cid,project_cid:!o&&a.cid}),i.lsave(),n.updateComponent()}),j()(T()(T()(n)),"onChangeRole",function(e){var t=e.collaborator,r=e.role,a=n.props,o=a.host,i=a.userRole,c=o.isTeam();!Object(B.a)(c&&"team","collaborator-update",[t.role,r],i)||(s()(t,{role:r}),t.lsave(),n.updateComponent())}),j()(T()(T()(n)),"onDeleteCollaborator",function(){var e=i()(a.a.mark(function e(t){var r,o,i,c,s,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,o=r.host,i=r.userRole,c=r.openAccountConfirmAsync,s=o.isTeam(),!!Object(B.a)(s&&"team","collaborator-delete",t.role,i)){e.next=5;break}return e.abrupt("return");case 5:return u=I.a.createElement(P.a,{variableMap:{verb:"delete",noun:"teamMember",ugn:I.a.createElement(L.User,{name:t.name||t.email,withQuote:!0,withQuestionMark:"en"===MBLocale})}}),e.next=8,(c||F.d)({title:I18N.del_collaborator_title,desc:u});case 8:if(!e.sent){e.next=12;break}t.ldestroy(),n.updateComponent(),n.setState({errorMsg:null});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n.dedupEmailSetCached=null,n.promptMapCached=null;var r=!Object(B.a)(e.host.isTeam()&&"team","collaborator-create","viewer",e.userRole),o=r?I18N.owner_only:n.errorMsg(),c=!r;return n.state={formData:{email:"",role:"viewer"},promptList:[],isPromptListOpen:!1,errorMsg:o,promptPricing:c},n}return _()(t,e),w()(t,[{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.focusOnInput()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,a=t.host,o=t.userRole,i=this.state,c=i.formData,s=i.errorMsg,u=i.isPromptListOpen,l=i.promptPricing,d=q({host:a,userRole:o});return I.a.createElement(L.Modal,{isOpen:n,title:I18N.manage_collaborators,className:"collaborator-modal",onClose:r},function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(B.a)(t.isTeam()&&"team","collaborator-create",n.role,r)}({host:a,userRole:o,collaborator:{role:"viewer"}})&&I.a.createElement("div",{className:"add-via-email"},I.a.createElement("input",{type:"email",placeholder:I18N.email_placeholder,onChange:this.updateEmail,onClick:this.showPromptList,onBlur:this.hidePromptList,value:c.email,autoComplete:"off"}),I.a.createElement(L.Select,{unstyled:!0,size:"small",optionList:d,value:c.role,onChange:this.updateRole}),I.a.createElement(L.Button,{type:"primary",size:"small",isDisabled:!c.email,onClick:this.onInvite},I18N.invite),this.renderPromptList(!u)),s&&I.a.createElement("div",{className:"error-msg ".concat(l?"has-prompt-pricing-btn":"")},I.a.createElement("span",null,s),l&&I.a.createElement("button",{onClick:U.b},I18N.check_pricing)),I.a.createElement("ul",{className:"collaborator-list"},a.collaborators().sort(V).map(function(t){return I.a.createElement(Y,{key:t.email,host:a,userRole:o,collaborator:t,onChangeRole:e.onChangeRole,onDeleteCollaborator:e.onDeleteCollaborator})})))}}]),t}(N.PureComponent);j()(X,"propTypes",{isOpen:R.a.bool,onClose:R.a.func.isRequired,host:R.a.object,userRole:R.a.any,openAccountConfirmAsync:R.a.func})},PqLM:function(e,t,n){"use strict";n.d(t,"h",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return p}),n.d(t,"i",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"g",function(){return m}),n.d(t,"e",function(){return v}),n.d(t,"j",function(){return g});var r=n("rVSK"),a=n.n(r),o=n("J4zp"),i=n.n(o),c=function(e){e.top,e.left;var t=e.width,n=e.height,r=e.bs,a=e.points,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Math.sqrt(t*t+n*n),c=r,u=JSON.parse(a).map(function(e){return e.point}),l=s(t,n,u);return{length:o?Math.round(i):i,angle:o?Math.round(l)%360:l,thickness:c}},s=function(e,t,n){var r=i()(n,2),a=r[0],o=r[1],c=(o[0]-a[0])*e,s=(o[1]-a[1])*t;return u(c,s)},u=function(e,t){var n=l(e,t);return 0===n?0:e>=0?(360+d(Math.asin(t/n)))%360:180-d(Math.asin(t/n))},l=function(e,t){return Math.sqrt(e*e+t*t)},d=function(e){return 180*e/Math.PI},p=function(e){return e/180*Math.PI},f=function(e,t){var n=i()(e,2),r=n[0],a=n[1],o=p(t);return[Math.cos(o)*r+Math.sin(o)*a,-Math.sin(o)*r+Math.cos(o)*a]},h=function(e,t,n,r){var a=i()(e,2),o=a[0],c=a[1],s=i()(t,2),u=s[0],l=s[1],d=r.top,p=r.left,h=r.width,v=r.height,g=r.points,y=JSON.parse(g).map(function(e){return e.point}),b=i()(y,2),w=i()(b[0],2),S=w[0],E=w[1],x=i()(b[1],2),C=x[0],k=x[1],_=[p-u,d-l],M=[_[0]+C*h,_[1]+k*v],T=f([_[0]+S*h,_[1]+E*v],-n),O=f(M,-n),j=[o+T[0],c+T[1]],N=[o+O[0],c+O[1]];return m(j,N)},m=function(e,t){var n=i()(e,2),r=n[0],o=n[1],c=i()(t,2),s=c[0],u=c[1],l=Math.min(o,u),d=Math.min(r,s),p=Math.abs(s-r),f=Math.abs(u-o),h=[[0===p?.5:(r-d)/p,0===f?.5:(o-l)/f],[0===p?.5:(s-d)/p,0===f?.5:(u-l)/f]].map(function(e){return{point:e}});return{top:Math.round(l),left:Math.round(d),width:Math.max(Math.round(p),1),height:Math.max(Math.round(f),1),points:a()(h)}},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=p(t),a=e.top,o=e.left,s=e.width,u=e.height,l=e.points,d=JSON.parse(l).map(function(e){return e.point}),f=i()(d,2),h=i()(f[0],2),v=h[0],g=h[1],y=i()(f[1],2),b=y[0],w=y[1],S=c(e).length,E=[o+s*v,a+u*g],x=[o+s*b,a+u*w],C=[E[0]+(x[0]-E[0])*n,E[1]+(x[1]-E[1])*n],k=[E[0]+S*Math.cos(r),E[1]+S*Math.sin(r)],_=[E[0]+(k[0]-E[0])*n,E[1]+(k[1]-E[1])*n],M=[C[0]-_[0],C[1]-_[1]];return m([E[0]+M[0],E[1]+M[1]],[k[0]+M[0],k[1]+M[1]])},g=function(e){var t=i()(e,2),n=i()(t[0],2),r=n[0],a=n[1],o=i()(t[1],2),c=o[0],s=o[1];return.5===r&&.5===c||.5===a&&.5===s}},QILm:function(e,t,n){var r=n("r9tm"),a=n("8OQS");e.exports=function(e,t){if(null==e)return{};var n,o,i=a(e,t);if(r){var c=r(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},QIyF:function(e,t,n){var r=n("Kz5y");e.exports=function(){return r.Date.now()}},QoRX:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},QqLw:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},"R/W3":function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},RJdT:function(e,t,n){"use strict";var r=n("cJHP"),a=n.n(r),o=n("rVSK"),i=n.n(o),c=["status_bar","keyboard"],s=1,u=2,l=3,d={checker:function(e){return 0===e.primary_fixed&&(!0===e.fixed||c.includes(e.name))},migrator:function(e){var t=e.z,n=0,r=!1;if(c.includes(e.name))t=Widget.MAXZ,"status_bar"===e.name?n=1:"keyboard"===e.name&&(n=2);else if(t=e.z+Widget.MAXZ,e.fixed_type===u)n=1;else if(e.fixed_type===l)n=2;else if(e.fixed_type===s){var a=function(e){var t;if(e.panel_cid){var n=Panel.find(e.panel_cid);t=n&&n.screen_cid}else if(e.widget_cid){var r=Widget.find(e.widget_cid);t=r&&r.screen_cid}else t=e.screen_cid;return Screen.find(t)}(e);if(a)n=e.top>a.height-a.cp().sheight(a.orient())/2?2:1;else r=!0}return{fixed:r,primary_fixed:n,z:t}}},p=[{checker:function(e){var t=""===e.box_shadow,n=e.ds&&"transparent"!==e.sc;return t&&n&&MB.currentProject},migrator:function(e){var t=e.ds,n=MB.hex2rgb(e.sc),r=[0,0,0,t,0,"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",1)")];return MB.currentProject.isAndroid()&&(r[2]=2*t,r[3]=2*t,r[5]="rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(Math.min((23+t)/100,1),")")),{box_shadow:i()([r])}}},{checker:function(e){var t=""===e.text_shadow,n="icon_button"===e.name&&e.ds&&"transparent"!==e.sc||e.ts&&"transparent"!==e.tsc;return t&&n&&MB.currentProject},migrator:function(e){var t=e.ts||e.ds,n=MB.hex2rgb(e.tsc||e.sc),r=[0,0,t,"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",1)")];return MB.currentProject.isAndroid()&&(r[1]=2*t,r[2]=2*t,r[3]="rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(Math.min((23+t)/100,1),")")),{text_shadow:i()([r])}}},{checker:function(e){return""===e.border_radius&&e.br},migrator:function(e){return{border_radius:String(e.br)}}},d],f=[d],h=function(e,t){var n=e.dup();n.restore(t),MB.AutoSaver&&MB.AutoSaver.add({record:n})},m=n("CoAX"),v=n("Clcl");window.MB=window.MB||{},MB.widgetMigrator=function(e){var t={};return p.forEach(function(n){n.checker(e)&&a()(t,n.migrator(e))}),t},MB.panelMigrator=function(e){var t={};return f.forEach(function(n){n.checker(e)&&a()(t,n.migrator(e))}),t},MB.setScreenStateGlobally=function(e,t,n){var r={};for(var a in n.forEach(function(e){r[e]=t[e]}),t.restore(e),r)t[a]=r[a];"default"===t.screenstate_cid?(t.lsave(!1),h(e,t)):t.lsave()},MB.saveWidgetByDefaultState=h,Widget.refreshWidgetAfterDecompress=function(e,t){var n=[];return e.forEach(function(e){var t=Object(m.b)(e);if("rich_text"===e.name)try{JSON.parse(t.text)}catch(n){return Object(v.c)(n,e.cid,e.text,t.text),void new Widget(t).ldestroy()}n.push(t)}),Widget.refresh.call(this,n,t)},Widgetstate.refreshWidgetstateAfterDecompress=function(e,t){var n=[];return e.forEach(function(e){var t=Object(m.b)(e);if("rich_text"===e.name)try{JSON.parse(t.text)}catch(n){return Object(v.c)(n,e.cid,e.text,t.text),void new Widgetstate(t).ldestroy()}n.push(t)}),Widgetstate.refresh.call(this,n,t)}},RNpe:function(e,t,n){var r=n("87hQ");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(e,t){if(s.exec(e))return e;var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),1!==n.length);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(s.exec(t)||[""])[0],r=[];return("/"!==e[0]?i(t.split("/").slice(0,-1)).concat(i(e.split("/"))):[n.slice(0,-1)].concat(i(e.split("/").slice(1)))).forEach(function(e){return".."===e?r.pop():r.push(e)}),r.join("/")};t.getAbsoluteUrl=c;var s=/((https?:)?\/\/)?[-\w@:%._+~#=]{2,256}\.[a-z]{2,63}(:\d{1,5})?\//,u=function(e,t){if(e.startsWith("data:"))return e;if(e.startsWith("blob:"))return(0,r.fetchDataUrlWithCache)(e);t&&(e=c(e,t));var n=l.exec(e);return n&&d[n[1].toLowerCase()]?(0,r.fetchDataUrlWithCache)(e):""};t.convertDataUrl=u;var l=/\.([0-9a-z]{3,5})(?:[?#]|$)/i,d={woff2:"font/woff2",woff:"font/woff",ttf:"font/ttf",otf:"font/otf",svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",ico:"image/x-icon"},p=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,i,c,s,l,d,p,f,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.urlMap,r=void 0===n?{}:n,o=t.fragList,i=void 0===o?[]:o,c=Object.values(r),s=0;case 3:if(!(s<c.length)){e.next=20;break}if(l=c[s],d=l.urlString,p=l.originUrl,!l.isIgnore){e.next=10;break}e.t0=d,e.next=16;break;case 10:return e.next=12,u(d,p);case 12:if(e.t1=e.sent,e.t1){e.next=15;break}e.t1="";case 15:e.t0=e.t1;case 16:l.dataUrl=e.t0;case 17:s++,e.next=3;break;case 20:for(f=0,h=i.length;f<h;f++)"object"===a(m=i[f])&&(i[f]=m.dataUrl);return e.abrupt("return",i);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.convertFragListWithUrlMap=p},RUem:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("6XO9"),s=n("XrEr"),u=n("UbMB"),l=n.n(u),d=n("mfFm"),p=n.n(d),f=l.a.bind(p.a),h=function(e){var t=e.title,n=e.dataValue,r=void 0===n?[]:n,o=e.data,i=void 0===o?[]:o,u=e.text,l=e.color,d=e.className,p=e.colorUnit,h=e.first,m=Object(s.b)(l,"rgba"),v=Object(s.b)(l,p),g=r.length>0,y=4===r.length,b=f("panel","".concat(d),{"panel-bottom-8":!g,"panel-item-text":!!u,"shadow-panel":y});return l?a.a.createElement(j,{title:t,rgbaColor:m,stateColor:v}):a.a.createElement("div",{className:b,"data-value":t},u?a.a.createElement(c.Tooltip,{arrowed:!1,className:"panel-item item-flex-1",content:{click:I18N.preview_panel.copied},duration:1e3},a.a.createElement("pre",{"data-type":"copy","data-placement":"top","data-clipboard-text":u,className:"panel-item-value text-content",dangerouslySetInnerHTML:{__html:u}})):a.a.createElement("div",{className:"".concat(i.length<2?"single-panel-box":"mult-panel-box")},(h?i.slice(0,1):i).map(function(e,t){return a.a.createElement(c.Tooltip,{key:t,arrowed:!1,content:{click:I18N.preview_panel.copied},duration:1e3,className:"panel-item","data-value":r[t]},a.a.createElement("div",{"data-type":"copy","data-clipboard-text":e,className:"panel-item-value"},e))})))};h.propTypes={title:i.a.string,data:i.a.array,dataValue:i.a.array,text:i.a.string,color:i.a.string,colorUnit:i.a.string,first:i.a.bool,className:i.a.string};var m=n("lwsE"),v=n.n(m),g=n("W8MJ"),y=n.n(g),b=n("a1gu"),w=n.n(b),S=n("Nsbk"),E=n.n(S),x=n("7W2i"),C=n.n(x),k=n("PJYZ"),_=n.n(k),M=n("lSNA"),T=n.n(M),O=l.a.bind(p.a),j=function(e){function t(e){var n;return v()(this,t),n=w()(this,E()(t).call(this,e)),T()(_()(_()(n)),"handleClick",function(){n.setState(function(e){return{activeColor:e.colorList[e.index%4],index:e.index+1}})}),n.state={index:0,activeColor:e.stateColor,colorList:"transparent"===e.rgbaColor?Array(4).fill("transparent"):N(e.rgbaColor)||[]},n}return C()(t,e),y()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.stateColor;this.setState(function(e){return{activeColor:t}})}},{key:"render",value:function(){var e=this.state.activeColor,t=this.props,n=t.title,r=t.rgbaColor,o=O("panel","panel-bottom-8");return a.a.createElement("div",{className:o,"data-value":n},a.a.createElement("div",{className:"panel-item panel-item-color item-flex-1"},a.a.createElement(c.Tooltip,{className:"panel-item-value textEllipsis",content:{click:I18N.preview_panel.copied},"data-type":"copy",arrowed:!1,"data-clipboard-text":e},e),a.a.createElement("div",{className:"panel-item-color-block",style:{backgroundColor:r},onClick:this.handleClick})))}}]),t}(r.PureComponent),N=function(e){if(e)return[Object(s.b)(e,"rgba"),Object(s.b)(e,"rgb"),Object(s.b)(e,"argb"),Object(s.b)(e,"hex")]};j.propTypes={rgbaColor:i.a.string.isRequired,stateColor:i.a.string,title:i.a.string};var I=n("/5+U"),A=function(e){var t=e.textStyles,n=void 0===t?[]:t,r=e.hiddSpacing,o=e.ratio,i=e.alignment,c=e.vertical_alignment,u=e.lineHeight,l=e.letterSpacing,d=e.unit,p=e.text,f=(e.o,e.colorUnit),m=e.fontStyle;e.padding;return a.a.createElement(xe,null,I18N.preview_panel.font,(n.length>0&&n.slice(0,1)).map(function(e,t){var n=e.color,r=e.font_size,i=e.location,c=e.font_face,u=e.fontStyle,l=Object(s.e)(n),p=Object(s.b)(l,"rgba"),v=Object(I.a)(r,o,d),g=Object(s.b)(l,f);return a.a.createElement("div",{key:"".concat(r).concat(i).concat(t)},c&&a.a.createElement(h,{title:I18N.preview_panel.type_face,data:[c]}),(u||m)&&a.a.createElement(h,{title:I18N.preview_panel.font_style,data:[u||m]}),p&&a.a.createElement(j,{stateColor:g,title:I18N.preview_panel.color,rgbaColor:p}),v&&a.a.createElement(h,{title:I18N.preview_panel.font_size,data:[v]}))}),i&&a.a.createElement(h,{title:I18N.preview_panel.align,data:[i,c||"auto"],dataValue:[I18N.preview_panel.horizontal_align,I18N.preview_panel.vertical_align]}),void 0!==n[0].paraSpacing?a.a.createElement(h,{title:I18N.preview_panel.graph,data:[n[0].letterSpacing,n[0].lineHeight,n[0].paraSpacing],dataValue:[I18N.letter_spacing,I18N.text_line_height,I18N.para_spacing]}):u&&a.a.createElement(h,{title:I18N.preview_panel.graph,data:[u,l||"auto"],dataValue:[I18N.preview_panel.line_height,I18N.preview_panel.letter_spacing],first:r}),p&&a.a.createElement(h,{text:p,title:I18N.preview_panel.content}))};A.propTypes={textStyles:i.a.array,fontStyle:i.a.string,alignment:i.a.string,vertical_alignment:i.a.string,hiddSpacing:i.a.bool,letterSpacing:i.a.oneOfType([i.a.string,i.a.bool]),lineHeight:i.a.oneOfType([i.a.string,i.a.bool]),paraSpacing:i.a.number,ratio:i.a.number,unit:i.a.string,text:i.a.string,o:i.a.number,padding:i.a.number,colorUnit:i.a.string};var R=function(e){var t=e.adapterLeft,n=e.adapterTop,r=e.adapterWidth,o=e.adapterHeight,i=e.opacity,c=e.radius,s=e.rotate;return a.a.createElement(xe,null,I18N.preview_panel.basic_attribute,t&&a.a.createElement(h,{title:I18N.preview_panel.position,dataValue:[I18N.preview_panel._x,I18N.preview_panel._y],data:[t,n]}),r&&a.a.createElement(h,{title:I18N.preview_panel.size,dataValue:[I18N.preview_panel.width,I18N.preview_panel.height],data:[r,o]}),s&&a.a.createElement(h,{title:I18N.preview_panel.rotation,data:[s]}),c&&a.a.createElement(h,{title:I18N.preview_panel.border_radius,data:[c]}),i&&a.a.createElement(h,{title:I18N.preview_panel.opacity,data:[i]}))};R.propTypes={adapterLeft:i.a.string,adapterHeight:i.a.string,adapterTop:i.a.string,adapterWidth:i.a.string,opacity:i.a.oneOfType([i.a.string,i.a.bool]),rotate:i.a.oneOfType([i.a.string,i.a.bool]),radius:i.a.oneOfType([i.a.string,i.a.number])};var L=n("/MKj"),P=n("i6OX"),D=l.a.bind(p.a),B=function(){return a.a.createElement("div",null,"Error in GlobalAttributes")},F=function(e){function t(){var e,n;v()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=w()(this,(e=E()(t)).call.apply(e,[this].concat(a))),T()(_()(_()(n)),"handleDelColor",function(e){var t=Object(I.c)(Object(s.b)(e,"rgba"));n.props.dispatch({type:"reducer:preview-toolbar:update",payload:{userPickColor:t}}),MB.event("删除了自选颜色","运行页")}),T()(_()(_()(n)),"handleClick",function(e){var t=e.target.dataset.clickReason;t&&MB.event("复制".concat(t),"运行页")}),n}return C()(t,e),y()(t,[{key:"componentDidCatch",value:function(e,t){return console.log(e,t),a.a.createElement(B,null)}},{key:"render",value:function(){var e=this.props,t=e.adapterWidth,n=e.adapterHeight,r=e.screenColor,o=void 0===r?[]:r,i=e.documentColor,c=void 0===i?[]:i,s=e.globalText,u=void 0===s?[]:s,l=e.globalColor,d=void 0===l?[]:l,p=e.userPickColor,f=void 0===p?[]:p,m=e.colorUnit,v=c.concat(d);return a.a.createElement("div",{className:D("global-attributes"),onClick:this.handleClick},a.a.createElement("div",{className:D("container","global-layer")},a.a.createElement(h,{title:I18N.preview_panel.size,dataValue:[I18N.preview_panel.width,I18N.preview_panel.height],data:[t,n]})),a.a.createElement(xe,null,I18N.preview_panel.color_title,a.a.createElement(z,{title:I18N.preview_panel.pick_color,handleDelColor:this.handleDelColor,colorBlockMap:f,colorUnit:m,canDel:!0}),a.a.createElement(W,{title:I18N.preview_panel.screen_color,handleDelColor:this.handleDelColor,colorBlockMap:o,colorUnit:m}),a.a.createElement(W,{title:I18N.preview_panel.sketch_color,handleDelColor:this.handleDelColor,colorBlockMap:v,colorUnit:m,fromSketch:!0})),u.length>0&&a.a.createElement(xe,null,I18N.preview_panel.font_title,a.a.createElement(U,{globalText:u})))}}]),t}(r.PureComponent);F.propTypes={adapterWidth:i.a.string.isRequired,adapterHeight:i.a.string.isRequired,colorUnit:i.a.string.isRequired,screenColor:i.a.array,userPickColor:i.a.array,documentColor:i.a.array,globalText:i.a.array,globalColor:i.a.array,dispatch:i.a.func};var U=function(e){return e.globalText.map(function(e){return a.a.createElement(h,{key:e,className:"global-font",data:[e]})})};U.propTypes={globalText:i.a.array};var W=function(e){var t=e.title,n=e.colorBlockMap,r=e.fromSketch,o=e.handleDelColor,i=e.canDel,c=e.colorUnit,u=e.focusColor;return a.a.createElement("div",null,a.a.createElement("span",{className:"second-title"},t),a.a.createElement("div",{className:"panel-row"},n.length?n.map(function(e,n){var l=H(r,e,"rgba"),d=Object(s.b)(l,c);return a.a.createElement(q,{key:"".concat(n).concat(e),canDel:i,title:t,handleDelColor:o,color:d,rgbaColor:l,colorUnit:c,focusColor:u})}):a.a.createElement(V,null)))};W.propTypes={title:i.a.string.isRequired,colorBlockMap:i.a.array.isRequired,handleDelColor:i.a.func.isRequired,fromSketch:i.a.bool,canDel:i.a.bool,colorUnit:i.a.string,focusColor:i.a.string};var z=Object(L.connect)(function(e){var t=e.container.previewSetting;return{userPickColor:t.userPickColor,focusColor:t.focusColor}})(W),H=function(e,t,n){return Object(s.b)(e?Object(s.e)(t):t,n)},q=function(e){var t=e.color,n=e.rgbaColor,r=e.colorUnit,o=(e.index,e.handleDelColor),i=e.canDel,u=e.title,l=e.focusColor,d=t===Object(s.b)(l,r);return a.a.createElement(c.Dropdown,{shouldOpenOnHover:!0,className:D("color-dropdown",{"is-focus":d}),opener:a.a.createElement(c.Tooltip,{arrowed:!1,"data-type":"copy","data-click-reason":u,"data-clipboard-text":t,className:"row-item color-block",style:{background:n},duration:1e3,content:{click:I18N.preview_panel.copied}}),inflexible:!0,arrowed:!0,menuX:"left",menuY:"top",menu:a.a.createElement(Y,{color:t,rgbaColor:n,canDel:i,handleDelColor:o}),menuClassName:Object(c.trimList)(["palette-dropdown-menu",r])})};q.propTypes={color:i.a.string.isRequired,title:i.a.string,handleDelColor:i.a.func,index:i.a.number,colorUnit:i.a.string,rgbaColor:i.a.string,canDel:i.a.bool,focusColor:i.a.string};var V=function(){return a.a.createElement("div",{className:"forbid-color"},a.a.createElement("div",{className:"transparent"}))},Y=function(e){function t(){var e,n;v()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=w()(this,(e=E()(t)).call.apply(e,[this].concat(a))),T()(_()(_()(n)),"handleClick",function(e){var t=n.props,r=t.rgbaColor;(0,t.handleDelColor)(r)}),n}return C()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.canDel;return a.a.createElement("div",null,a.a.createElement("span",null,t),n&&a.a.createElement(P.b,{type:"dora",name:"trash",className:"trash",onClick:this.handleClick}))}}]),t}(r.PureComponent);Y.propTypes={color:i.a.string.isRequired,rgbaColor:i.a.string,handleDelColor:i.a.func.isRequired,canDel:i.a.bool};var X=n("cJHP"),Z=n.n(X),K=n("J4zp"),G=n.n(K),J=n("l00i"),Q=n.n(J),$=n("qOCw"),ee=function(e){function t(){var e,n;v()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=w()(this,(e=E()(t)).call.apply(e,[this].concat(o))),T()(_()(_()(n)),"renderCode",function(e){return{px:n.renderCss,dp:n.renderAndroidCode,pt:n.renderIos}[Object($.e)(e)]()}),T()(_()(_()(n)),"renderIos",function(){var e=n.props,t=e.code,r=e.language,o=e.text;return a.a.createElement(ne,{code:t,language:r,text:o})}),T()(_()(_()(n)),"renderCss",function(){var e=n.props,t=e.code,r=e.language;return a.a.createElement(te,{language:r,code:t})}),T()(_()(_()(n)),"renderAndroidCode",function(){var e=n.props,t=e.whichAndView,r=e.code,o=e.text;return a.a.createElement(re,{code:r,text:o,whichAndView:t})}),n}return C()(t,e),y()(t,[{key:"render",value:function(){var e=this.props.language;return a.a.createElement(xe,null,a.a.createElement("div",null,e.toUpperCase(),a.a.createElement(he,{text:"#code-content"})),a.a.createElement("div",{className:"code-content",id:"code-content"},this.renderCode(e)))}}]),t}(r.PureComponent);T()(ee,"propTypes",{code:i.a.object,whichAndView:i.a.string,language:i.a.string,text:i.a.string});var te=function(e){var t=e.language,n=e.code,r=ae(t),o=oe(t),i=ce(n);return Q()(i).map(function(e){var t=G()(e,2),n=t[0],i=t[1];return a.a.createElement("div",{key:n},"".concat(n).concat(o).concat(i).concat(r))})};te.propTypes={code:i.a.object.isRequired,language:i.a.string};var ne=function(e){var t=e.code,n=e.text;return ie({code:t,text:n}).map(function(e){return a.a.createElement("div",{key:e},e)})};ne.propTypes={code:i.a.object.isRequired,text:i.a.string};var re=function(e){var t=e.code,n=e.text,r=e.whichAndView;return a.a.createElement("div",null,a.a.createElement("div",{className:"highlight-row"},"<".concat(r)),Q()(t).map(function(e){var t=G()(e,2),n=t[0],r=t[1];return a.a.createElement("div",{key:n},"android:".concat(n,'="').concat(r,'"'))}),n.length>0&&a.a.createElement("div",null,'android:text="'.concat(n,'"')),a.a.createElement("div",{className:"highlight-row"},"/>"))};re.propTypes={code:i.a.object.isRequired,text:i.a.string,whichAndView:i.a.string};var ae=function(e){switch(e){case"stylus":case"sass":return"";default:return";"}},oe=function(e){switch(e){case"stylus":return" ";default:return": "}},ie=function(e){var t=e.code,n=e.text,r=t.width,a=t.height,o=t.x,i=t.y,c=t.fontFamily,s=t.cornerRadius,u=t.fontSize,l=t.opacity,d=t.borderWidth,p=t.borderColor,f=t.alignment,h=t.backgroundColor,m=n?"textLayer":"layer",v=n?"UILabel":"UIView",g=[];return g.push("let ".concat(m," = ").concat(v,"(frame: CGRect(x: ").concat(o,", y:").concat(i,", width: ").concat(r,", height: ").concat(a,"))")),h&&g.push("".concat(m,".backgroundColor = ").concat(h)),l&&g.push("".concat(m,".alpha = ").concat(l)),s&&g.push("layer.layer.cornerRadius = ".concat(s)),d&&g.push("layer.layer.borderWidth = ".concat(d)),p&&g.push("layer.layer.borderColor = ".concat(p,".cgColor")),n&&(g.push('let textContent = "'.concat(n,'"')),g.push('let textString = NSMutableAttributedString(string: textContent, attributes: [\n      NSAttributedStringKey.font: UIFont(name: "'.concat(c,'", size: ').concat(u,")!\n      ])")),g.push("let textRange = NSRange(location:0, length: textString.length)"),g.push("let paragraphStyle = NSMutableParagraphStyle()"),g.push("paragraphStyle.alignment = .".concat(f)),g.push("textString.addAttribute(NSAttributedStringKey.paragraphStyle, value: paragraphStyle, range: textRange)"),g.push("textLayer.attributedText = textString")),g},ce=function(e){if(e["border-color"]&&e["border-width"]){var t={border:"".concat(e["border-width"]," solid ").concat(e["border-color"])};return delete e["border-color"],delete e["border-width"],Z()(e,t)}return e},se=n("sEfC"),ue=n.n(se),le=function(e){function t(){var e,n;v()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=w()(this,(e=E()(t)).call.apply(e,[this].concat(a))),T()(_()(_()(n)),"imageRef",function(e){return n.$image=e}),T()(_()(_()(n)),"handleClick",function(){var e=n.props,t=e.imageSetZip,r=e.name;Object(I.e)({url:t,name:r,type:"zip"})}),T()(_()(_()(n)),"handleOnload",function(){Object(I.b)({image:n.$image,adjust:38}),n.setState({imageLoad:!0})}),T()(_()(_()(n)),"handleError",function(){console.error("image info error")}),T()(_()(_()(n)),"debounceClick",ue()(n.handleClick,500,{leading:!0})),n}return C()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.imageSet,n=e.name,r=t[0].src,o={background:"url(".concat(de,") left top"),backgroundSize:"cover"};return a.a.createElement(xe,null,a.a.createElement("div",{className:"slice-title"},I18N.preview_panel.export,a.a.createElement("span",{onClick:this.debounceClick},I18N.preview_panel.download_single)),a.a.createElement("div",{className:"slice-panel"},a.a.createElement("div",{className:"slice-item-wrap",style:o},a.a.createElement("img",{src:r,alt:n,ref:this.imageRef,onLoad:this.handleOnload,onError:this.handleError})),a.a.createElement("p",{className:"slice-item-name"},n)))}}]),t}(r.PureComponent);T()(le,"propTypes",{imageSetZip:i.a.string,imageSet:i.a.array,name:i.a.string});var de="/images/preview/slice-bg.png",pe=n("sxGJ"),fe=n.n(pe),he=function(e){function t(){var e;return v()(this,t),(e=w()(this,E()(t).call(this))).onClipboardEvent=e.onClipboardEvent.bind(_()(_()(e))),e}return C()(t,e),y()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,r=t.text;this.clipboard=r?new fe.a(this.$copyBtn,{text:function(){return Object(I.o)(document.querySelector(r).innerText)}}):new fe.a(this.$copyBtn,{target:function(){return document.querySelector(n)}}),this.clipboard.on("success",function(t){e.error=!1,window.getSelection().removeAllRanges(),e.onClipboardEvent()}),this.clipboard.on("error",function(t){e.error=!0,e.onClipboardEvent()})}},{key:"componentWillUnmount",value:function(){this.clipboard.destroy()}},{key:"onClipboardEvent",value:function(){MB.event("使用了代码复制","运行页")}},{key:"render",value:function(){var e=this;return a.a.createElement(c.Tooltip,{arrowed:!1,content:{click:I18N.preview_panel.copied},duration:1e3,className:p.a.copyBtn},a.a.createElement("span",{ref:function(t){return e.$copyBtn=t}},I18N.copy))}}]),t}(r.Component);T()(he,"propTypes",{target:i.a.string,text:i.a.string});var me=l.a.bind(p.a),ve=function(e){var t=e.value;return a.a.createElement("div",{className:"".concat(me("container")," ").concat(me("layer-name"))},a.a.createElement(h,{title:I18N.preview_panel.layer_name,data:[t]}))};ve.propTypes={value:i.a.string};var ge=function(e){var t=e.colorUnit,n=e.backgroundColorSort;return a.a.createElement(xe,null,I18N.preview_panel.fills,n.map(function(e,n){var r=e.value,o=e.type,i=void 0===o?"color":o,c=e.opacity,u=e.gradient,l=Object(s.c)(r),d=l&&Object(s.b)(l,t);return"color"===i?a.a.createElement(j,{stateColor:d,rgbaColor:l,title:I18N.preview_panel.color,key:n}):a.a.createElement(ye,{gradient:u,colorUnit:t,opacity:c,key:n})}))};ge.propTypes={backgroundColorSort:i.a.array,colorUnit:i.a.string};var ye=function(e){var t=e.gradient,n=t.color_stops,r=void 0===n?[]:n,o=(t.from,t.to,t.type),i=e.opacity,c=e.colorUnit;return a.a.createElement("div",null,r.length>0&&r.map(function(e,t){var n=e.color;e.position;return a.a.createElement("div",{key:"".concat(n).concat(t)},a.a.createElement(h,{colorUnit:c,color:Object(s.c)(n),title:0==t?I18N.preview_panel.gradient:""}))}),i&&a.a.createElement(h,{title:I18N.preview_panel.opacity,data:["".concat(100*i,"%")]}),o&&a.a.createElement(h,{data:[o],title:I18N.preview_panel.type}))};ye.propTypes={gradient:i.a.object.isRequired,opacity:i.a.number,colorUnit:i.a.string.isRequired};var be=function(e){var t=e.shadows,n=void 0===t?[]:t,r=e.isInnerShaow,o=void 0!==r&&r,i=e.unit,c=e.ratio,s=e.colorUnit,u=e.textShadows,l=void 0===u?[]:u;return a.a.createElement(xe,null,o?I18N.preview_panel.inner_shadow:I18N.preview_panel.shadow,n.length>0&&a.a.createElement(we,{shadows:n,unit:i,ratio:c,colorUnit:s}),l.length>0&&a.a.createElement(we,{shadows:l,unit:i,ratio:c,colorUnit:s}))};be.propTypes={shadows:i.a.array,textShadows:i.a.array,isInnerShaow:i.a.bool,unit:i.a.string.isRequired,ratio:i.a.number.isRequired,colorUnit:i.a.string.isRequired};var we=function(e){var t=e.shadows,n=e.unit,r=e.ratio,o=e.colorUnit;return t.map(function(e,t){var i=e.color,c=e.offset_x,u=void 0===c?0:c,l=e.offset_y,d=void 0===l?0:l,p=e.blur_radius,f=void 0===p?0:p,m=e.spread,v=void 0===m?0:m,g=Object(I.a)(u,r,n),y=Object(I.a)(d,r,n),b=Object(I.a)(f,r,n),w=Object(I.a)(v,r,n);return a.a.createElement("div",{className:"shadow-item-gap",key:t},i&&a.a.createElement(h,{title:I18N.preview_panel.color,color:Object(s.c)(i),colorUnit:o}),a.a.createElement(h,{data:[g,y,b,w],dataValue:[I18N.preview_panel._x,I18N.preview_panel._y,I18N.preview_panel.blur,I18N.preview_panel.spread]}))})};we.propTypes={shadows:i.a.array,unit:i.a.string,ratio:i.a.number,colorUnit:i.a.string};var Se=function(e){var t=e.colorUnit,n=e.borderSort,r=e.unit,o=e.ratio,i=e.isStroke;return a.a.createElement(xe,null,i?I18N.preview_panel.stroke:I18N.preview_panel.borders,n.reverse().map(function(e,n){var i=e.position,c=void 0===i?"inside":i,u=e.color,l=e.thickness,d=e.gradient,p=u&&Object(s.c)(u),f=l&&Object(I.a)(l,o,r);return[u?a.a.createElement(h,{key:"".concat(n).concat(p),color:p,title:I18N.preview_panel.color,colorUnit:t}):a.a.createElement(ye,{gradient:d,colorUnit:t}),c&&a.a.createElement(h,{key:"".concat(n).concat(c),title:I18N.preview_panel.position,data:[c]}),f&&a.a.createElement(h,{key:"".concat(n).concat(f),title:I18N.preview_panel.thickness,data:[f]})]}))};Se.propTypes={isStroke:i.a.bool,borderSort:i.a.array.isRequired,colorUnit:i.a.string.isRequired,unit:i.a.string.isRequired,ratio:i.a.number.isRequired};var Ee=function(){return a.a.createElement("div",{className:me("layer-load")},a.a.createElement("span",{className:me("spinner")}))},xe=function(e){var t=e.children;return a.a.createElement("section",null,a.a.createElement("div",{className:me("header")},t[0]),a.a.createElement("div",{className:me("container")},t.slice(1)))};xe.propTypes={children:i.a.array},n.d(t,"a",function(){return h}),n.d(t,"e",function(){return j}),n.d(t,"m",function(){return A}),n.d(t,"b",function(){return R}),n.d(t,"h",function(){return F}),n.d(t,"d",function(){return ee}),n.d(t,"i",function(){return le}),n.d(t,"f",function(){return he}),n.d(t,"l",function(){return be}),n.d(t,"g",function(){return ge}),n.d(t,"j",function(){return ve}),n.d(t,"c",function(){return Se}),n.d(t,"k",function(){return Ee}),n.d(t,"n",function(){return xe})},RtVw:function(e,t,n){e.exports={fullscreen:"_3YRMjyxR7LqBuoCfeQbKFK"}},S8MF:function(e,t,n){"use strict";n.d(t,"a",function(){return W});var r=n("RIqP"),a=n.n(r),o=n("cJHP"),i=n.n(o),c=n("eTac"),s=n.n(c),u=n("o0o1"),l=n.n(u),d=n("yXPU"),p=n.n(d),f=n("lwsE"),h=n.n(f),m=n("W8MJ"),v=n.n(m),g=n("a1gu"),y=n.n(g),b=n("Nsbk"),w=n.n(b),S=n("7W2i"),E=n.n(S),x=n("PJYZ"),C=n.n(x),k=n("lSNA"),_=n.n(k),M=n("q1tI"),T=n.n(M),O=n("17x9"),j=n.n(O),N=n("rbsZ"),I=n("t3Un"),A=n("XkTy"),R=n("Gbs1"),L=n("1iCU"),P=n("6XO9"),D=n("PYuP"),B=(n("cWnZ"),window.MBServer),F="file:"===location.protocol?"https://".concat(B):"https://".concat(location.host),U=[{value:"highlight",label:I18N.highlight_clickable},{value:"wechat",label:I18N.view_in_browser}],W=function(e){function t(e){var n;return h()(this,t),n=y()(this,w()(t).call(this,e)),_()(C()(C()(n)),"updateEmbeddedHTML",function(){var e=n.props.app;if(e.homeScreen()){var t=Object(R.c)(e,e.shell_type,e.homeScreen().orientation),r=80+t.width,a=80+t.height;n.setState({embeddedHTML:'<iframe src="'.concat(F,"/app/").concat(e.access_token,'/embed" ')+'width="'.concat(r,'" height="').concat(a,'" ')+'allowTransparency="true" frameborder="0"></iframe>'})}else Object(I.b)("/api/v2/projects/orientations.json",{}).then(function(t){var r=t.projects.find(function(t){return t.cid===e.cid}).orientation,a=Object(R.c)(e,e.shell_type,r),o=80+a.width,i=80+a.height;n.setState({embeddedHTML:'<iframe src="'.concat(F,"/app/").concat(e.access_token,'/embed" ')+'width="'.concat(o,'" height="').concat(i,'" ')+'allowTransparency="true" frameborder="0"></iframe>'})})}),_()(C()(C()(n)),"setQRCodeRef",function(e){return n.$qrcode=e}),_()(C()(C()(n)),"refreshQRCode",function(){return $(n.$qrcode).empty().qrcode({text:n.state.sharingURL+"?via=qrcode",width:100,height:100})}),_()(C()(C()(n)),"handleSelectAll",function(e){return e.target.select()}),_()(C()(C()(n)),"generateSharingURL",function(e){return n.setState({sharingURL:"https://".concat(MB.isHTMLZip()?window.MBServer:location.host,"/app/").concat(e)})}),_()(C()(C()(n)),"handleRefresh",p()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.d)({title:I18N.regenerate_url_title,desc:I18N.regenerate_url_desc});case 2:if(!e.sent){e.next=6;break}t=Math.uuid(31),n.generateSharingURL(t),n.setAttr("access_token",t);case 6:case"end":return e.stop()}},e,this)}))),_()(C()(C()(n)),"handleUpdateShell",function(e){var t=n.props.app;t.shell_type=e,t.lsave(MB.user.id===t.owner_id),MB.AutoSaver&&MB.AutoSaver.triggerSave(),n.props.dispatch({type:"entry:preview-setting:update:shell-type",payload:{shellType:t.shell_type}}),n.forceUpdate()}),_()(C()(C()(n)),"handlePasswordChange",function(e){return n.setAttr("password",e)}),_()(C()(C()(n)),"handleAccess",function(e){var t=e.value;"restricted"===t&&(n.props.app.password=""),n.setAttr("access",t)}),_()(C()(C()(n)),"handleCollaborators",function(){n.setState({isCollaboratorModalOpen:!0})}),_()(C()(C()(n)),"handlePreviewSettings",function(e){var t=e.idxList,r=n.props.app,a=new s.a(t);i()(r,{highlight:a.has(0),wechat:a.has(1)}),r.lsave(),MB.AutoSaver&&MB.AutoSaver.triggerSave(),n.props.dispatch({type:"entry:preview-setting:update:is-highlight",payload:{isHighlight:r.highlight}}),n.forceUpdate()}),_()(C()(C()(n)),"handleSlackWebHook",function(e){return n.setAttr("slack_web_hook_url",e.target.value)}),_()(C()(C()(n)),"onCloseCollaboratorModal",function(){return n.setState({isCollaboratorModalOpen:!1})}),n.state={sharingURL:"",embeddedHTML:"en"===MBLocale?"generating code…":"正在生成…",isCollaboratorModalOpen:!1},n}return E()(t,e),v()(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.app;this.generateSharingURL(e.access_token)}},{key:"componentDidMount",value:function(){this.updateEmbeddedHTML(),setTimeout(this.refreshQRCode,50)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.app,n=e.isOpen,r=this.props.isOpen;r&&!n?(this.setState({sharingURL:"",embeddedHTML:"en"===MBLocale?"generating code…":"正在生成…"}),$(this.$qrcode).empty()):!r&&n&&(this.updateEmbeddedHTML(),this.generateSharingURL(t.access_token))}},{key:"componentDidUpdate",value:function(e,t){var n=e.isOpen,r=t.sharingURL,a=this.props.isOpen,o=this.state.sharingURL;(!n&&a||r!==o)&&setTimeout(this.refreshQRCode,50)}},{key:"setAttr",value:function(e,t){this.props.app[e]=t,this.props.app.lsave(),MB.AutoSaver&&MB.AutoSaver.triggerSave(),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.app,o=e.dispatch,i=this.state,c=i.sharingURL,s=i.embeddedHTML,u=i.isCollaboratorModalOpen,l=/edge.modao.cc/.test(location.href),d=r.owner_id===MB.user.id,p=d||r.canAdmin(),f=d||r.canEdit(),h=!/^\/app\//i.test(location.pathname),m=[{value:"restricted",label:T.a.createElement("span",{className:"restricted-access"},T.a.createElement("span",null,I18N.restricted_intro),"restricted"===r.access&&T.a.createElement(P.Button,{type:"text",className:"manage-collaborators",onClick:this.handleCollaborators},I18N.manage))},{value:"private",label:T.a.createElement("span",null,I18N.private_intro,T.a.createElement("p",null,"private"===r.access&&(MB.user.id&&MB.user.limitation.encryptable?T.a.createElement(P.Input,{placeholder:I18N.sharing_password,value:r.password||"",onChange:this.handlePasswordChange,readOnly:!p}):T.a.createElement(P.Button,{type:"text",className:"renew",onClick:N.b},I18N.password_protection))))}],v=U.reduce(function(e,t,n){return r[t.value]?a()(e).concat([t.value]):e},[]),g=r.team_cid?r.cteam():r,y=Object(R.a)(r)?L.g:L.h;return T.a.createElement(P.Modal,{isOpen:t,className:"sharing-modal",title:I18N.share,onClose:n},T.a.createElement("section",{className:"qrcode",ref:this.setQRCodeRef}),T.a.createElement("section",{className:"sharing-url"},T.a.createElement(P.Input,{readOnly:!0,value:c,onClick:this.handleSelectAll}),p&&T.a.createElement(P.Button,{type:"primary",onClick:this.handleRefresh},I18N.regenerate)),T.a.createElement("section",{className:"sharing-code"},T.a.createElement("p",null,I18N.embed_tips),T.a.createElement(P.Textarea,{readOnly:!0,onClick:this.handleSelectAll,value:s})),h&&T.a.createElement("section",null,T.a.createElement(P.FormEntry,{name:I18N.access_permission},T.a.createElement(P.RadioGroup,{isDisabled:!p,optionList:m,onChange:this.handleAccess,value:r.access}))),f&&T.a.createElement("section",null,T.a.createElement(P.FormLabel,{name:I18N.default_shell_field},T.a.createElement(P.Select,{optionList:y,value:r.shell_type,onChange:this.handleUpdateShell}))),p&&T.a.createElement("section",null,T.a.createElement(P.FormEntry,{name:I18N.preview_settings},T.a.createElement(P.CheckGroup,{optionList:U,onChange:this.handlePreviewSettings,valueList:v}))),l&&T.a.createElement(P.FormEntry,{name:"Slack Web Hook"},T.a.createElement("input",{type:"text",value:r.slack_web_hook_url||"",onBlur:this.handleSlackWebHook})),T.a.createElement(D.a,{isOpen:u,onClose:this.onCloseCollaboratorModal,dispatch:o,host:g,userRole:g.owner_id===MB.user.id?"owner":g.roleByUid(MB.user.id)}))}}]),t}(M.PureComponent);_()(W,"propTypes",{dispatch:j.a.func.isRequired,isOpen:j.a.bool,onClose:j.a.func,app:j.a.object})},"SA+Z":function(e,t,n){var r=n("wTVA"),a=n("EbDI"),o=n("wkBT");e.exports=function(e){return r(e)||a(e)||o()}},Sxd8:function(e,t){e.exports=function(e){return e}},T7iu:function(e,t,n){"use strict";n("edRh"),n("Xgir"),n("fRjM"),n("4MIG"),n("rXnp"),n("HLqo"),n("2rXa"),n("dSX7")},TKrE:function(e,t){e.exports=function(e){return e}},TSYQ:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=a.apply(null,r);i&&e.push(i)}else if("object"===o)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}void 0!==e&&e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},UDep:function(e,t,n){n("wgeU"),n("FlQf"),n("bBy9"),n("g33z"),n("XLbu"),n("/h46"),n("dVTT"),e.exports=n("WEpk").Map},UJpD:function(e,t,n){e.exports={detector:"p677pQqCIRS-SsEhJWgV4"}},UZR7:function(e,t,n){},UbMB:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(a.apply(this,r));else if("object"===o)for(var i in r)n.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}void 0!==e&&e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},UfWW:function(e,t,n){var r=n("KwMD"),a=n("ut/Y"),o=n("Sxd8"),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var s=null==n?0:o(n);return s<0&&(s=i(c+s,0)),r(e,a(t,3),s)}},WF1K:function(e,t,n){"use strict";n.d(t,"a",function(){return r});t.b={fontFamily:"Arial",fontWeight:"regular",fontSize:14,color:"#101010",fontStyle:"normal",textDecoration:"none",letterSpacing:0};var r="Courier New"},WVP6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createReduxEntry=function(){var e=null,t={},n=function(e,n){if("string"!=typeof e)throw new Error("[ReduxEntry][setEntry] non-string actionType: "+e);if("function"!=typeof n)throw new Error("[ReduxEntry][setEntry] non-function entryFunction: "+e+", "+n);t[e]&&console.warn("[ReduxEntry][setEntry] possible unexpected entry overwrite: "+e),t[e]=n};return{middleware:function(n){if("function"!=typeof n.getState||"function"!=typeof n.dispatch)throw new Error("[ReduxEntry][middleware] invalid reduxMiddlewareStore");if(null!==e)throw new Error("[ReduxEntry][middleware] already set reduxMiddlewareStore");return e=n,function(n){return function(r){return!0===function(n){var r=t[n.type];return r&&r(e,n)}(r)||n(r)}}},setEntry:n,setEntryMap:function(e){return Object.keys(e).forEach(function(t){return n(t,e[t])})}}},t.createStateStore=function(e){if(void 0===e)throw new Error("[ReduxEntry][createStateStore] initialState expected");return{getState:function(){return e},setState:function(t){return e=t},wrapEntry:function(t){return function(n,r){return t(e,n,r)}}}},t.createStateStoreReducer=function(e,t){var n=t.getState,r=t.setState;return function(t,a){var o=a.type,i=a.payload;return o===e&&r(i),n()}},t.createStateStoreMergeReducer=function(e,t){var n=t.getState,a=t.setState;return function(t,o){var i=o.type,c=o.payload;return i===e&&a(r({},n(),c)),n()}}},WcC0:function(e,t,n){},XKAG:function(e,t,n){var r=n("ut/Y"),a=n("MMmD"),o=n("7GkX");e.exports=function(e){return function(t,n,i){var c=Object(t);if(!a(t)){var s=r(n,3);t=o(t),n=function(e){return s(c[e],e,c)}}var u=e(t,n,i);return u>-1?c[s?t[u]:u]:void 0}}},XLbu:function(e,t,n){var r=n("Y7ZC");r(r.P+r.R,"Map",{toJSON:n("8iia")("Map")})},Xgir:function(e,t,n){},XkTy:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"e",function(){return u});var r=n("8fIB"),a=n.n(r),o=function(e){var t=e.title,n=e.desc,r=e.isHTML,o=e.confirmText,i=e.cancelText;return new a.a(function(e){return MB.webpackInterface.store.dispatch({type:"container:modal:open",payload:{title:t,desc:n,isHTML:r,type:"alert",alertType:"confirm",canClose:!0,canCancel:!0,canConfirm:!0,cancelText:i,confirmText:o,onCancel:function(){return e(!1)},onConfirm:function(){return e(!0)}}})})},i=function(e){var t=e.title,n=e.desc,r=e.isHTML,o=e.confirmText;return new a.a(function(e){return MB.webpackInterface.store.dispatch({type:"container:modal:open",payload:{title:t,desc:n,isHTML:r,type:"alert",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:o,onConfirm:function(){return e()}}})})},c=function(e){var t=e.title,n=e.desc,r=e.isHTML,o=e.confirmText;return new a.a(function(e){return MB.webpackInterface.store.dispatch({type:"container:modal:open",payload:{title:t,desc:n,isHTML:r,type:"functional",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:o,onConfirm:function(){return e()}}})})},s=function(e){var t=e.title,n=e.desc,r=e.isHTML,o=e.confirmText;return new a.a(function(e){return MB.webpackInterface.store.dispatch({type:"container:modal:open",payload:{title:t,desc:n,isHTML:r,type:"alert",alertType:"alert",canClose:!1,canCancel:!1,canConfirm:!0,confirmText:o,onConfirm:function(){return e()}}})})},u=function(){return new a.a(function(e,t){return MB.webpackInterface.store.dispatch({type:"container:modal:open",payload:{type:"form",desc:I18N.credential_required,alertType:"prompt",canClose:!1,canCancel:!1,canConfirm:!0,onCancel:t,onConfirm:function(){var n=(document.querySelector(".global-alert-portal .prompt-pwd input")||{}).value;return n?e(n):t()}}})})};MB.confirmAsync=o,MB.alertAsync=i},XpKX:function(e,t,n){e.exports={"adjust-container":"_2767PBbPLOHyCg-9kbwJq7","is-offline-mode":"_2Rn4b7GJxlQ8HllhNCcowW","is-uichina":"VXUfuoQkv54ubWe5VFlrv"}},XrEr:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return getNormalRgbaColor}),__webpack_require__.d(__webpack_exports__,"e",function(){return parseSketchColor2rgba}),__webpack_require__.d(__webpack_exports__,"b",function(){return getColorFromUnit}),__webpack_require__.d(__webpack_exports__,"d",function(){return getUIColor}),__webpack_require__.d(__webpack_exports__,"a",function(){return DEFAULT_COLOR});var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("J4zp"),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),lodash_round__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tpxX"),lodash_round__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_1__),_utils___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("/5+U"),rgba2hexWithA=function(e){if(checkColorUnit(e)!==RGBA)return console.warn("Not rgbacolor but use rgba2hexWithA"),e;var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d+)?)[\s+]?/i);return t&&t.length>=4?{hex:("#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)).toUpperCase(),o:Number((+t[4]).toFixed(2))}:e},getNormalRgbaColor=function(e){if(!e)return DEFAULT_COLOR;var t=parseSketchColor2rgba(e);return t?getColorFromUnit(t,RGBA):e},parseSketchColor2rgba=function parseSketchColor2rgba(rgbaFuncStr){var colorType=checkColorUnit(rgbaFuncStr);if(colorType!==RGBA)return getColorFromUnit(rgbaFuncStr,RGBA);function rgba(){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];return e<=1&&t<=1&&n<=1?{r:parseInt(lodash_round__WEBPACK_IMPORTED_MODULE_1___default()(255*e),10),g:parseInt(lodash_round__WEBPACK_IMPORTED_MODULE_1___default()(255*t),10),b:parseInt(lodash_round__WEBPACK_IMPORTED_MODULE_1___default()(255*n),10),a:Number(Number(r).toFixed(2))}:{r:e,g:t,b:n,a:void 0===r?1:r}}var _eval=eval(rgbaFuncStr),r=_eval.r,g=_eval.g,b=_eval.b,a=_eval.a;return"rgba(".concat(r,", ").concat(g,", ").concat(b,", ").concat(a,")")},checkColorUnit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_COLOR;return e.includes(RGBA)?RGBA:e.includes(RGB)?RGB:e.includes("#")&&9===e.length?ARGB:e.includes("#")?HEX:!!e.includes(TRANSPARENT)&&TRANSPARENT},getColorFromUnit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RGBA;if(!e)return DEFAULT_COLOR;var n=checkColorUnit(e);if(!n)return DEFAULT_COLOR;switch(n){case RGBA:if(t===n)return e;if(t===RGB)return rgba2rgb(e);if(t===HEX)return rgba2hex(e);if(t===ARGB)return rgba2argb(e);break;case RGB:if(t===n)return e;if(t===RGBA)return rgb2rgba(e);if(t===HEX)return rgb2hex(e);if(t===ARGB)return rgb2argb(e);break;case HEX:if(t===n)return e;if(t===RGBA)return hex2rgba(e);if(t===RGB)return hex2rgb(e);if(t===ARGB)return hex2argb(e);break;case ARGB:if(t===n)return e;if(t===RGBA)return argb2rgba(e);if(t===RGB)return argb2rgbWithA(e);if(t===HEX)return argb2hexWithA(e);break;case TRANSPARENT:if(t===RGBA)return RGBA_FOR_TRANSPARENT;if(t===RGB)return rgba2rgb(RGBA_FOR_TRANSPARENT);if(t===HEX)return rgba2hex(RGBA_FOR_TRANSPARENT);if(t===ARGB)return rgba2argb(RGBA_FOR_TRANSPARENT);break;default:return e}},rgba2rgbWithA=function(e){if(checkColorUnit(e)!==RGBA)return console.warn("Not rgbacolor but use rgba2rgbWithA"),e;var t=rgba2hexWithA(e),n=t.hex,r=t.o;return n?{rgb:hex2rgb(n),o:r}:DEFAULT_COLOR},hex2rgb=function(e){if(checkColorUnit(e)!==HEX)return console.warn("Not hexcolor but use hex2rgb"),e;if(3===(e=e.replace("#","")).length){var t=e.split(""),n=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(t,3),r=n[0],a=n[1],o=n[2];e="".concat(r).concat(r).concat(a).concat(a).concat(o).concat(o)}var i=parseInt(e.substring(0,2),16),c=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return"rgb(".concat(i,", ").concat(c,", ").concat(s,")")},rgba2rgb=function(e){var t=rgba2rgbWithA(e),n=t.rgb,r=t.o;return n?"".concat(n," ").concat(Math.round(100*r),"%"):e},rgba2hex=function(e){var t=rgba2hexWithA(e),n=t.hex,r=t.o;return n?"".concat(n.toUpperCase()," ").concat(Math.round(100*r),"%"):e},rgba2argb=function(e){if(checkColorUnit(e)!==RGBA)return console.warn("Not rgbacolor but use rgba2argb"),e;var t=rgba2hexWithA(e),n=t.hex,r=t.o;if(!n)return e;var a=("0"+parseInt(255*r,10).toString(16)).slice(-2).toUpperCase();return"#".concat(a).concat(n.slice(1))},rgb2rgba=function(e){return checkColorUnit(e)!==RGB?(console.warn("Not rgbcolor but use rgb2rgba"),e):"rgba(".concat(e.slice(4,-1),", 1)")},rgb2hex=function(e){if(checkColorUnit(e)!==RGB)return console.warn("Not rgbcolor but use rgb2hex"),e;var t=e.match(/^rgb?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(t&&4===t.length){var n=("0"+parseInt(t[1],10).toString(16)).slice(-2),r=("0"+parseInt(t[2],10).toString(16)).slice(-2),a=("0"+parseInt(t[3],10).toString(16)).slice(-2);return"#".concat(n).concat(r).concat(a).toUpperCase()}},rgb2argb=function(e){return checkColorUnit(e)!==RGB?(console.warn("Not rgbcolor but use rgb2argb"),e):hex2argb(rgb2hex(e))},hex2argb=function(e){return checkColorUnit(e)!==HEX?(console.warn("Not hexcolor but use hex2argb"),e):"#FF".concat(e.slice(1))},hex2rgba=function(e){return checkColorUnit(e)!==HEX?(console.warn("Not hexcolor but use hex2rgba"),e):rgb2rgba(hex2rgb(e))},argb2rgba=function(e){if(checkColorUnit(e)!==ARGB)return console.warn("Not argbcolor but use argb2rgba"),e;for(var t=[],n=1;n<e.length;n+=2)t.push(e.slice(n,n+2));var r=t[0],a=t[1],o=t[2],i=t[3];return a=parseInt(a,16),o=parseInt(o,16),i=parseInt(i,16),r=Number((parseInt(r,16)/255).toString().slice(0,4)),"rgba(".concat(a,", ").concat(o,", ").concat(i,", ").concat(r,")")},argb2rgbWithA=function(e){if(checkColorUnit(e)!==ARGB)return console.warn("Not argbcolor but use argb2rgbWithA"),e;var t=argb2rgba(e),n=rgba2rgbWithA(t),r=n.rgb,a=n.o;return r?"".concat(r," ").concat(Math.round(100*a),"%"):e},argb2hexWithA=function(e){if(checkColorUnit(e)!==ARGB)return console.warn("Not argbcolor but use argb2hexWithA"),e;var t=argb2rgba(e),n=rgba2hexWithA(t),r=n.hex,a=n.o;return r?"".concat(r.toUpperCase()," ").concat(Math.round(100*a),"%"):e},getUIColor=function getUIColor(color){if(!color)return DEFAULT_COLOR;var rgbaColor=getColorFromUnit(color,"rgba");function rgba(){return{r:arguments[0],g:arguments[1],b:arguments[2],a:arguments[3]}}var _eval2=eval(rgbaColor),r=_eval2.r,g=_eval2.g,b=_eval2.b,a=_eval2.a;return r=Object(_utils___WEBPACK_IMPORTED_MODULE_2__.l)(r/255),g=Object(_utils___WEBPACK_IMPORTED_MODULE_2__.l)(g/255),b=Object(_utils___WEBPACK_IMPORTED_MODULE_2__.l)(b/255),"UIColor(red:".concat(r,", green:").concat(g,", blue:").concat(b,", alpha:").concat(a,")")},RGBA="rgba",ARGB="argb",RGB="rgb",HEX="hex",TRANSPARENT="transparent",RGBA_FOR_TRANSPARENT="rgba(255, 255, 255, 0)",DEFAULT_COLOR="#FFFFFF"},"Xt/L":function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},"Y+p1":function(e,t,n){var r=n("wF/u");e.exports=function(e,t){return r(e,t)}},ZCpW:function(e,t,n){var r=n("lm/5"),a=n("O7RO"),o=n("IOzZ");e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},ZWtO:function(e,t,n){var r=n("4uTw"),a=n("9Nap");e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},ZXhj:function(e,t,n){"use strict";function r(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.forEach(function(e){t=Math.min(e.top,t),n=Math.min(e.left,n),r=Math.max(e.left+e.width,r),a=Math.max(e.top+e.height,a)}),{top:t,left:n,right:r,bottom:a,width:r-n,height:a-t}}n.d(t,"a",function(){return r})},a1Ia:function(e,t,n){e.exports={"sub-toolbar":"_1_GW4ZPKsACMqmFUgNIiea","select-input":"_1z2tl9KzoQhfo9Vd0AnQNl"}},abHt:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c});var r=n("rVSK"),a=n.n(r),o=[{name:"rich_text",icon_text:"文字",text:I18N.w.rich_text_placeholder,tb_text:"文字",icon_name:"text",fs:14,z:5,ha:"left",va:"top",size_type:0},{name:"label",icon_text:"文字",text:I18N.w.label,tb_text:"文字",icon_name:"text",width:33,height:23,fs:14,border_radius:"",bs:0,ha:"center",va:"middle",z:5,lh:1.45,hide:!0},{name:"text_view",icon_text:"多行文字",text:I18N.w.text_view_placeholder,tb_text:"多行文字",icon_name:"paragraph",width:200,height:65,fs:14,border_radius:"",bs:0,ha:"left",va:"top",z:5,lh:1.45,hide:!0},{name:"rounded_rect",icon_text:"矩形",text:"",icon_name:"rectangle",width:200,height:100,border_radius:"",bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{name:"circle_rect",icon_text:"圆形",text:"",icon_name:"circle",width:100,height:100,bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{name:"triangleb",icon_text:"三角",text:"",icon_name:"triangle-top",width:40,height:30,z:5},{name:"triangletl",icon_text:"三角",text:"",icon_name:"triangle-left-bottom",width:40,height:40,z:5},{name:"hr",icon_text:"线条",text:"",icon_name:"horizontal-line",width:150,height:10,z:5,zoomable:"w,e,n",hide:!0},{name:"line",icon_name:"horizontal-line",icon_text:"线条",width:150,height:1,points:a()([{point:[0,.5]},{point:[1,.5]}]),bs:1,bc:"rgba(187, 187, 187, 1)"},{name:"ve",icon_text:"线条",text:"",icon_name:"vertical-line",width:10,height:150,z:5,zoomable:"n,s,w",hide:!0},{name:"button",icon_text:"按钮",text:I18N.w.button,tb_text:"按钮",icon_name:"btn",width:80,height:30,fs:14,border_radius:"4",bs:1,ha:"center",va:"middle",z:5,icon:"",is:14},{name:"image_view",icon_text:"图片",text:"",icon_name:"img",width:200,height:120,border_radius:"",bs:0,z:5},{name:"icon_button",icon_text:"图标",text:"",icon:"star",icon_name:"smile",width:24,height:24,border_radius:"",bs:0,is:24,z:5,hide:!0},{name:"tab_item",icon_text:"标签",text:I18N.w.tab_item,tb_text:"标签",icon_name:"icon-label",icon:"home",width:80,height:45,fs:12,is:24,z:5,ha:"center",zoomable:"w,e"},{name:"lr",icon_text:"链接区域",tb_text:"链接区域",icon_name:"link",width:45,height:45,bs:0,z:7},{icon_text:"网页",name:"webpage",text:"about:blank",tb_text:"网页",icon_name:"webpage",width:"100%",height:400,z:5,ha:"center"},{name:"pg",icon_text:"全局手势",icon_name:"gesture",icon:"tap",width:40,height:40,bs:0,z:7,zoomable:" "},{name:"sticky",icon_text:"批注",tb_text:"批注",icon_name:"sticker",width:204,height:170,padding:24,fs:12,lh:1.67,z:10},{name:"mtext_input",icon_text:"单行输入",text:I18N.w.mtext_input,tb_text:"单行输入",icon_name:"input",width:200,height:30,fs:14,border_radius:"",bs:1,ha:"left",va:"middle",z:5,padding:8},{name:"mtextarea",icon_text:"多行输入",text:I18N.w.mtextarea,tb_text:"多行输入",icon_name:"textarea",width:280,height:100,fs:14,lh:1.45,border_radius:"",bs:1,ha:"left",z:5,padding:8},{name:"mselect",icon_text:"下拉框",text:"1\n2\n3",tb_text:"下拉框",icon_name:"select",width:200,height:30,fs:14,bs:1,z:5,lh:1.45,padding:8},{name:"mfile_input",icon_text:"选择文件",tb_text:"文件选择",icon_name:"file",width:200,height:30,z:5,padding:8},{name:"mtooltip",icon_text:"聊天气泡",text:I18N.w.mtooltip,tb_text:"聊天气泡",icon_name:"tooltip",width:220,height:40,fs:14,border_radius:"5",ha:"left",va:"top",z:5,lh:1.45,bg:"#8DFA69",bs:1,padding:10},{name:"map_view",icon_text:"地图",text:"",icon_name:"map",width:"100%",height:230,z:4},{name:"mcheckbox2",icon_text:"复选框",icon_name:"checkbox",width:30,height:30,z:5,checked:!1,hide:!0},{name:"mradiobutton",icon_text:"单选框",icon_name:"radio",width:30,height:30,z:5,checked:!1,hide:!0},{name:"ios_check",icon_text:"多选框",width:22,height:22,z:5,checked:!0,hide:!0},{name:"android_check",icon_text:"多选框",width:18,height:18,z:5,checked:!0,hide:!0},{name:"android_radio",icon_text:"单选框",width:20,height:20,z:5,checked:!0,hide:!0},{name:"switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:50,height:30,bs:0,z:5,zoomable:" ",checked:!0,hide:!0},{name:"ios_switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:50,height:30,bs:0,z:5,checked:!0,hide:!0},{name:"android_switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:37,height:20,bs:0,z:5,checked:!0,hide:!0},{name:"navigation_bar",icon_text:"标题栏",text:I18N.w.navbar_title,tb_text:"标题栏",icon_name:"header",width:"100%",height:55,fs:18,z:4,ha:"center",top:23,hide:!0},{name:"nav_bar",icon_text:"标题栏",text:I18N.w.navbar_title,tb_text:"标题栏",icon_name:"header",width:"100%",height:55,fs:18,z:4,ha:"center",top:23},{name:"tab_bar",icon_text:"底栏",text:"",tb_text:"底栏",icon_name:"footer",width:"100%",height:45,bc:"transparent",z:4,zoomable:"n"},{name:"rectangle",icon_text:"空白通栏",text:"",icon_name:"bar",width:"100%",height:100,z:5,zoomable:"n,s",hide:!0},{name:"search_bar",icon_text:"搜索框",text:I18N.w.search,tb_text:"搜索",icon_name:"search-input",width:"100%",height:45,fs:14,ha:"left",z:5,zoomable:"w,e",hide:!0},{name:"keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,zoomable:" ",numeric:!1,hide:!0},{name:"iphone_keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,numeric:!1,hide:!0},{name:"ipad_keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,numeric:!1,hide:!0},{name:"android_keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,numeric:!1,hide:!0},{name:"status_bar",icon_text:"状态栏",text:I18N.w.carrier,tb_text:"中国移动",icon_name:"battery",width:"100%",height:23,z:3,zoomable:" ",hide:!0},{name:"ios_status_bar",icon_text:"状态栏",icon_name:"battery",width:"100%",height:20,z:3,hide:!0},{name:"iphone_x_status_bar",icon_text:"iPhone X 状态栏",icon_name:"battery",width:"100%",height:44,z:3,hide:!0},{name:"android_status_bar",icon_text:"状态栏",icon_name:"battery",width:"100%",height:23,z:3,hide:!0}],i=o.reduce(function(e,t){return e[t.name]=t,e},{}),c=["lr","rich_text","image_view","rounded_rect","circle_rect","pg","sticky"].map(function(e){return i[e]})},aqSL:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("i8i4"),i=n.n(o),c=n("/MKj"),s=n("q3nj"),u=n("6x+O"),l=n("6ZRU");t.a={containerReducerMap:s.b,sagaMap:s.c,extendCallback:function(e){e.renderPreview=function(t){var n=e.store;n.dispatch({type:"entry:refresh:project-related"}),i.a.render(a.a.createElement(c.Provider,{store:n},a.a.createElement(s.a,null)),t)},e.renderPreviewAlert=function(){i.a.render(a.a.createElement(l.a.containers.Alert,{store:e.store}),Object(u.b)())},e.pushData=function(t,n,r){e.store.dispatch({type:"entry:state:push-data",payload:{pushType:t,action:n,data:r}})},e.checkLocationHash=function(){var t=window.location.hash||"",n=e.store,r=n.getState,a=n.dispatch;if(t.startsWith("#thread=")){var o=t.substr("#thread=".length),i=r().model.commentThreads.find(function(e){return e.cid===o});if(!i)return console.warn("[checkLocationHash] missing commentThread: ".concat(o));a({type:"entry:sync-runner:set-screen",payload:{cid:i.screen_cid}}),a({type:"entry:comment:set:active",payload:{isActive:!0}}),a({type:"container:comment:select",payload:{select:i.cid}})}},e.updateCurrentScreenRunner=function(t){if(!t)return console.warn("[updateCurrentScreenRunner] missing currentScreen");e.store.dispatch({type:"entry:current:set-screen",payload:t}),window.location.hash="#screen=".concat(t.cid)}}}},asDA:function(e,t){e.exports=function(e,t,n,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}},bNtH:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("740n"),E=n.n(S),x=function(e){function t(){var e;return a()(this,t),e=s()(this,l()(t).call(this)),v()(h()(h()(e)),"handleScroll",function(t){t.stopPropagation();var n=t.target.dataset.axis,r=t.clientX,a=t.clientY,o=e.props,i=o.canvasOffset,c=i.x,s=i.y,u=o.viewportHeight,l=o.viewportWidth,d=o.canvasRange,p=o.onScroll,f="x"===n?l:u,h=function(e){var t=e.clientY,o=e.clientX,i="x"===n?o-r:t-a;i=i/(f-f/d[n]*f)*d[n],p("x"===n?{x:c-i,y:s}:{x:c,y:s-i})};document.addEventListener("mousemove",h),document.addEventListener("mouseup",function e(t){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",e)})}),v()(h()(h()(e)),"handleClickTrack",function(t){var n=t.target.dataset.axis,r=t.clientX,a=t.clientY,o=e.props,i=o.onScroll,c=o.canvasRange,s=o.viewportHeight,u=o.viewportWidth,l=e.scrollbarX.getBoundingClientRect(),d=l.top,p=l.bottom,f=l.left,h=l.right,m="x"===n?e.scrollbarX:e.scrollbarY,v="x"===n?u:s,g=function(){var t=m.getBoundingClientRect(),o=t.top,s=t.bottom,u=t.left,l=t.right,d=e.props.canvasOffset,p=d.x,f=d.y,h="x"===n?r>l:a>s,g="x"===n?r<u:a<o,y=(g?-1:h?1:0)*Math.min(c[n]/10,v);(h||g)&&i("x"===n?{x:p-y,y:f}:{x:p,y:f-y})};(("x"===n?r>h:a>p)||("x"===n?r<f:a<d))&&(m.style.transition="all 0.1s linear",g(),e.timer=setTimeout(function(){return e.timeInterval=setInterval(g,100)},500));document.addEventListener("mouseup",function t(n){m.style.transition="",clearTimeout(e.timer),clearInterval(e.timeInterval),document.removeEventListener("mouseup",t)})}),e.setRefY=function(t){return e.scrollbarY=t},e.setRefX=function(t){return e.scrollbarX=t},e}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.canvasOffset,n=t.x,r=t.y,a=e.canvasRange,o=e.viewportWidth,i=e.viewportHeight,c=e.showRuler,s=o/a.x,u=(a.x/2-n)*(a.x-o)/(a.x*a.x);u=Math.min(Math.max(u,0),(a.x-o)/a.x);var l=i/a.y,d=(a.y/2-r)*(a.y-i)/(a.y*a.y);d=Math.min(Math.max(d,0),(a.y-i)/a.y);var p={width:"".concat(100*s,"%"),left:"".concat(100*u,"%")},f={height:"".concat(100*l,"%"),top:"".concat(100*d,"%")},h=c?null:{left:0},m=c?null:{top:0};return w.a.createElement("div",{className:E.a.scrollbar},w.a.createElement("div",{"data-axis":"x",className:"x_track",style:h,onMouseDown:this.handleClickTrack},w.a.createElement("div",{ref:this.setRefX,className:"x_handler","data-axis":"x",onMouseDown:this.handleScroll,style:p},w.a.createElement("div",{className:"x_scroll_bar"}))),w.a.createElement("div",{"data-axis":"y",className:"y_track",style:m,onMouseDown:this.handleClickTrack},w.a.createElement("div",{ref:this.setRefY,className:"y_handler","data-axis":"y",onMouseDown:this.handleScroll,style:f},w.a.createElement("div",{className:"y_scroll_bar"}))))}}]),t}(b.PureComponent);v()(x,"propTypes",{canvasOffset:y.a.object,canvasRange:y.a.object,viewportWidth:y.a.number,viewportHeight:y.a.number,showRuler:y.a.bool,onScroll:y.a.func}),v()(x,"defaultProps",{showRuler:!1}),t.a=x},bTYh:function(e,t,n){},bahg:function(e,t){e.exports=function(e){return e.split("")}},cAqp:function(e,t,n){e.exports={"comment-marker":"_2DdCe4X_4uBwFVlS753YET"}},cWnZ:function(e,t,n){},cl8F:function(e,t,n){"use strict";var r=n("rVSK"),a=n.n(r),o={tc:"#101010",bg:"transparent",bc:"#bbbbbb",sc:"#aaaaaa",box_shadow:a()([[0,0,0,0,0,"#aaaaaa"]]),text_shadow:a()([[0,0,0,"#aaaaaa"]]),sticky:{bg:"#FFFBBA"},status_bar:{bg:"#f8f8f8"},status_bar_android:{bg:"#555555"},ios_status_bar:{bg:"#f8f8f8"},iphone_x_status_bar:{bg:"#f8f8f8"},android_status_bar:{bg:"#f8f8f8"},image_view:{bg:"#e5e5e5",tc:"#bec2c9"},rounded_rect:{bg:"#FFFFFF"},circle_rect:{bg:"#FFFFFF"},triangleb:{tc:"#e5e5e5"},triangletl:{tc:"#e5e5e5"},button:{bg:"#ffffff"},navigation_bar:{bg:"#f8f8f8"},nav_bar:{bg:"#f8f8f8",bc:"transparent"},tab_bar:{bg:"#f8f8f8",bc:"transparent"},rectangle:{bg:"#ffffff"},mtext_input:{bg:"#ffffff",tc:"#888888"},mtextarea:{bg:"#ffffff",tc:"#888888"}};t.a=o},ctY3:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("M8nv"),E=n.n(S),x=n("OVdA"),C=n.n(x),k=n("UbMB"),_=n.n(k).a.bind(C.a),M=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=s()(this,(e=l()(t)).call.apply(e,[this].concat(o))),v()(h()(h()(n)),"handleFocus",function(){n.props.onFocus()}),v()(h()(h()(n)),"handleChange",function(e){(0,n.props.onChange)(e.target.value)}),v()(h()(h()(n)),"handleBlur",function(){n.props.onBlur()}),v()(h()(h()(n)),"handleKeyDown",function(e){"Enter"===e.key?(e.preventDefault(),n.handleBlur()):"Escape"===e.key&&(n.props.onChange(n.cacheValue),n.cacheValue=null,n.handleBlur())}),v()(h()(h()(n)),"handleDocDown",function(e){n.props.editing&&n.textarea&&n.textarea.contains(e.target)||n.props.onBlur()}),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.props.editing&&(this.cacheValue=this.props.value,this.textarea.select())}},{key:"componentDidUpdate",value:function(e,t){!e.editing&&this.props.editing&&(this.cacheValue=this.props.value,this.textarea.select())}},{key:"render",value:function(){var e=this,t=this.props,n=t.editing,r=t.value,a=t.className;return n?w.a.createElement("div",{className:_("text-wrapper",a)},w.a.createElement("textarea",{ref:function(t){return e.textarea=t},value:r,onFocus:this.handleFocus,onChange:this.handleChange,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown}),w.a.createElement(E.a,{onMouseDown:this.handleDocDown})):w.a.createElement("span",null,r)}}]),t}(b.Component);M.propTypes={editing:y.a.bool,value:y.a.string,className:y.a.string,onFocus:y.a.func,onBlur:y.a.func,onChange:y.a.func},M.defaultProps={onFocus:function(){},onChange:function(){}}},dAiO:function(e,t,n){},dQpi:function(e,t){e.exports=function(){}},dSX7:function(e,t,n){},dVTT:function(e,t,n){n("aPfg")("Map")},dVn5:function(e,t){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(n)||[]}},dppN:function(e,t,n){},dt0z:function(e,t){e.exports=function(e){return e}},e5cp:function(e,t,n){var r=n("fmRc"),a=n("or5M"),o=n("HDyB"),i=n("seXi"),c=n("QqLw"),s=n("Z0cm"),u=n("DSRE"),l=n("c6wG"),d=1,p="[object Arguments]",f="[object Array]",h="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,y){var b=s(e),w=s(t),S=b?f:c(e),E=w?f:c(t),x=(S=S==p?h:S)==h,C=(E=E==p?h:E)==h,k=S==E;if(k&&u(e)){if(!u(t))return!1;b=!0,x=!1}if(k&&!x)return y||(y=new r),b||l(e)?a(e,t,n,v,g,y):o(e,t,S,n,v,g,y);if(!(n&d)){var _=x&&m.call(e,"__wrapped__"),M=C&&m.call(t,"__wrapped__");if(_||M){var T=_?e.value():e,O=M?t.value():t;return y||(y=new r),g(T,O,n,v,y)}}return!!k&&(y||(y=new r),i(e,t,n,v,g,y))}},eaeY:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=n("q1tI");n("17x9");var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){this.props.enabled&&this.bindHandlers()}},{key:"componentWillUnmount",value:function(){this.unbindHandlers()}},{key:"componentWillReceiveProps",value:function(e){this.props.enabled&&!e.enabled?this.unbindHandlers():!this.props.enabled&&e.enabled&&this.bindHandlers()}},{key:"getKeys",value:function(){this.props.target,window;return Object.keys(this.props).filter(function(e){return"on"===e.slice(0,2)}).map(function(e){return[e,e.slice(2).toLowerCase()]})}},{key:"getTarget",value:function(){var e=this.props,t="function"==typeof e.target?e.target():e.target;return t||(t=this.node&&this.node.ownerDocument),t}},{key:"bindHandlers",value:function(){this._adjustHandlers(i)}},{key:"unbindHandlers",value:function(){this._adjustHandlers(c)}},{key:"_adjustHandlers",value:function(e){var t=this.props,n=this.getTarget();if(n){var r=s?{passive:t.passive,capture:t.capture}:t.capture;this.getKeys().forEach(function(a){e(n,a[1],t[a[0]],r)})}}},{key:"render",value:function(){var e=this;return this.props.target?null:a.createElement("noscript",{ref:function(t){e.node=t}})}}]),t}();function i(e,t,n,r){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,n,r),n}function c(e,t,n,r){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,n,r),n}o.displayName="DocumentEvents",o.defaultProps={capture:!1,enabled:!0,passive:!1};var s=function(){try{var e=!1;return document.createElement("div").addEventListener("test",function(){},{get passive(){e=!0}}),e}catch(e){return!1}}();e.exports=o},edRh:function(e,t,n){},fIwL:function(e,t,n){},fRjM:function(e,t,n){},fSKh:function(e,t,n){},fW1p:function(e,t,n){var r=n("Y7ZC"),a=n("E8gZ")(!1);r(r.S,"Object",{values:function(e){return a(e)}})},fo6e:function(e,t){var n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return n.test(e)}},foKU:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n("pVnL"),a=n.n(r),o=n("QILm"),i=n.n(o),c=n("lwsE"),s=n.n(c),u=n("W8MJ"),l=n.n(u),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=n("7W2i"),v=n.n(m),g=n("PJYZ"),y=n.n(g),b=n("lSNA"),w=n.n(b),S=n("17x9"),E=n.n(S),x=n("q1tI"),C=n.n(x),k=MB.config.SCALES[0],_=MB.config.SCALES[MB.config.SCALES.length-1],M=function(e){function t(){var e,n;s()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=p()(this,(e=h()(t)).call.apply(e,[this].concat(a))),w()(y()(y()(n)),"setElementRef",function(e){return n.$elem=e}),w()(y()(y()(n)),"handleWheel",function(e){e.preventDefault();var t=n.props,r=t.x,a=t.y,o=t.scale,i=t.onOffsetChange,c=Math.max(-1,Math.min(e.deltaY,1));if(e.ctrlKey||e.metaKey){var s=n.$elem.getBoundingClientRect(),u=s.top,l=(s.left+s.right)/2,d=(u+s.bottom)/2,p=o<=100?o-5*c:o-o*c*.05,f=e.pageX-l,h=e.pageY-d;n.handleZoom(p,f,h)}else i(r-e.deltaX,a-e.deltaY)}),n}return v()(t,e),l()(t,[{key:"handleZoom",value:function(e,t,n){var r=this.props,a=r.x,o=r.y,i=r.scale,c=r.onOffsetChange,s=r.onScaleChange,u=(e=Math.min(Math.max(e,k),_))/i;1!==u&&(c(t+u*(a-t),n+u*(o-n)),s(e))}},{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.scale,o=e.children,c=(e.onOffsetChange,e.onScaleChange,i()(e,["x","y","scale","children","onOffsetChange","onScaleChange"]));return C.a.createElement("div",a()({},c,{ref:this.setElementRef,onWheel:this.handleWheel}),o.map(function(e){return"function"==typeof e?e(t,n,r):e}))}}]),t}(x.PureComponent);M.propTypes={x:E.a.number,y:E.a.number,scale:E.a.number,children:E.a.array,onScaleChange:E.a.func,onOffsetChange:E.a.func}},g33z:function(e,t,n){"use strict";var r=n("Wu5q"),a=n("n3ko");e.exports=n("raTm")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(a(this,"Map"),0===e?0:e,t)}},r,!0)},gCaL:function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r=n("J4zp"),a=n.n(r),o=n("l00i"),i=n.n(o),c=n("980g"),s=n.n(c),u=n("MVZn"),l=n.n(u),d=n("0k54");function p(e,t,n,r){var a=l()({},e),o=n;return r.forEach(function(e){if(e){var n=e.dup();a[e.cid]=n;var r=f(e,t);o=Object(d.h)(r,o,function(e){return e.widget=n})}}),{widgetMap:a,widgetTreeData:o}}var f=function(e,t){for(var n=[e.cid];e.gid;)n.unshift(e.gid),e=t[e.gid];return n},h=function(e){var t=function(e,t){var n={},r={},o={};e.forEach(function(e){n[e.cid]=e,o[e.screen_cid]=o[e.screen_cid]||[],e.gid?(r[e.gid]=r[e.gid]||{gid:e.gid,screen_cid:e.screen_cid,children:[]},r[e.gid].children.push(e)):o[e.screen_cid].push(e)});var c={root:{cid:"root",children:[]}};s()(r).forEach(function(e){var t=e.gid,r=e.screen_cid,a=e.children;a.sort(v);var i=n[t];if(!i){if(1===a.length)return a[0].gid="",void o[r].push(a[0]);i=m(t,r,a),n[i.cid]=i,o[r].push(i)}c[t]={cid:t,gid:i.gid,widget:i,children:a.map(function(e){return e.cid})}}),i()(o).forEach(function(e){var n=a()(e,2),r=n[0],o=n[1],i=r===t?"root":r;c[i]={cid:i,children:o.sort(v).map(function(e){return e.cid})}});var u=[];for(var l in n)"group"===n[l].name&&void 0===c[l]&&(delete n[l],u.push(l));for(var d in c){var p=c[d].children;c[d].children=p.filter(function(e){return!u.includes(e)})}return{widgetMap:n,groupMap:c}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:MB.currentScreen.cid),n=t.widgetMap,r=t.groupMap,o={cid:"root",children:[]};return r.root.children.forEach(function(e){return o.children.push(g(e,r,n))}),{widgetMap:n,groupMap:r,widgetTreeData:o}},m=function(e,t,n){var r=n[n.length-1],a=r.primary_fixed;return a!==Widget.FIXED_TYPE.not_fixed&&n.forEach(function(e){return e.primary_fixed=Widget.FIXED_TYPE.not_fixed}),new Widget({cid:e,name:"group",link_cids:e,screen_cid:t,z:r.z,primary_fixed:a})},v=function(e,t){return e.z-t.z||e.timestamp-t.timestamp};var g=function e(t,n,r){var a=r[t];if("group"===a.name){var o=n[t]||{children:[]};return{cid:a.cid,type:"group",widget:a,children:o.children.map(function(t){return e(t,n,r)})}}if("panel"===a.name){var i=a.ct().cscreens();return{cid:a.cid,type:"panel",widget:a,children:i.map(function(t){var a=n[t.cid]?n[t.cid].children:[];return{cid:t.cid,widget:t,type:"panel-screen",children:a.map(function(t){return e(t,n,r)})}})}}return{cid:a.cid,type:"widget",widget:a,children:[]}}},gQMU:function(e,t,n){var r=n("0ZTe")("toUpperCase");e.exports=r},gX9a:function(e,t,n){e.exports={"play-setting-menu":"_1FA8P7EgiQtr3ukFbj9cuo"}},h5AQ:function(e,t,n){n("hRZT"),e.exports=n("WEpk").Number.isInteger},hRZT:function(e,t,n){var r=n("Y7ZC");r(r.S,"Number",{isInteger:n("DNkW")})},hgQt:function(e,t,n){var r=n("Juji"),a=n("4sDh");e.exports=function(e,t){return null!=e&&a(e,t,r)}},"j+XH":function(e){e.exports={a:{"zh-CN":{iphone:"PingFangSC",ipad:"PingFangSC",apple_watch:"PingFangSC",android:"SourceHanSansSC",customize:"SourceHanSansSC",web:"SourceHanSansSC"},en:{iphone:"SFUIText",ipad:"SFUIText",apple_watch:"SFUIText",android:"Roboto",customize:"Arial",web:"Arial"}},b:["SFUIText","Roboto","Arial","Courier New","Helvetica","Times New Roman"]}},jaNy:function(e,t,n){e.exports=n("UDep")},"jbM+":function(e,t,n){var r=n("R/W3");e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},jl5L:function(e,t,n){var r=n("Sxd8"),a=n("tLB3"),o=n("dt0z"),i=Math.min;e.exports=function(e){var t=Math[e];return function(e,n){if(e=a(e),n=null==n?0:i(r(n),292)){var c=(o(e)+"e").split("e"),s=t(c[0]+"e"+(+c[1]+n));return+((c=(o(s)+"e").split("e"))[0]+"e"+(+c[1]-n))}return t(e)}}},jybS:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n("cJHP"),a=n.n(r),o=n("lwsE"),i=n.n(o),c=n("W8MJ"),s=n.n(c),u=n("a1gu"),l=n.n(u),d=n("Nsbk"),p=n.n(d),f=n("7W2i"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),S=n("uavl"),E=n("JTWS"),x=function(e){function t(){return i()(this,t),l()(this,p()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=e.postfix,r=e.top,o=e.left,i=Object(E.a)(t,n),c=t.top,s=t.left;a()(t,{top:r,left:o});var u=Object(E.b)(t,"p");a()(t,{top:c,left:s});var l=t.v&&Link.find(t.link_cids),d=l?l.cid:"",p=l&&"tap"!==l.gesture?l.gesture:"";return n&&"pg"===t.name&&!l?null:w.a.createElement("div",{"data-cid":t.cid,"data-link_cid":d,className:i,id:"widget".concat(t.cid).concat(n),style:u},Object(S.a)(t,!0),w.a.createElement("div",{className:"region gesture ".concat(p)}))}}]),t}(b.PureComponent);v()(x,"propTypes",{widget:y.a.object,postfix:y.a.string,top:y.a.number.isRequired,left:y.a.number.isRequired})},kUAk:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=function(e){var t,n,a,i=e.extractorList,c=e.trimComment,s=function(){var e={fragList:t,urlMap:n,fontInfo:a};return t=[],n={},a={fontFaceMap:{},fontFamilySet:new Set},e};return s(),{getOutput:s,collect:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&c&&(e=c(e)),e){var l=function(e){return void 0===n[e]&&(n[e]={urlString:e,originUrl:s,dataUrl:""}),n[e]},d=i.reduce(function(e,t){return e.reduce(function(e,n){return t(e,n,l)},[])},[e]);if(t=t.concat(d),!u&&f.test(e)){for(var h,v=function(e){var t=r(m(e),1)[0],n=[];if(t&&C([],e,function(e){return n.push(l(e))}),n.length){var i="".concat(t,"|").concat(g(e),"|").concat(b(e));void 0===a.fontFaceMap[i]?a.fontFaceMap[i]=new Set(n):o(a.fontFaceMap[i],n)}},y=0;h=p.exec(e);)v(r(h,1)[0]),o(a.fontFamilySet,m(e.slice(y,h.index))),y=p.lastIndex;o(a.fontFamilySet,m(e.slice(y)))}}}}};t.createFragCollector=a;var o=function(e,t){return t.forEach(e.add,e)},i=function(e,t){if(!e.global)throw new Error("[createUrlExtractor] global expected for regexpSearchBlock: ".concat(e));if(t.global)throw new Error("[createUrlExtractor] non-global expected for regexpExtractUrl: ".concat(t));return function(r,a,o){if("object"===n(a))return r.push(a),r;for(var i,c=0;null!==(i=e.exec(a));){var s=i[0],u=t.exec(s),l=u&&u[1];if(l){var d=i.index+u.index+u[0].indexOf(l),p=a.slice(c,d);r.push(p),r.push(o(l)),c=d+l.length}}return r.push(a.substr(c)),r}};t.createUrlExtractor=i;var c=/<!--([\s\S]*?)-->/g,s=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,u=i(/<img [^>]*>/g,/src=['"]([^'"]*)['"]/),l=/url\(['"]?([^)'"]*)['"]?\)/,d=i(/style=['"].*url\([^)]*\).*['"]/g,l),p=/@font-face\s+{[^}]+font-family[^}]+}/g,f=/font(-family)?\s*:/,h=/font(-family)?\s*:\s*([^;}>]+)\s*[;}>]?/g,m=function(e){for(var t,n=[],a=function(){var e=r(t,3),a=e[1],o=e[2];o&&o.split(",").forEach(function(e,t){0!==t||a||(e=(e=e.trim()).split(/["']$/.test(e)?/["']/:" ").filter(Boolean).pop());var r=S(e);r&&n.push(r)})};t=h.exec(e);)a();return n},v=/font-style\s*:\s*(\w+)/,g=function(e){return(v.exec(e)||[])[1]||"normal"},y=/font-weight\s*:\s*(\w+)/,b=function(e){var t=(y.exec(e)||[])[1];return"normal"===t?t="400":"bold"===t&&(t="700"),t||"400"},w=/^["'](.*)["']$/,S=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(w,"$1")};t.createHTMLFragCollector=function(){return a({extractorList:[u,d],trimComment:function(e){return e.replace(c,"")}})};var E=/url\([^)]*\)/g,x=i(E,l),C=i(E,/(\/?(\.?\.\/)*\b[-\w@:%_+.~#?&/=]+.(woff2|woff|ttf|svg))([?#][-\w%._#=]{1,256})?/);t.createCSSFragCollector=function(){return a({extractorList:[x,C],trimComment:function(e){return e.replace(s,"")}})}},knB1:function(e,t,n){"use strict";t.a={prefixAgo:null,prefixFromNow:"从现在开始",suffixAgo:"之前",suffixFromNow:null,seconds:"不到 1 分钟",minute:"大约 1 分钟",minutes:"%d 分钟",hour:"大约 1 小时",hours:"大约 %d 小时",day:"1 天",days:"%d 天",month:"大约 1 个月",months:"%d 月",year:"大约 1 年",years:"%d 年",numbers:[],wordSeparator:""}},l0oT:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i});var r=function(e){return Math.cos(e*Math.PI/180)},a=function(e){return Math.sin(e*Math.PI/180)},o=function(e,t,n){var r=t*Math.PI/180,a={x:n.x-e.x,y:n.y-e.y},o=a.x,i=a.y,c=o*Math.cos(r)-i*Math.sin(r),s=i*Math.cos(r)+o*Math.sin(r);return{x:c+e.x,y:s+e.y}},i=function(e,t,n){var r,a=e.scrollTop,o=t-a;r=0;!function t(){var i=c(r+=20,a,o,n);e.scrollTop=i,r<n&&setTimeout(t,20)}()},c=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}},"lm/5":function(e,t,n){var r=n("fmRc"),a=n("wF/u"),o=1,i=2;e.exports=function(e,t,n,c){var s=n.length,u=s,l=!c;if(null==e)return!u;for(e=Object(e);s--;){var d=n[s];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<u;){var p=(d=n[s])[0],f=e[p],h=d[1];if(l&&d[2]){if(void 0===f&&!(p in e))return!1}else{var m=new r;if(c)var v=c(f,h,p,e,t,m);if(!(void 0===v?a(h,f,o|i,c,m):v))return!1}}return!0}},lw2U:function(e,t,n){"use strict";var r=n("yLV6"),a=n.n(r),o=n("jaNy"),i=n.n(o),c=n("lwsE"),s=n.n(c),u=n("W8MJ"),l=n.n(u),d=function(){function e(){s()(this,e),this.timeoutMap=new i.a}return l()(e,[{key:"setTimeout",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var r=this,a=setTimeout(function(){t(),r.clearTimeout(e,t)},n);return this.setToken(e,t,a),a})},{key:"clearTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this.getToken(e,t);void 0!==n&&(clearTimeout(n),this.clearToken(e,t))})},{key:"clearTimeoutByKey",value:function(e){var t=this,n=this.timeoutMap.get(e);void 0!==n&&(n.forEach(function(n,r){return t.clearTimeout(e,r)}),this.timeoutMap.delete(e))}},{key:"clear",value:function(){var e=this;this.timeoutMap.forEach(function(t,n){return e.clearTimeoutByKey(n)})}},{key:"setToken",value:function(e,t,n){var r=this.timeoutMap.get(e);void 0===r&&(r=new i.a,this.timeoutMap.set(e,r)),r.set(t,n)}},{key:"getToken",value:function(e,t){var n=this.timeoutMap.get(e);if(n)return n.get(t)}},{key:"clearToken",value:function(e,t){var n=this.timeoutMap.get(e);n&&n.delete(t)}}]),e}(),p=function(){return(new Date).getTime()},f=function(){function e(){s()(this,e),this.mouseState={down:!1,moved:!1},this.scrollState={x:null,y:null,left:null,top:null,target:null},this.coolDownTime=p(),this.coolDownInterval=200}return l()(e,[{key:"isCoolDown",value:function(){var e=p()-this.coolDownTime;return this.coolDownTime+=e,e>this.coolDownInterval}},{key:"resetCoolDown",value:function(){this.coolDownTime-=this.coolDownInterval}},{key:"bindMobile",value:function(e){var t=e.onOrientationChange;window.onorientationchange&&window.addEventListener("orientationchange",t),window.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&t()})}},{key:"bindDesktop",value:function(e){var t=this,n=e.onAppMouseDown,r=e.onAppMouseMove;$("body").on("mousedown","#simulator",function(e){if(n(e,t.scrollState,t.mouseState))return!0;t.mouseState.down=!0,t.mouseState.moved=!1,t.scrollState.x=e.clientX,t.scrollState.y=e.clientY}).on("mousemove","#simulator",function(e){if(r(e,t.scrollState,t.mouseState))return!0;t.mouseState.moved=!0}),window.addEventListener("mouseup",function(){t.mouseState.down=!1,t.mouseState.moved=!1})}}]),e}(),h=n("980g"),m=n.n(h),v=n("MVZn"),g=n.n(v),y=n("upRB"),b={useTransform:!1,disableTouch:!1,disablePointer:!0,preventDefault:!0,ignoreEventException:function(e){var t=$(e.target).closest(".widget");if(t.length){if(t.hasClass("webpage"))return!0;if(t.hasClass("map_view"))return!0;if(t.find("input").length)return!0}var n=$(e.target).closest(".ppanel");if(n.length){var r=Panel.find(n.data("cid")),a=r.getState(MB.currentScreen.state_cid),o=r.mainState();if(o.height>a.height||o.width>a.width)return!0}return!1}},w=g()({},b,{probeType:3,scrollbars:!0,mouseWheel:!0,disableMouse:!1,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0}),S=function(){function e(){s()(this,e),this.iScrollMap={}}return l()(e,[{key:"clear",value:function(){this.destroyScrollBar()}},{key:"setObjectUrl",value:function(e,t){e&&(e.contentWindow?e.contentWindow.location.replace(t):e.setAttribute("src",t))}},{key:"deviceOrient",value:function(){return $(window).width()>$(window).height()?"landscape":"portrait"}},{key:"initScrollBar",value:function(e){if(!this.iScrollMap[e]){var t=document.querySelector("#pscreen".concat(e," .screen-content"));if(t){var n=MB.isMobile()?b:w,r=new window.IScroll(t,n),a=document.querySelector("#sticky-container");a&&(r.on("scroll",function(e){var n=t.querySelector(".widgets");a.querySelector("#stickies").style.marginTop=n.style.top}),$(t).on("wheel",function(e){t.offsetHeight!==t.scrollHeight&&e.stopPropagation()})),this.iScrollMap[e]=r}}}},{key:"toggleScrollBar",value:function(e){m()(this.iScrollMap).forEach(function(t){e?t.enable():t.disable()})}},{key:"refreshScrollBar",value:function(e){this.iScrollMap[e]&&this.iScrollMap[e].refresh()}},{key:"resetScreenScrollState",value:function(e){var t=this.iScrollMap[e];t&&t.scrollTo(0,0);var n=document.querySelector("#stickies");n&&(n.style.marginTop=0)}},{key:"destroyScrollBar",value:function(){m()(this.iScrollMap).forEach(function(e){$(e.wrapper).off("wheel"),e.destroy()}),this.iScrollMap={}}},{key:"resetScrollState",value:function(){m()(this.iScrollMap).forEach(function(e){return e.scrollTo(0,0)});var e=document.querySelector("#stickies");e&&(e.style.marginTop=0)}},{key:"setScreenBg",value:function(e){var t=Screen.find(e.data("cid"));e.css({"background-color":t.bg(),"background-image":t.bgimage?"url(".concat(t.getRealBgImage(),")"):""})}},{key:"setupSplash",value:function(e,t){e.w()>e.dH()?(t.css("top",0-e.dW()),t.width(e.dH()),t.height(e.dW())):(t.css("top",0),t.width(e.dW()),t.height("101%"))}},{key:"screenPreview",value:function(e){return'\n      <div id="pscreen'.concat(e.cid,'" class="pcanvas ').concat(e.orient(),'" data-cid="').concat(e.cid,'" data-orientation="').concat(e.orient(),'">\n        <div class="screen-header"></div>\n        <div class="screen-content">\n          <div class="widgets">\n            <div class="scontainer"></div>\n          </div>\n        </div>\n        <div class="screen-footer"></div>\n      </div>\n    ')}},{key:"getIsHighlight",value:function(){return Object(y.e)(MB.webpackInterface.store.getState())}},{key:"getIsScreenExpanded",value:function(){return Object(y.f)(MB.webpackInterface.store.getState())}}]),e}(),E=function(){function e(){s()(this,e)}return l()(e,[{key:"activeWidth",value:function(){return"portrait"===MB.currentScreen.orientation?MB.currentProject.width:MB.currentProject.height}},{key:"activeHeight",value:function(){return"portrait"===MB.currentScreen.orientation?MB.currentProject.height:MB.currentProject.width}},{key:"hideScreen",value:function(e){$(e).hide(),$(e).find(".iframe").each(function(e,t){MB.runner.runnerUtil.setObjectUrl(t,"about:blank")})}},{key:"doTransition",value:function(e,t,n,r){var a=this;n.enableTransition(r.delay()),t.enableTransition(r.delay()),(0===parseFloat(r.delay())||r.template&&-1!==e.indexOf("menu"))&&(e="none"),$.nextTick(function(){a[e](t,n,r)})}},{key:"none",value:function(e,t,n){t.addClass("active"),e.removeClass("active top"),this.hideScreen(e),MB.runner.doneTransition(t)}},{key:"slideIn",value:function(e,t,n,r,a,o){var i=this;e.transitionEnd(function(){e.removeClass("active"),t.addClass("active top"),i.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r),t[n](a)}},{key:"slidebottom",value:function(e,t,n){this.slideIn(e,t,"translateY",0-this.activeHeight(),0,n)}},{key:"slideleft",value:function(e,t,n){this.slideIn(e,t,"translateX",0-this.activeWidth(),0,n)}},{key:"slidetop",value:function(e,t,n){this.slideIn(e,t,"translateY",this.activeHeight(),0,n)}},{key:"slideright",value:function(e,t,n){this.slideIn(e,t,"translateX",this.activeWidth(),0,n)}},{key:"slideMenu",value:function(e,t,n,r,a){t.zindex("2"),e.css("z-index","101"),e.transitionEnd(function(){MB.runner.doneTransition(t)}),e[n](r)}},{key:"leftmenu",value:function(e,t,n){this.slideMenu(e,t,"translateX",this.activeWidth()*n.menu_offset/100,n)}},{key:"rightmenu",value:function(e,t,n){this.slideMenu(e,t,"translateX",0-this.activeWidth()*n.menu_offset/100,n)}},{key:"fixedIn",value:function(e,t,n,r,a){var o=this;t.addClass("top"),t.css("z-index","101"),t.transitionEnd(function(){0===r&&(e.removeClass("active"),t.addClass("active"),o.hideScreen(e)),MB.runner.doneTransition(t),0!==r&&t.css("z-index","101")}),t[n](r)}},{key:"topin",value:function(e,t,n){this.fixedIn(e,t,"translateY",0,n)}},{key:"popin",value:function(e,t,n){this.fixedIn(e,t,"translateY",0,n)}},{key:"slideleft2",value:function(e,t,n){this.fixedIn(e,t,"translateX",0,n)}},{key:"slideright2",value:function(e,t,n){this.fixedIn(e,t,"translateX",0,n)}},{key:"leftdrawer",value:function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(n.menu_offset-100)/100,n)}},{key:"rightdrawer",value:function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(100-n.menu_offset)/100,n)}},{key:"fixedOut",value:function(e,t,n,r,a){var o=this;t.zindex("2"),e.transitionEnd(function(){e.removeClass("active"),t.addClass("active"),o.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r)}},{key:"leftout",value:function(e,t,n){this.fixedOut(e,t,"translateX",0-this.activeWidth(),n)}},{key:"rightout",value:function(e,t,n){this.fixedOut(e,t,"translateX",this.activeWidth(),n)}},{key:"topout",value:function(e,t,n){this.fixedOut(e,t,"translateY",0-this.activeHeight(),n)}},{key:"popout",value:function(e,t,n){this.fixedOut(e,t,"translateY",this.activeHeight(),n)}},{key:"transitionHandler",value:function(e,t,n,r,a){switch("leftmenu"===e&&t.addClass("menu lmenu"),"rightmenu"===e&&t.addClass("menu rmenu"),"leftdrawer"===e&&n.addClass("drawer ldrawer"),"rightdrawer"===e&&n.addClass("drawer rdrawer"),e){case"popin":case"slidebottom":n.translate(0,a);break;case"topin":case"slidetop":n.translate(0,0-a);break;case"popout":case"none":case"leftout":case"rightout":case"topout":case"leftmenu":case"rightmenu":n.translate(0,0);break;case"slideright":case"slideleft2":case"leftdrawer":n.translate(0-r,0);break;case"slideleft":case"slideright2":case"rightdrawer":n.translate(r,0)}n[0].offsetHeight}}]),e}(),x=n("Kgbp"),C=n.n(x),k=n("cJHP"),_=n.n(k),M=n("17x9"),T=n.n(M),O=n("q1tI"),j=n.n(O),N=n("i8i4"),I=n.n(N),A=n("9DAG"),R=n("IB8Z"),L=n("gCaL"),P=n("2qqa"),D=function(){function e(){s()(this,e)}return l()(e,null,[{key:"updateScreenContentHeight",value:function(e){var t=document.querySelector("#pscreen".concat(e.cid)),n=t.querySelector(".widgets"),r=t.querySelector(".scontainer"),a=t.querySelector(".screen-header"),o=t.querySelector(".screen-footer"),i=e.headerHeight(),c=e.footerHeight();return a.style.height=i+"px",o.style.height=c+"px",n.style.height=e.height-(i+c)+"px",_()(r.style,{height:e.height+"px",marginTop:-i+"px"}),{$screen:t,$sheader:a,$sfooter:o,$scontainer:r}}},{key:"renderScreenContent",value:function(e,t,n,r){var a=this.updateScreenContentHeight(e),o=a.$screen,i=a.$sheader,c=a.$sfooter,s=a.$scontainer,u=Object(R.a)(Widget.irecords),l=Object(P.c)(e,n,t,u),d=Object(L.a)(l,e.cid).widgetTreeData;(I.a.render(j.a.createElement(A.a,{widgetTreeData:d}),s),I.a.render(j.a.createElement(B,{treeData:d,headerHeight:e.headerHeight()}),i),I.a.render(j.a.createElement(F,{treeData:d,footerHeight:e.footerHeight(),screenHeight:e.height}),c),r)&&C()(o.querySelectorAll(".widget, .group, .panel")).forEach(function(e){return e.style.transition=r});o.offsetWidth;var p=Object(P.b)(e,t,u),f=Object(L.a)(p,e.cid).widgetTreeData;I.a.render(j.a.createElement(A.a,{widgetTreeData:f}),s),I.a.render(j.a.createElement(B,{treeData:f,headerHeight:e.headerHeight()}),i),I.a.render(j.a.createElement(F,{treeData:f,footerHeight:e.footerHeight(),screenHeight:e.height}),c)}}]),e}(),B=function(e){var t=e.treeData,n=e.headerHeight,r=Object(P.d)(t,n);return j.a.createElement(A.a,{widgetTreeData:r})};B.propTypes={treeData:T.a.object,headerHeight:T.a.number};var F=function(e){var t=e.treeData,n=e.footerHeight,r=e.screenHeight,a=Object(P.a)(t,r,n);return j.a.createElement("div",{className:"footer-widgets",style:{marginTop:n-r}},j.a.createElement(A.a,{widgetTreeData:a}))};function U(e){e.Hammer=a.a,e.TimeoutBucket=d,e.EventBucket=f,e.RunnerUtil=S,e.TransitionUtil=E,e.ScreenRenderer=D}F.propTypes={treeData:T.a.object,footerHeight:T.a.number,screenHeight:T.a.number},n.d(t,"a",function(){return U})},lwmc:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("lSNA"),h=n.n(f),m=n("17x9"),v=n.n(m),g=n("q1tI"),y=n.n(g),b=n("PJYZ"),w=n.n(b),S=n("6XO9"),E=n("i6OX"),x=n("ctY3"),C=n("6x+O"),k=n("ujtX"),_=n.n(k),M=n("UbMB"),T=n.n(M).a.bind(_.a),O=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=s()(this,(e=l()(t)).call.apply(e,[this].concat(o))),h()(w()(w()(n)),"setElementRef",function(e){return n.item=e}),h()(w()(w()(n)),"handleExpand",function(e){n.props.handleScreenItemActions.handleExpand(e,n.props.screen)}),h()(w()(w()(n)),"handleActivate",function(e){n.props.handleScreenItemActions.handleActivate(e,n.props.screen)}),h()(w()(w()(n)),"handleDown",function(e){var t=n.props.handleScreenItemActions.handleDown;t&&t(e,n.props.screen)}),h()(w()(w()(n)),"handleNameChange",function(e){var t=n.props.handleScreenItemActions.handleNameChange;t&&t(e,n.props.screen)}),h()(w()(w()(n)),"handleEdit",function(){var e=n.props.handleScreenItemActions.handleEdit;e&&e(n.props.screen)}),h()(w()(w()(n)),"handleBlur",function(){n.props.handleScreenItemActions.handleBlur(n.props.screen)}),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){if(this.props.isActive&&!Object(C.d)(this.item)){var e=document.querySelector(".rn-content-body"),t=e.getBoundingClientRect(),n=this.item.getBoundingClientRect().bottom;e.scrollTop+=n-t.bottom+20}}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.screen,n=e.depth,r=e.isActive,a=e.isEditing,o=e.showExpander,i=e.renderItem,c=14*(n+1),s=!e.collapseKeySet.has(t.cid)?"caret-down":"caret-right";return y.a.createElement(S.Tooltip,{content:{hover:t.name},type:"block",duration:1e3,style:{width:"100%"}},y.a.createElement("div",{type:"linkable",ref:this.setElementRef,"data-cid":t.cid,onClick:this.handleActivate,onMouseDown:this.handleDown,onDoubleClick:this.handleEdit,style:{paddingLeft:c},className:T("rn-list-item",{active:r})},o&&y.a.createElement("a",{className:"expander",onClick:this.handleExpand,onDoubleClick:this.stopPropagation},y.a.createElement("i",{className:"fa fa-"+s})),y.a.createElement("div",{className:"screen-name"},y.a.createElement(E.b,{type:"dora",name:"file"}),y.a.createElement(x.a,{editing:a,className:"editable-span",value:MB.unescape(t.name),onChange:this.handleNameChange,onBlur:this.handleBlur})),!a&&i&&i(t)))}}]),t}(g.PureComponent);O.propTypes={depth:v.a.number,screen:v.a.object,isActive:v.a.bool,isEditing:v.a.bool,showExpander:v.a.bool,renderItem:v.a.func,handleScreenItemActions:v.a.shape({handleEdit:v.a.func,handleExpand:v.a.func,handleActivate:v.a.func,handleBlur:v.a.func,handleDown:v.a.func,handleNameChange:v.a.func,setAttr:v.a.func}),collapseKeySet:v.a.object},O.contextTypes={handleDown:v.a.func},n.d(t,"a",function(){return j});var j=function(e){function t(){return a()(this,t),s()(this,l()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.treeProps,n=e.isSearching,r=e.editingCid,a=e.activeCid,o=e.screenTreeMap,i=e.screenDataMap,c=e.collapseKeySet;return y.a.createElement("ol",{className:"screen-list"},0===o.root.length?y.a.createElement("div",{className:"not-match"},I18N.preview_panel.not_match):o.root.map(function(e){var s=e.cid;return y.a.createElement(N,{key:s,cid:s,depth:0,collapseKeySet:c,isSearching:n,editingCid:r,activeCid:a,screenDataMap:i,screenTreeMap:o,treeProps:t})}))}}]),t}(g.PureComponent);h()(j,"propTypes",{treeProps:v.a.object,isSearching:v.a.bool,editingCid:v.a.string,activeCid:v.a.string,screenTreeMap:v.a.object,screenDataMap:v.a.object,collapseKeySet:v.a.object});var N=function(e){function t(){return a()(this,t),s()(this,l()(t).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,n=e.cid,r=e.treeProps,a=e.depth,o=e.activeCid,i=e.editingCid,c=e.isSearching,s=e.screenTreeMap,u=e.screenDataMap,l=e.collapseKeySet,d=r.renderItem,p=r.handleScreenItemActions,f=u[n],h=!l.has(n),m=s[n],v=f.cid===o,g=f.cid===i,b=Boolean(!c&&m);return y.a.createElement("li",{className:"rn-content-item"},y.a.createElement(O,{depth:a,screen:f,isActive:v,isEditing:g,showExpander:b,renderItem:d,collapseKeySet:l,handleScreenItemActions:p}),m&&h&&y.a.createElement("ol",{type:"screen-list",className:"child-screens"},m.map(function(e){var n=e.cid;return y.a.createElement(t,{key:n,cid:n,depth:a+1,collapseKeySet:l,isSearching:c,editingCid:i,activeCid:o,screenDataMap:u,screenTreeMap:s,treeProps:r})})))}}]),t}(g.PureComponent);h()(N,"propTypes",{cid:v.a.string,treeProps:v.a.object,depth:v.a.number,isSearching:v.a.bool,editingCid:v.a.string,activeCid:v.a.string,screenTreeMap:v.a.object,screenDataMap:v.a.object,collapseKeySet:v.a.object})},"m/km":function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var r='<svg xmlns="http://www.w3.org/2000/svg" width="17" height="12"><path d="M1.25 6.5h1a1 1 0 0 1 1 1V10a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V7.5a1 1 0 0 1 1-1zM5.75 5h1a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm4.5-2h1a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm4.5-2h1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z" fill-rule="evenodd"/></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12"><path d="M8.007 2.787a8.64 8.64 0 0 1 5.953 2.379c.12.118.314.116.433-.004l1.156-1.166a.322.322 0 0 0-.003-.456 10.897 10.897 0 0 0-15.08 0 .322.322 0 0 0-.003.456L1.62 5.162c.119.12.312.122.433.004a8.641 8.641 0 0 1 5.954-2.379zm0 3.796c1.217 0 2.391.452 3.294 1.27a.31.31 0 0 0 .433-.006l1.155-1.167a.322.322 0 0 0-.005-.459 7.16 7.16 0 0 0-9.752 0 .322.322 0 0 0-.005.46l1.155 1.166a.31.31 0 0 0 .433.006 4.907 4.907 0 0 1 3.292-1.27zm2.219 2.784a.314.314 0 0 0-.01-.457 3.422 3.422 0 0 0-4.42 0 .314.314 0 0 0-.009.457l1.998 2.016a.312.312 0 0 0 .443 0l1.998-2.016z" fill-rule="nonzero"/></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="12"><path d="M2.667 1.333C1.747 1.333 1 2.08 1 3v6c0 .92.746 1.667 1.667 1.667h16.666C20.253 10.667 21 9.92 21 9V3c0-.92-.746-1.667-1.667-1.667H2.667zm0-1h16.666A2.667 2.667 0 0 1 22 3v6a2.667 2.667 0 0 1-2.667 2.667H2.667A2.667 2.667 0 0 1 0 9V3A2.667 2.667 0 0 1 2.667.333z" opacity=".35"/><path d="M23 4v4a2.17 2.17 0 0 0 0-4" opacity=".4"/><rect x="2" y="2.333" width="18" height="7.333" rx="1.333"/></svg>',i='<svg xmlns="http://www.w3.org/2000/svg" width="30" height="19" viewBox="0 0 30 19"><g fill="#5B6B73"><path d="M26.5 15L26 15 26 15.5 26 15 26.5 15ZM26 15.5L26 16 26 15.5ZM26.5 15L29 15 29 4 27 4 26 4 26.5 3.5 26 3 27 3 29 3C29.6 3 30 3.4 30 4L30 15C30 15.6 29.6 16 29 16L26.8 16 27 16 27 15 26.5 15ZM26.8 16L26.5 16 26.8 16ZM27 4L27 4 26.5 3.5 27 3 27 3 27 4ZM29 5L29 4 28 4 26 4 26 3 29 3C29.6 3 30 3.4 30 4L30 15C30 15.6 29.6 16 29 16L26 16 26 15 29 15 29 5Z"/><path d="M-1.5 5.5L-2 5.5-2 6-2 5.5-1.5 5.5ZM-2 6L-2 6.5-2 6ZM-1.5 5.5L1 5.5 1-5.5-1-5.5-2-5.5-1.5-6-2-6.5-1-6.5 1-6.5C1.6-6.5 2-6.1 2-5.5L2 5.5C2 6.1 1.6 6.5 1 6.5L-1.5 6.5-1 6.5-1 5.5-1.5 5.5ZM-1-6.5L-1-5.5-1-5.5-1.5-6-1-6.5-1-6.5ZM1-4.5L1-5.5 0-5.5-2-5.5-2-6.5 1-6.5C1.6-6.5 2-6.1 2-5.5L2 5.5C2 6.1 1.6 6.5 1 6.5L-2 6.5-2 5.5 1 5.5 1-4.5Z" transform="translate(2 9.5)scale(-1 1)"/><path d="M6 1L6 18 24 18 24 1 6 1ZM6 0L24 0C24.6 0 25 0.4 25 1L25 18C25 18.6 24.6 19 24 19L6 19C5.4 19 5 18.6 5 18L5 1C5 0.4 5.4 0 6 0Z"/><polygon points="7.4 15.4 6.6 14.6 10.9 10.4 13.9 12.3 19 6.3 23.4 10.6 22.6 11.4 19 7.7 14.1 13.7 11.1 11.6"/><path d="M10.5 8.5C9.4 8.5 8.5 7.6 8.5 6.5 8.5 5.4 9.4 4.5 10.5 4.5 11.6 4.5 12.5 5.4 12.5 6.5 12.5 7.6 11.6 8.5 10.5 8.5ZM10.5 7.5C11.1 7.5 11.5 7.1 11.5 6.5 11.5 5.9 11.1 5.5 10.5 5.5 9.9 5.5 9.5 5.9 9.5 6.5 9.5 7.1 9.9 7.5 10.5 7.5Z"/></g></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><g fill="#5B6B73"><path d="M13.4 11L1 11 1 21 21 21 21 11 17.6 11 15.5 9.3 13.4 11ZM1 10L13 10 15.5 8 18 10 21 10C21.6 10 22 10.4 22 11L22 21C22 21.6 21.6 22 21 22L1 22C0.4 22 0 21.6 0 21L0 11C0 10.4 0.4 10 1 10Z"/><path d="M15.5 6C16.9 6 18 4.9 18 3.5 18 2.1 16.9 1 15.5 1 14.1 1 13 2.1 13 3.5 13 4.9 14.1 6 15.5 6ZM15.5 7C13.6 7 12 5.4 12 3.5 12 1.6 13.6 0 15.5 0 17.4 0 19 1.6 19 3.5 19 5.4 17.4 7 15.5 7Z"/><path d="M15 3L15 2 16 2 16 3 17 3 17 4 16 4 16 5 15 5 15 4 14 4 14 3 15 3Z"/><polygon points="3 16.5 3 15.5 19 15.5 19 16.5"/></g></svg>'},mbVZ:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("Ev6p"),a="Channel's Buffer overflow!",o=1,i=3,c=4,s={isEmpty:r.o,put:r.r,take:r.r};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],n=new Array(e),r=0,s=0,u=0,l=function(t){n[s]=t,s=(s+1)%e,r++},d=function(){if(0!=r){var t=n[u];return n[u]=null,r--,u=(u+1)%e,t}},p=function(){for(var e=[];r;)e.push(d());return e};return{isEmpty:function(){return 0==r},put:function(d){if(r<e)l(d);else{var f=void 0;switch(t){case o:throw new Error(a);case i:n[s]=d,u=s=(s+1)%e;break;case c:f=2*e,n=p(),r=n.length,s=n.length,u=0,n.length=f,e=f,l(d)}}},take:d,flush:p}}var l={none:function(){return s},fixed:function(e){return u(e,o)},dropping:function(e){return u(e,2)},sliding:function(e){return u(e,i)},expanding:function(e){return u(e,c)}}},mfFm:function(e,t,n){e.exports={"global-attributes":"_2WW4d3N_h0ptLMSIJiNVZb","layer-name":"lHQ2gR47fywCXPyoNOQt-",header:"_3jioi4K2B2yOsbmLPodNyM",panel:"YjFkC1l7Pq0gsLgl2dq1C",container:"_3_XaUvUOzD1MeTPSGbtmJY",copyBtn:"M4cHnCN2XUVYXQ2Ez48Vk _2TAID7TnzAXoGA-jTBc04W","layer-load":"_3f1x0LwZiq_7c8_TaXvySo",spinner:"xKsPnP6rU53wBVIz85ai_","rotate-infinite":"_2ch38-nvB58TUdWQkKGJJo"}},mnpx:function(e,t,n){},mquD:function(e,t,n){e.exports={"comment-panel":"_2dY-aWly_WWZi-IGQ1xR4-","comment-title":"YqyjN9C59bWFJEndyU0x9","comment-thread":"_2JvGmMk3y1PjWCGDPVg4a3","content-reply":"_3VE5NwR9zvovJS1MW0BZbq",login:"_3t2Lcd3f0_H-u_GDe-KBQH",comment:"_2VqB6xZz3ZMhBswl_nFEOz","comment-content":"_2v8U22g6c4LkqK5BL4vOFl",edited:"_1unY7SoIkJpoCKI6YJj0dE","container-bottom":"_3z71HOTNMRJiMUXUxvQLa6",time:"dqXdK9pZPQyb9a-WoxDNQ","reply-sort":"_2bgB1qJyRonhAvn0gkm7vp","btn-reply":"_2CrlxaEt8G-J3ewI5c7TJD","header-container":"_1-DcnhePZGe-xicn8UM249","header-tool":"_3xcyCaTVLHlRdVbQjfMz9E","container-reply":"_2ApZU5bkYTTCyGA9Q2EwqQ",expand:"TuQgu47qydj8ZTQmbo3DZ","container-main":"_2OH87H-fOvv_HWhtjy1Arh","content-empty":"_3ICZ7qT9DBPhbMD02jZj25","add-comment":"_9237vxHyzd4yQZU3S8N9b","dropdown-reply":"_233Za55WRs0z9Ihd8UD-Rt","dropdown-on":"_6n2zhtMRn75CqBn6WWw3_","dropdown-off":"_3PfmWXeb9PKYb5ow8kDTMe","comment-focus":"hlPioZEAv4Td4VsmcHhIc","comment-noFocus":"_2j-cKmNGnUn_tT7eJlcXxe","reply-header":"xUcJzT-vOVVhL37FQnaC-","reply-content":"_1GkaiuxL0rWoniFDn2WBfK","remove-background":"e3k5YtTFT1_zohcDsL8Zv"}},mwIZ:function(e,t,n){var r=n("ZWtO");e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},mxnB:function(e,t,n){},nLLt:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=function(e){return e.reduce(function(e,t){var n=function(e){return e instanceof Array?e:e?[e]:[]}(t);return n.length?e.reduce(function(e,t){return n.forEach(function(n){return e.push("".concat(t,"-").concat(n))}),e},[]):e},["@"])},s=function(){function e(){a()(this,e),this.permissionMap={}}return i()(e,[{key:"set",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];c(n).forEach(function(t){return e.permissionMap[t]=!0})}},{key:"check",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=c(n);return!!a.length&&a.every(function(t){return e.permissionMap[t]})}}]),e}(),u=["owner","admin","editor","viewer","guest"],l=u.reduce(function(e,t,n){return e[t]=n,e},{}),d=function(e){return u.filter(function(t,n){return l[t]<=l[e]})},p=new s,f=p.set.bind(p),h=p.check.bind(p);f("project",["delete","create"],d("owner")),f("project-update",d("editor")),f("project-read-whitelist",d("viewer")),f("project-read",d("guest")),f("team-project-delete",d("admin")),f("team-project-create",d("editor")),f("team-project-read-whitelist",d("viewer")),f("team-project-read",d("guest")),f("collaborator",["delete","create","update"],["editor","viewer"],d("owner")),f("collaborator-read",["editor","viewer"],d("viewer")),f("team-collaborator",["delete","create","update"],["admin"],d("owner")),f("team-collaborator",["delete","create","update"],["editor","viewer"],d("admin")),f("team-collaborator-read",["admin","editor","viewer"],d("viewer"))},naIL:function(e,t,n){e.exports={"screen-panel":"_2acqq9r0j1_EMjnbcJAZI7"}},nc5A:function(e,t,n){e.exports={search:"WRZ4Gj-rorUUJi1xYvpVR"}},nhzr:function(e,t,n){n("fW1p"),e.exports=n("WEpk").Object.values},oKLx:function(e,t,n){},oSKl:function(e,t,n){},oZtI:function(e,t,n){"use strict";var r=n("tw9P");n.d(t,"f",function(){return r.i}),n.d(t,"d",function(){return r.g}),n.d(t,"a",function(){return r.b}),n.d(t,"b",function(){return r.d}),n.d(t,"c",function(){return r.f}),n.d(t,"e",function(){return r.h}),n.d(t,"g",function(){return r.j})},or5M:function(e,t,n){var r=n("1hJj"),a=n("QoRX"),o=n("xYSL"),i=1,c=2;e.exports=function(e,t,n,s,u,l){var d=n&i,p=e.length,f=t.length;if(p!=f&&!(d&&f>p))return!1;var h=l.get(e);if(h&&l.get(t))return h==t;var m=-1,v=!0,g=n&c?new r:void 0;for(l.set(e,t),l.set(t,e);++m<p;){var y=e[m],b=t[m];if(s)var w=d?s(b,y,m,t,e,l):s(y,b,m,e,t,l);if(void 0!==w){if(w)continue;v=!1;break}if(g){if(!a(t,function(e,t){if(!o(g,t)&&(y===e||u(y,e,n,s,l)))return g.push(t)})){v=!1;break}}else if(y!==b&&!u(y,b,n,s,l)){v=!1;break}}return l.delete(e),l.delete(t),v}},os03:function(e,t,n){"use strict";n.d(t,"d",function(){return b}),n.d(t,"b",function(){return w}),n.d(t,"c",function(){return E}),n.d(t,"a",function(){return C}),n.d(t,"f",function(){return k}),n.d(t,"g",function(){return _}),n.d(t,"e",function(){return M});var r=n("J4zp"),a=n.n(r),o=n("l00i"),i=n.n(o),c=n("cJHP"),s=n.n(c),u=n("8fIB"),l=n.n(u),d=n("o0o1"),p=n.n(d),f=n("yXPU"),h=n.n(f),m=n("eTac"),v=n.n(m),g=n("jaNy"),y=n.n(g),b=function(e){var t=e.func,n=e.delay,r=e.queueTask,a=void 0===r?setTimeout:r,o=e.cancelTask,i=void 0===o?clearTimeout:o,c=null,s=function e(){c&&(c=a(e,n),t())};return{start:function(){c||(c=a(s,n))},stop:function(){c&&(i(c),c=null)},isActive:function(){return Boolean(c)}}},w=function(){var e=function(){var e=new y.a;return{setMap:e,clear:function(){return e.clear()},addListener:function(t,n){var r=e.get(t);r?r.add(n):e.set(t,new v.a([n]))},removeListener:function(t,n){var r=e.get(t);r&&r.delete(n),r&&0===r.size&&e.delete(t)}}}(),t=e.setMap;return{clear:e.clear,addEventListener:e.addListener,removeEventListener:e.removeListener,dispatchEvent:function(e){var n=t.get(e.type);n&&n.forEach(function(t){return t(e)})}}},S=function(){},E=function(e){var t=e.onError,n=e.doSave,r=e.beforeSave,a=void 0===r?S:r,o=e.afterSave,i=void 0===o?S:o,c=[],s=!1,u={},l=function(e){u=e},d=function(){var e=h()(p.a.mark(function e(){var t,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(),t=c,c=[],s=!0,e.next=6,x(n,t,l);case 6:if(r=e.sent,o=r.error,s=!1,u={},o&&console.error("[Error][saveAsync] savingDataQueue: ".concat(t.length,", dataQueue: ").concat(c.length),o),!o){e.next=13;break}throw o;case 13:i();case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return{clear:function(){c=[]},add:function(e){return c.push(e)},save:function(){!s&&c.length&&d().catch(t)},filter:function(e){c=c.filter(e)},getLength:function(){return c.length},getIsSaving:function(){return s},getSavingState:function(){return u}}},x=function(){var e=h()(p.a.mark(function e(t){var n,r,a,o,i,c=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,a=c.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=c[i];return e.next=4,t.apply(void 0,o);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r=e.t0;case 10:return e.abrupt("return",{result:n,error:r});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),C=function(e,t){for(var n=[],r=0,a=e.length;r<a;r+=t)n.push(e.slice(r,r+t));return n},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new l.a(function(t){return setTimeout(t,e)})},_=function(){var e=h()(p.a.mark(function e(t){var n,r,a,o,i,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.task,r=t.onError,a=t.timeout,o=t.retry,i=void 0===o?8:o,c=0;case 2:return e.prev=3,e.next=6,l.a.race([n({attempt:c,timeout:a}),new l.a(function(e,t){return setTimeout(function(){return t(new Error("[TIMEOUT] timeout after ".concat(a)))},a)})]);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(c>=i)){e.next=13;break}throw e.t0;case 13:return e.next=15,r(e.t0,{attempt:c,timeout:a});case 15:c++;case 16:e.next=2;break;case 18:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new l.a(function(n,r){var o=t.method,c=void 0===o?"GET":o,u=t.headers,l=t.body,d=t.timeout,p=void 0===d?6e4:d,f=function(t,n){return s()(new Error(t),{status:n,url:e,method:c})},h=new XMLHttpRequest,m=!1,v=function(){!m&&h.abort(),r(f("NETWORK_TIMEOUT",-1)),m=!0};h.open(c,e),u&&i()(u).forEach(function(e){var t=a()(e,2),n=t[0],r=t[1];return h.setRequestHeader(n,r)}),h.timeout=Number(p)||0,h.responseType="text",h.onerror=function(){r(f("NETWORK_ERROR",-1)),m=!0},h.ontimeout=v,h.onreadystatechange=function(){var e=h.readyState,t=h.status;if(2===e){if(m=!0,0===t)return r(f("STATUS_ERROR",-1));var a=t>=200&&t<300,o=T(h,f),i=o.text,c=o.json;n({status:t,ok:a,text:i,json:c})}},h.send(l||null),p&&setTimeout(v,p)})},T=function(e,t){var n,r=!1;setTimeout(function(){n||(e.abort(),r=!0)});var a=function(){if(void 0===n){if(r)throw t("PAYLOAD_ALREADY_DROPPED",-1);n=new l.a(function(n,r){e.onerror=function(){return r(t("PAYLOAD_ERROR",-1))},e.ontimeout=function(){return r(t("PAYLOAD_TIMEOUT",-1))},e.onreadystatechange=function(){var a=e.readyState,o=e.status;if(4===a)return 0===o?r(t("PAYLOAD_STATUS_ERROR",-1)):void n(e.response)}})}return n};return{text:a,json:function(){return a().then(function(e){return JSON.parse(e)})}}}},p7Sh:function(e,t,n){e.exports={"thumbnail-container":"_1iU7yzdbdyvTcm4cDCjwwm"}},peLG:function(e,t,n){},peh1:function(e,t,n){"use strict";function r(e,t){return e===t}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,a=null;return function(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}(t,n,arguments)||(a=e.apply(null,arguments)),n=arguments,a}}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,c=r.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),u=e.apply(void 0,[function(){return i++,c.apply(null,arguments)}].concat(n)),l=a(function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return u.apply(null,e)});return l.resultFunc=c,l.recomputations=function(){return i},l.resetRecomputations=function(){return i=0},l}}t.__esModule=!0,t.defaultMemoize=a,t.createSelectorCreator=o,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var i=t.createSelector=o(a)},q09E:function(e,t,n){"use strict";var r=n("Ev6p"),a={done:!0,value:void 0},o={};function i(e){return r.n.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",i=void 0,c=t;function s(t,n){if(c===o)return a;if(n)throw c=o,n;i&&i(t);var r=e[c](),s=r[0],u=r[1],l=r[2];return i=l,(c=s)===o?a:u}return Object(r.q)(s,function(e){return s(null,e)},n,!0)}var s=n("tw9P"),u=n("92lH");function l(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var l={done:!1,value:Object(s.i)(e)},d=void 0,p=function(e){return d=e};return c({q1:function(){return["q2",l,p]},q2:function(){return d===u.a?[o]:["q1",function(e){return{done:!1,value:s.f.apply(void 0,[t].concat(r,[e]))}}(d)]}},"q1","takeEvery("+i(e)+", "+t.name+")")}function d(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var l={done:!1,value:Object(s.i)(e)},d=function(e){return{done:!1,value:s.f.apply(void 0,[t].concat(r,[e]))}},p=void 0,f=void 0,h=function(e){return p=e},m=function(e){return f=e};return c({q1:function(){return["q2",l,m]},q2:function(){return f===u.a?[o]:p?["q3",function(e){return{done:!1,value:Object(s.e)(e)}}(p)]:["q1",d(f),h]},q3:function(){return["q1",d(f),h]}},"q1","takeLatest("+i(e)+", "+t.name+")")}var p=n("mbVZ");function f(e,t,n){for(var a=arguments.length,l=Array(a>3?a-3:0),d=3;d<a;d++)l[d-3]=arguments[d];var f=void 0,h=void 0,m={done:!1,value:Object(s.a)(t,p.a.sliding(1))},v={done:!1,value:Object(s.d)(r.j,e)},g=function(e){return f=e},y=function(e){return h=e};return c({q1:function(){return["q2",m,y]},q2:function(){return["q3",{done:!1,value:Object(s.i)(h)},g]},q3:function(){return f===u.a?[o]:["q4",function(e){return{done:!1,value:s.f.apply(void 0,[n].concat(l,[e]))}}(f)]},q4:function(){return["q2",v]}},"q1","throttle("+i(t)+", "+n.name+")")}n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return f})},q3nj:function(e,t,n){"use strict";var r=n("MVZn"),a=n.n(r),o=n("o0o1"),i=n.n(o),c=n("oZtI"),s=n("t3Un"),u=function(e){return Object(s.b)("".concat("/api/v2/projects","/").concat(e,"/sketch_slices.json"))},l=function(e){return Object(s.b)("".concat("/api/v2/projects","/").concat(e,"/build/slices_zips.json"),null,{method:"POST"})},d=i.a.mark(h),p=i.a.mark(m),f=i.a.mark(v);function h(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([m()]);case 2:case"end":return e.stop()}},d,this)}function m(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)("reducer:slice:init",v);case 2:case"end":return e.stop()}},p,this)}function v(e){var t,n,r,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)();case 2:if(t=e.sent,n=t.model.current.projectCid,e.prev=4,!n){e.next=14;break}return e.next=8,Object(c.b)(u,n);case 8:r=e.sent,o=r.slices,s=o.filter(g),r.slices=s,e.next=15;break;case 14:r={slices:[{id:1,name:"test",screen_cid:"sssss1232",image:"/uploads/images/14/149316/artboard_1506665060.png",src:"ssss",image_set:[{size:1,src:"src"}],image_set_zip:"src"},{id:2,name:"test",screen_cid:"sssss1232",image:"/uploads/images/14/149316/artboard_1506665060.png",image_set:[{size:1,src:"src"}],image_set_zip:"src"},{id:3,name:"test",screen_cid:"sssss1232",image:"/uploads/images/14/149316/artboard_1506665060.png",image_set:[{size:1,src:"src"}],image_set_zip:"src"}]};case 15:return e.next=17,Object(c.d)({type:"reducer:slice:success",payload:a()({},r)});case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(4),console.log(e.t0.stack),e.next=24,Object(c.d)({type:"reducer:slice:fail"});case 24:case"end":return e.stop()}},f,this,[[4,19]])}var g=function(e){var t=e.width,n=void 0===t?1:t,r=e.height;return n>0&&(void 0===r?1:r)>0},y=n("980g"),b=n.n(y),w=function(e){return window.MBArtboards?{artboards:b()(window.MBArtboards).map(function(e){return e.artboard})}:Object(s.b)("".concat("/api/v2/projects/").concat(e,"/artboards.json"))},S=i.a.mark(C),E=i.a.mark(k),x=i.a.mark(_);function C(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([k()]);case 2:case"end":return e.stop()}},S,this)}function k(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)("reducer:artboards:init",_);case 2:case"end":return e.stop()}},E,this)}function _(e){var t,n,r,o,s,u,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)();case 2:if(t=e.sent,n=t.model,r=n.current.projectCid,o=n.screens,e.prev=4,s={},o.forEach(function(e){var t=e.width,n=e.height,r=e.cid;s[r]={width:t,height:n}}),!r){e.next=13;break}return e.next=10,Object(c.b)(w,r);case 10:u=e.sent,(l=u.artboards).length>0&&l.forEach(function(e){var t=e.width,n=e.height,r=e.screen_cid;s[r]={width:t,height:n}});case 13:return s={artboards:s},e.next=16,Object(c.d)({type:"reducer:artboards:success",payload:a()({},s)});case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(4),console.log(e.t0.stack),e.next=23,Object(c.d)({type:"reducer:artboards:fail"});case 23:case"end":return e.stop()}},x,this,[[4,18]])}var M=n("ANjH"),T=n("/MKj"),O=n("lwsE"),j=n.n(O),N=n("W8MJ"),I=n.n(N),A=n("a1gu"),R=n.n(A),L=n("Nsbk"),P=n.n(L),D=n("7W2i"),B=n.n(D),F=n("PJYZ"),U=n.n(F),W=n("lSNA"),z=n.n(W),H=n("17x9"),q=n.n(H),V=n("q1tI"),Y=n.n(V),X=n("M8nv"),Z=n.n(X),K=n("TSYQ"),G=n.n(K),J=n("pVnL"),Q=n.n(J),ee=n("J4zp"),te=n.n(ee),ne=n("/5+U"),re=n("l0oT"),ae=(n("zZYZ"),function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"onMouseEnter",function(e){-1!==n.props.activeLayerID&&n.props.enterLayer(n.props.layer.id)}),z()(U()(U()(n)),"onMouseLeave",function(e){-1!==n.props.activeLayerID&&n.props.enterLayer(-1)}),z()(U()(U()(n)),"handleClick",function(){var e=n.props,t=e.requestSelectLayer,r=e.layer.id,a=e.handleShowlayerInfo;t(r),a(!0)}),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.layer,n=e.activeLayerID,r=e.enteredLayerID,a=e.unit,o=e.ratio,i=t.id,c=t.src_width,s=t.src_height,u=t.rotation||0,l=i===n,d=i===r||-1===r,p=G()("Layer",{"is-active":l,"is-focus":d}),f=t.kind?c:c*Object(re.a)(u)+s*Object(re.d)(u),h=t.kind?s:c*Object(re.d)(u)+s*Object(re.a)(u),m=Object(ne.a)(f,o),v=Object(ne.a)(h,o),g=t.kind?Object(ne.a)(t.origin_width||c,o):Object(ne.a)(c,o),y=t.kind?Object(ne.a)(t.origin_height||s,o):Object(ne.a)(s,o);return Y.a.createElement("div",{className:p,"data-width":"".concat(m).concat(a),"data-height":"".concat(v).concat(a),"data-lid":i,onClick:this.handleClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l&&Y.a.createElement("span",{className:"LayerCorner left top"}),l&&Y.a.createElement("span",{className:"LayerCorner left bottom"}),l&&Y.a.createElement("span",{className:"LayerCorner right top"}),l&&Y.a.createElement("span",{className:"LayerCorner right bottom"}),l&&0!==u&&Y.a.createElement("span",{className:"rect_info"},"".concat(g," x ").concat(y),"  ","".concat(u,"°")))}}]),t}(V.Component));z()(ae,"propTypes",{layer:q.a.object,requestSelectLayer:q.a.func,enterLayer:q.a.func,handleShowlayerInfo:q.a.func,activeLayerID:q.a.oneOfType([q.a.number,q.a.string]),enteredLayerID:q.a.oneOfType([q.a.number,q.a.string]),unit:q.a.string,ratio:q.a.number});var oe=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,n=e.layer,r=e.parentRect,a=e.treeProps,o=n.width,i=n.height,c=n.top,s=n.left,u=n.z,l=n.childrenLayers;if(!1===n.v)return null;var d="layer"===n.kind?0:n.rotation||0,p=Object(ne.g)({width:o,height:i,rotate:d,top:c,left:s}),f=te()(p,4),h=f[0],m={top:c,left:s,width:o,height:i},v=f[1],g=f[2],y=f[3],b={top:(h-r.top)/r.height*100+"%",left:(v-r.left)/r.width*100+"%",width:g/r.width*100+"%",height:y/r.height*100+"%",zIndex:u||0};return Y.a.createElement("div",{"data-id":n.id,className:"layer-tree-node",style:b},Y.a.createElement(ae,Q()({layer:n},a)),l&&l.length>0&&l.map(function(e){return Y.a.createElement(t,{key:e.id,layer:e,parentRect:m,treeProps:a})}))}}]),t}(V.Component);z()(oe,"propTypes",{layer:q.a.object,parentRect:q.a.object,treeProps:q.a.object});var ie=n("RIqP"),ce=n.n(ie),se=n("cJHP"),ue=n.n(se),le=n("SA+Z"),de=n.n(le),pe=n("gCaL"),fe=n("0k54"),he=function(e){if(0===e.length)return[];var t=e[0].screen_cid;return Object(pe.a)(e.map(function(e){return new Widget(e)}),t).widgetTreeData.children.map(function(e){return me(e)})},me=function e(t){var n=t.cid,r=t.type,o=t.widget,i=t.children;if("widget"===r)return o;if("group"===r){var c=Object(fe.f)(t),s=c.minX,u=c.minY,l=c.maxX,d=c.maxY;return a()({},o,{id:n,width:l-s,height:d-u,top:u,left:s,childrenLayers:i.map(function(t){return e(t)})})}},ve=(n("oKLx"),function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"state",{ifHideLayer:!1}),z()(U()(U()(n)),"onMouseLeave",function(){"number"==typeof n.props.activeLayerID?n.props.enterLayer("artboard-base"):n.props.enterLayer(n.props.currentScreen.cid)}),n}return B()(t,e),I()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.currentScreen,n=e.activeLayerID,r=this.props,a=r.currentScreen,o=r.enterLayer;t!=a&&o(-1),-1!==n&&n?this.setState({ifHideLayer:!1}):this.setState({ifHideLayer:!0})}},{key:"render",value:function(){var e=this.props,t=e.isShowLayerList,n=e.layers,r=e.currentScreen,a=e.unit,o=e.ratio,i=e.activeLayerID,c=e.enteredLayerID,s=e.enterLayer,u=e.requestSelectLayer,l=e.handleShowlayerInfo,d=this.state.ifHideLayer,p=function(e){var t=de()(e),n=t[0],r={childrenLayers:[]},a={},o=[],i=[];t.slice(1).forEach(function(e){var t=e.id,n=e.panel_cid;"artboard-base"===t?ue()(r,e):"number"==typeof t?r.childrenLayers.push(e):n?a[n]?a[n].push(e):a[n]=[e]:"panel"===e.name?o.push(e):i.push(e)}),o.forEach(function(e){return e.childrenLayers=a[e.cid]});var c=(r.childrenLayers.length?[r]:[]).concat(o,ce()(he(i))).sort(function(e,t){return e.z-t.z||e.timestamp-t.timestamp});return[n].concat(ce()(c))}(n),f=ge(a,o,s,i,c,u,l),h={top:0,left:0,width:r.width,height:r.height};return Y.a.createElement("div",{className:G()("LayerList",{hiddenLayer:d&&t}),onMouseLeave:this.onMouseLeave},p.map(function(e){return Y.a.createElement(oe,{key:e.id,layer:e,parentRect:h,treeProps:f})}))}}]),t}(V.Component));z()(ve,"propTypes",{isSpaceDown:q.a.bool,layers:q.a.array,requestSelectLayer:q.a.func,resetLayer:q.a.func,artboard:q.a.object,enterLayer:q.a.func,handleShowlayerInfo:q.a.func,currentScreen:q.a.object,activeLayerID:q.a.oneOfType([q.a.number,q.a.string]),enteredLayerID:q.a.oneOfType([q.a.number,q.a.string]),isShowLayerList:q.a.bool,unit:q.a.string,ratio:q.a.number,dispatch:q.a.func});var ge=Object(ne.h)(function(e,t,n,r,a,o,i){return{unit:e,ratio:t,enterLayer:n,activeLayerID:r,enteredLayerID:a,requestSelectLayer:o,handleShowlayerInfo:i}}),ye="REQUEST_SELECT_LAYER",be=function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:ye,payload:{layerID:e}}},we="SELECT_LAYER",Se=function(e){return{type:we,payload:{layerID:e}}},Ee="ACTIVATE_LAYER",xe=function(e){return MB.event("点击了 Layer 元素","运行页"),{type:Ee,payload:{layerID:e}}},Ce="ENTER_LAYER",ke=Object(T.connect)(function(e){var t=e.container,n=t.common.keyFlags.isSpaceDown,r=t.layers,a=r.resourceByScreen,o=r.visibilityScreenID,i=r.activeLayerID,c=r.enteredLayerID,s=t.previewSetting,u=s.unit,l=s.ratio,d=s.isShowColorPicker,p=e.model,f=p.current.screenCid,h=p.screens.find(function(e){return e.cid===f}),m=a[o]&&a[o].layers,v=a[o]&&a[o].artboard;return{isSpaceDown:n,layers:m||[],artboard:v,currentScreen:h,activeLayerID:i,enteredLayerID:c,isShowLayerList:!d,unit:u,ratio:l}},function(e){return{requestSelectLayer:function(t){e(be(t))},enterLayer:function(t){e(function(e){return{type:Ce,payload:{layerID:e}}}(t))},handleShowlayerInfo:function(t){e({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:t}})}}})(ve),_e=n("J2m7"),Me=n.n(_e),Te=(n("UZR7"),function(e){var t=e.layer,n=t.top,r=t.left,a=t.width,o=t.height,i=t.rotation,c=void 0===i?0:i,s=t.kind,u=e.currentScreen,l=Object(ne.g)({width:a,height:o,left:r,top:n,rotate:s?0:c}),d=te()(l,4),p=d[0],f=d[1],h=d[2],m=d[3],v=u.width,g=u.height,y={top:"".concat(p/g*100,"%")},b={left:"calc(".concat((f+h)/v*100,"% - 1px)")},w={top:"calc(".concat((p+m)/g*100,"% - 1px)")},S={left:"".concat(f/v*100,"%")};return Y.a.createElement("ul",{className:"LayerBoundings"},Y.a.createElement("li",{className:"LayerBounding LayerBounding--top",style:y}),Y.a.createElement("li",{className:"LayerBounding LayerBounding--right",style:b}),Y.a.createElement("li",{className:"LayerBounding LayerBounding--bottom",style:w}),Y.a.createElement("li",{className:"LayerBounding LayerBounding--left",style:S}))});Te.propTypes={layer:q.a.object,currentScreen:q.a.object};var Oe=Te,je=(n("fIwL"),function(e,t,n){return n>e&&n<t}),Ne=function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen,a=e.unit,o=e.ratio;if(!t||!n||t.id===n.id)return null;var i=Object(ne.g)({width:t.width,height:t.height,top:t.top,left:t.left,rotate:t.kind?0:t.rotation||0}),c=te()(i,4),s=c[0],u=c[1],l=c[2],d=c[3],p=Object(ne.g)({width:n.width,height:n.height,left:n.left,top:n.top,rotate:n.kind?0:n.rotation||0}),f=te()(p,4),h=f[0],m=f[1],v=f[2],g=f[3],y={horizontal:{line1:[{display:u,src:t.src_left},{display:u+l,src:t.src_left+t.src_width}],line2:[{display:m,src:n.src_left},{display:m+v,src:n.src_left+n.src_width}]},vertical:{line1:[{display:s,src:t.src_top},{display:s+d,src:t.src_top+t.src_height}],line2:[{display:h,src:n.src_top},{display:h+g,src:n.src_top+n.src_height}]}},b={horizontal:[],vertical:[]},w={horizontal:{},vertical:{}};for(var S in y)for(var E=y[S].line1,x=y[S].line2,C=0;C<E.length;C++)for(var k=0;k<x.length;k++){var _=E[C].display>x[k].display?{start:x[k],end:E[C]}:{start:E[C],end:x[k]},M=_.start,T=_.end;je(M.display,T.display,E[1-C].display)||je(M.display,T.display,x[1-k].display)||!(T.display-M.display>0)||M.display===E[0].display&&T.display===E[1].display||M.display===x[0].display&&T.display===x[1].display||w[S][M.display]||(w[S][T.display]=!0,b[S].push({start:M,end:T}))}var O=[],j=r.width,N=r.height,I=function(e,t){var n=Object(ne.g)({width:e.width,height:e.height,top:e.top,left:e.left,rotate:e.ro}),r=te()(n,4),a=r[0],o=r[1],i=r[2],c=r[3],s=t.width,u=t.left,l=t.top,d=o+i,p=u+s,f=a+c,h=l+t.height,m=!1,v=!1,g=!1;return(o<=u&&d>=p&&a<=l&&f>=h||o>=u&&o<=p&&a>=l&&f<=h)&&(g=!0),(o>=u&&o<=p||u>=o&&u<=d)&&(m=!0),(a<=l&&f>=l||a>=l&&h>=a)&&(v=!0),{ifHorizontal:m,ifVertical:v,ifAllWraped:g}}(t,n),A=I.ifHorizontal,R=I.ifVertical,L=I.ifAllWraped,P=function(e){switch(e){case"horizontal":case"vertical":return delete b[e];case"all":return delete b.horizontal,void delete b.vertical;default:return}};!L&&A&&!R&&P("horizontal"),!L&&R&&!A&&P("vertical"),!L&&A&&R&&P("all");var D=function(e){O.push(b[e].map(function(t,n){var r;r="horizontal"===e?{left:"".concat(t.start.display/j*100,"%"),width:"".concat((t.end.display-t.start.display)/j*100,"%"),top:"".concat((d/2+s)/N*100,"%")}:{top:"".concat(t.start.display/N*100,"%"),height:"".concat((t.end.display-t.start.display)/N*100,"%"),left:"".concat((l/2+u)/j*100,"%")},ue()(r,{zIndex:Math.pow(2,31)});var i=Object(ne.a)(t.end.src-t.start.src,o);return Y.a.createElement("li",{key:"".concat(e).concat(n),className:"LayerDistance LayerDistance--".concat(e),"data-length":t.end.src-t.start.src,style:r},Y.a.createElement("span",null,"".concat(i).concat(a)))}))};for(var B in b)D(B);return Y.a.createElement("ul",{className:"LayerDistances"},Array.prototype.concat.apply([],O))};Ne.propTypes={activeLayer:q.a.object,enteredLayer:q.a.object,currentScreen:q.a.object,unit:q.a.string,ratio:q.a.number};var Ie=Ne,Ae=(n("9gsH"),function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen,a=e.unit,o=e.ratio;return Y.a.createElement("div",{className:"MeasuresContainer"},n&&n!=t&&Y.a.createElement(Oe,{layer:n,currentScreen:r,unit:a,ratio:o}),Y.a.createElement(Ie,{activeLayer:t,enteredLayer:n,currentScreen:r,unit:a,ratio:o}))});Ae.propTypes={activeLayer:q.a.object,enteredLayer:q.a.object,currentScreen:q.a.object,unit:q.a.string,ratio:q.a.number};var Re=Ae,Le=Object(T.connect)(function(e){return a()({},function(e){var t=e.container,n=t.layers,r=n.resourceByScreen,a=n.visibilityScreenID,o=n.activeLayerID,i=n.enteredLayerID,c=t.previewSetting,s=c.ratio,u=c.unit,l=e.model,d=l.current.screenCid,p=l.screens,f=r[a];return f?{activeLayer:Me()(f.layers,function(e){return e.id===o}),enteredLayer:Me()(f.layers,function(e){return e.id===i}),currentScreen:p.find(function(e){return e.cid===d}),ratio:s,unit:u}:{activeLayer:{},enteredLayer:{},currentScreen:{}}}(e))})(Re),Pe=function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"checkIfNeedHideLayer",function(e){var t=n.props,r=t.isSpaceDown,a=t.requestSelectLayer,o=t.handleShowlayerInfo;!r&&e.target.contains(document.getElementById("simulator-container"))&&(a(-1),o(!1))}),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.error,r=e.isActive,a=e.isSelectLayer,o=e.isShowColorPicker,i=e.activeLayerID;if(!r)return null;if(t)return null;if(n)return null;var c=-1!==i&&!o;return Y.a.createElement("div",null,Y.a.createElement(ke,null),c&&Y.a.createElement(Le,null),a&&Y.a.createElement(Z.a,{onClick:this.checkIfNeedHideLayer}))}}]),t}(V.PureComponent);Pe.propTypes={isActive:q.a.bool,isFetching:q.a.bool,isSpaceDown:q.a.bool,isSelectLayer:q.a.bool,isShowColorPicker:q.a.bool,activeLayerID:q.a.oneOfType([q.a.number,q.a.string]),requestSelectLayer:q.a.func,handleShowlayerInfo:q.a.func,error:q.a.string};var De=n("upRB"),Be="SET_VISIBILITY_SCREEN",Fe="RECEIVE_RESOURCE_SUCCESS",Ue=function(e,t){var n=t.document,r=t.layers,o=t.artboard;return{type:Fe,payload:a()({screenID:e},n,{layers:r,artboard:o})}},We="RECEIVE_RESOURCE_ERROR",ze=function(e,t){return{type:We,payload:{screenID:e,error:t}}},He=n("FjbR"),qe=n.n(He),Ve=n("cl8F"),Ye=n("CoAX"),Xe=function(e){return["status_bar","keyboard","tab_bar"].includes(e)},Ze=n("FkXu"),Ke=/\\\w+/gi,Ge=function(e){return e?e.replace(Ke,"").trim():Ve.a},Je=function(e){return qe()(e)||"artboard-base"===e},Qe=function(e){var t=e.model.widgets,n=Object(De.b)(e).device,r=Object(De.d)(e),a=$e(r.cid),o=0;return t.concat(a).filter(function(e){return o||e.screen_cid!==r.cid||"status_bar"!==e.name||(o=e.height),!(e.screen_cid!==r.cid||["pg","lr","sticky"].includes(e.name)||"image_view"===e.name&&e.width===r.width&&e.height===r.height)}).map(function(e){return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;switch(e.name){case"status_bar":n=0;break;case"keyboard":case"tab_bar":n=t.height-e.height;break;case"navigation_bar":n=r;break;default:n=e.top}return e.top=n,Xe(e.name)&&(e.width=t.width),e}(e,r,o)}).map(function(e){return et(e,n)}).sort(function(e,t){return e.z-t.z||e.timestamp-t.timestamp})},$e=function(e){var t=window.Screen;return t?t.find(e).cpanels().reduce(function(t,n){var r=n.top,o=n.left,i=n.cid,c=n.mainState().cwidgets();return t.concat([n.__proto__]).concat(c.map(function(t){var c=t.__proto__,s=c.left,u=c.top,l=c.width,d=c.height,p=Math.min(Math.max(s,0),n.width)+o,f=Math.min(Math.max(s+l,0),n.width)+o,h=Math.min(Math.max(u,0),n.height)+r,m=Math.min(Math.max(u+d,0),n.height)+r;return a()({},c,{z:c.z,top:h,left:p,width:f-p,height:m-h,screen_cid:e,panel_cid:i,id:"".concat(i,"-").concat(c.id)})}))},[]):[]},et=function(e,t){var n,r={},a=e.name,o=e.ro,i=e.border_radius,c=e.bs,s=e.ha,u=e.va,l=e.lh,d=e.box_shadow,p=e.text_shadow,f=e.sc,h=e.ds,m=e.text;if(m&&(n=nt(m.replace(/<p>/g,"").replace(/<\/p>/g,"\n")),r.text_styles="rich_text"===e.name?[at(JSON.parse(e.text))]:[{font_size:e.fs,color:Ge(e.tc||rt(a,"tc",t)),length:n.length,font_face:ot(m,t)}],r.text=n),s&&(r.alignment=s),u&&(r.vertical_alignment=u),l&&(r.line_height=l),i&&(r.bd_radius=i),o&&(r.rotation=o),r.bc=Ge(e.bc||rt(a,"bc",t)),c&&(r.borders=[{thickness:c,color:Ge(r.bc)}]),e.bg&&(r.bg_colors=[{value:Ge(e.bg)}]),"triangleb"!==a&&"triangletl"!==a&&"icon_button"!==a||(r.bg_colors=[{value:Ge(e.tc||rt(a,"tc"))}]),d){var v=JSON.parse(d)[0];r.shadows=[{offset_x:v[1],offset_y:v[2],blur_radius:v[3],spread:v[4],color:Ge(v[5].replace(Ke,""))}]}else f&&h&&(r.shadows=[{color:Ge(f.replace(Ke,"")),blur_radius:h}]);if(p){var g=JSON.parse(p)[0];r.textShadows=[{offset_x:g[0],offset_y:g[1],blur_radius:g[2],color:Ge(g[3].replace(Ke,""))}]}else e.ts&&(r.textShadows=[{color:Ge(e.tsc.replace(Ke,"")),blur_radius:e.ts}]);return"label"!==a&&"text_view"!==a||(r.hiddSpacing=!0),ue()({},e,r)},tt=/<[^>]+>/gi,nt=function(e){return!!e&&e.replace(tt,"")},rt=function(e,t,n){var r="".concat(e,"_").concat(n),a=e,o=Ve.a[r]||Ve.a[a];return o&&o[t]?o[t]:Ve.a[t]},at=function(e){var t=Object(Ye.f)(e),n=t.fontFamily,r=t.fontWeight,a=t.fontSize,o=t.color,i=t.fontStyle,c=t.letterSpacing,s=t.lineHeight,u=t.paraSpacing;return{font_face:"".concat(Object(Ze.d)(n,r)),font_size:a,color:o,fontStyle:i,letterSpacing:c,lineHeight:s,paraSpacing:u}},ot=function(e,t){var n=Object(ne.i)(e)?"chinese":"english",r="iphone"===t||"ipad"===t?"ios":t,a=it()?"mac":"windows";return ct[a][r][n]},it=function(){return/Mac|iPod|iPhone|iPad/.test(navigator.platform)},ct={mac:{ios:{chinese:"PingFang SC",english:"-apple-system"},android:{chinese:"PingFang SC",english:"Roboto"},web:{chinese:"PingFang SC",english:"Roboto"}},windows:{ios:{chinese:"Microsoft Yahei",english:"Arial"},android:{chinese:"Microsoft Yahei",english:"Roboto"},web:{chinese:"Microsoft Yahei",english:"Roboto"}}},st=n("yXPU"),ut=n.n(st),lt=function(e){return window.MBArtboards[e]},dt=function(e){return Object(s.b)("".concat("/apis/sketch","/artboards/").concat(e,".json"))},pt=function(){var e=ut()(i.a.mark(function e(t,n){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.artboard_id&&n.find(function(e){return e.screen_cid===t.cid&&"image_view"===e.name&&e.image&&-1!==e.image.indexOf(String("/".concat(t.artboard_asset_id,"/")))}))){e.next=13;break}if(!window.MBArtboards){e.next=6;break}a=lt(t.cid),e.next=9;break;case 6:return e.next=8,dt(t.artboard_id);case 8:a=e.sent;case 9:ht(a,r),ft(a),e.next=14;break;case 13:a={artboard:{top:0,left:0,width:t.width,height:t.height},layers:[],document:{document_colors:[],text_styles:[],global_colors:[]}};case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),ft=function(e){e.layers.some(function(e){return e.z})?e.layers.sort(function(e,t){return e.z-t.z}):e.layers.sort(function(e,t){return parseInt(t.width)*parseInt(t.height)-parseInt(e.width)*parseInt(e.height)})},ht=function(e,t){ue()(e.artboard,{widgetZ:t.z,widgetTop:t.top,widgetLeft:t.left,widgetWidth:t.width,widgetHeight:t.height}),e.layers.push({id:"artboard-base",name:e.artboard.name,type:"screen",top:0,left:0,z:t.z,width:e.artboard.width,height:e.artboard.height,bg_colors:[{value:t.bg}],timestamp:t.timestamp+1})},mt=i.a.mark(St),vt=i.a.mark(Et),gt=i.a.mark(xt),yt=i.a.mark(Ct),bt=i.a.mark(Mt),wt=[];function St(e){var t,n,r,o,s,u,l,d,p,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)();case 2:if(t=e.sent,n=t.container.layers,r=n.resourceByScreen,o=n.visibilityScreenID,s=t.model.widgets,u=Object(De.d)(t),r[o]&&!r[o].error){e.next=26;break}if(wt.includes(o)){e.next=26;break}return wt.push(o),e.prev=8,e.next=11,Object(c.b)(pt,u,s);case 11:return l=e.sent,d=Qe(t),p=[{type:"screen",id:u.cid,name:u.name,top:0,left:0,width:u.width,height:u.height,src_left:0,src_top:0,src_width:l.artboard.width,src_height:l.artboard.height,bg_colors:[{value:Ge(u.bgcolor)}]}].concat(l.layers).concat(d).reduce(function(e,t){var n=t.id,r=t.top,o=t.left,i=t.width,c=t.height;if("group"===t.name)return e.push(t),e;var s=Je(n)?l.artboard.widgetWidth/l.artboard.width:1,d=r*s,p=o*s,f=i*s,h=c*s,m=Math.min(Math.max(p,0),u.width),v=Math.min(Math.max(p+f,0),u.width),g=Math.min(Math.max(d,0),u.height),y=Math.min(Math.max(d+h,0),u.height);return v-m!=0&&y-g!=0&&e.push(a()({},t,{left:m,top:g,width:v-m,height:y-g,src_top:Number(parseFloat(Math.max(r,0)).toFixed(2)),src_left:Number(parseFloat(Math.max(o,0)).toFixed(2)),src_width:Number(parseFloat(Math.min(o+i,l.artboard.width)-Math.max(o,0)).toFixed(2)),src_height:Number(parseFloat(Math.min(r+c,l.artboard.height)-Math.max(r,0)).toFixed(2))})),e},[]),f=a()({},l,{layers:p}),wt.splice(wt.indexOf(o),1),e.next=18,Object(c.d)(Ue(o,f));case 18:e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(8),console.log(e.t0.stack),wt.splice(wt.indexOf(o),1),e.next=26,Object(c.d)(ze(o,e.t0.message));case 26:case"end":return e.stop()}},mt,this,[[8,20]])}function Et(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)(Be,St);case 2:case"end":return e.stop()}},vt,this)}function xt(e){var t,n,r,a,o,s;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.layerID,i.next=3,Object(c.e)();case 3:return n=i.sent,r=n.container.layers,a=r.resourceByScreen,o=r.visibilityScreenID,s=_t(a[o].layers,t),kt&&console.log("[makeSureWithSliceId]",s),i.next=9,Object(c.d)(Se(s));case 9:return i.next=11,Object(c.d)(xe(s));case 11:case"end":return i.stop()}},gt,this)}function Ct(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)(ye,xt);case 2:case"end":return e.stop()}},yt,this)}var kt=!1,_t=function(e,t){var n=Me()(e,{id:t});if(!n||!n.parent||n.image_set_zip)return t;for(;n;){var r=Me()(e,{id:n.parent});if(!r||!r.image_set_zip||!r.parent)return t;if(r.image_set_zip)return n.parent;n=r.parent}};function Mt(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[Et(),Ct()];case 2:case"end":return e.stop()}},bt,this)}var Tt={"-1":{isFetching:!1,layers:[],error:""}};var Ot={visibilityScreenID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be:return t.payload.screenID;default:return e}},resourceByScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:case We:return ue()({},e,z()({},t.payload.screenID,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,layers:[],error:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return ue()({},e,{isFetching:!1,layers:t.payload.layers,error:void 0,artboard:t.payload.artboard,documentColor:t.payload.document_colors,globalColor:t.payload.global_colors,globalText:t.payload.text_styles});case We:return ue()({},e,{isFetching:!1,layers:[],error:t.payload.error});default:return e}}(e[t.payload],t)));case"container:layers:clear":return Tt;default:return e}}};var jt={selectedLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return t.payload.layerID===e?-1:t.payload.layerID;case Be:return-1;default:return e}},activeLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return t.payload.layerID;case Be:return-1;default:return e}},enteredLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return t.payload.layerID;default:return e}}},Nt=Object(M.combineReducers)(a()({},Ot,jt)),It=Object(T.connect)(function(e){var t=e.container,n=t.layers,r=t.common.keyFlags.isSpaceDown,a=t.previewSetting,o=a.toolbarActiveItem,i=a.isSelectLayer,c=a.isShowColorPicker,s=n.activeLayerID,u=n.resourceByScreen[n.visibilityScreenID]||{},l=u.isFetching,d=void 0===l||l,p=u.error;return{isActive:"inspect"==o,isSpaceDown:r,isSelectLayer:i,isShowColorPicker:c,isFetching:d,activeLayerID:s,error:void 0===p?"":p}},function(e){return{requestSelectLayer:function(t){e(be(t))},handleShowlayerInfo:function(t){e({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:t}})}}})(Pe),At={screenSearch:""};var Rt=n("1iCU"),Lt={ratio:1,emPixel:16,unit:"px",colorUnit:"hex",language:"css",toolbarActiveItem:Rt.c,isShowColorPicker:!1,isSelectLayer:!1,userPickColor:Object(ne.f)(),focusColor:null,loadSliceUrl:"",isFullScreenMode:!1,isScrollable:!0,isStickyShow:!0,isHighlight:!0,shellType:"device"};var Pt={artboards:[],error:!1};var Dt={slices:[],loading:!0,error:!1};var Bt=[0,1,2,3,4,5,6,7].map(function(e){return{create:!!(1&e),update:!!(2&e),delete:!!(4&e)}}),Ft={owner:!0,admin:!0,editor:!0,viewer:!0},Ut={owner:!0,admin:!0},Wt={allowComment:!1,denyMessage:""},zt=function(){return Wt},Ht=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INVALID_ID_0",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INVALID_ID_1",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4?arguments[4]:void 0,i=Wt.allowComment,c=o&&"owner"===o.role,s=r===n,u="owner"===e,l=i&&Ft[e]||!1,d=i&&l&&s;return t=null===a?i&&(d||Ut[e]||!1)||s:i&&(c?u:"admin"===e)||s||u,Bt[(l?1:0)+(d?2:0)+(t?4:0)]},qt=n("cAqp"),Vt=n.n(qt).a["comment-marker"],Yt=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e));var r={isDragging:!1,position:{left:0,top:0}},o=a()({},Zt,{mousemove:Object(ne.j)(function(e){var t=n.props,r=t.offsetLeft,a=t.offsetTop,o=(0,t.markerOperations.getMarkerPosition)(e);(n.state.isDragging||function(e,t,n){var r=e-n.left,a=t-n.top;return r*r+a*a>=Kt}(r,a,o))&&n.setState({isDragging:!0,position:o})}),mouseup:Object(ne.j)(function(e){if(c(),n.state.isDragging){var t=n.props,a=t.commentThreadCid,o=t.markerOperations,i=o.doUpdateCommentThread,s=(0,o.getMarkerPosition)(e);i({cid:a,left:s.left,top:s.top})}else setTimeout(function(){var e=n.props,t=e.isSelect,r=e.commentThreadCid;(0,e.markerOperations.setSelectCommentThreadCid)(t?null:r)},0);n.setState(r)}),mouseleave:function(){c(),n.props.markerOperations.setFocusCommentThreadCid(null),n.setState(r)}}),i=a()({},Zt,{mouseup:o.mouseup}),c=function(){return n.props.markerOperations.removeContainerEventListener(n.props.isEditable?o:i)};return n.markerListenerMap={onMouseDown:Object(ne.j)(function(){return n.props.markerOperations.addContainerEventListener(n.props.isEditable?o:i)}),onMouseEnter:Object(ne.j)(function(){return n.props.markerOperations.setFocusCommentThreadCid(n.props.commentThreadCid)}),onMouseLeave:Object(ne.j)(function(){return n.props.markerOperations.setFocusCommentThreadCid(null)}),onMouseUp:Xt,onDoubleClick:Xt,onClick:Xt},n.isFocused=!1,n.setElementRef=function(e){return n.elementRef=e},n.elementRef=null,n.state=r,n}return B()(t,e),I()(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isFocus,n=e.markerOperations.doFocusAtElement;t&&!this.isFocused&&n(this.elementRef),this.isFocused=t}},{key:"render",value:function(){var e=this.props,t=e.offsetLeft,n=e.offsetTop,r=e.isFocus,a=e.isFade,o=e.commentMarkerIndex,i=this.state,c=i.isDragging,s=i.position,u=r?"focus":!r&&a?"fade":"",l=c?s:{left:"".concat(t,"px"),top:"".concat(n,"px")};return Y.a.createElement("div",{className:"".concat(Vt," ").concat(u),style:l},Y.a.createElement("span",Q()({ref:this.setElementRef,tabIndex:o},this.markerListenerMap),o))}}]),t}(V.PureComponent);z()(Yt,"propTypes",{commentMarkerIndex:q.a.number,commentThreadCid:q.a.string,offsetLeft:q.a.number,offsetTop:q.a.number,isEditable:q.a.bool,isSelect:q.a.bool,isFocus:q.a.bool,isFade:q.a.bool,markerOperations:q.a.object});var Xt=Object(ne.j)(),Zt={mouseup:Xt,mousedown:Xt,mousemove:Xt,mouseleave:Xt,mouseout:Xt,click:Xt,dblclick:Xt},Kt=225;var Gt=20,Jt=function(e){function t(e){var n;return j()(this,t),(n=R()(this,P()(t).call(this,e))).addCommentThreadListener=Object(ne.j)(function(e){var t=n.props,r=t.getContentElement,a=t.isActive,o=t.currentUserRole,i=t.dispatch;a&&Ht(o).create&&Qt(e,r().getBoundingClientRect())&&i({type:"entry:comment-threads:add",payload:n.markerOperations.getMarkerPosition(e)})}),n.markerOperations={addContainerEventListener:function(e){for(var t in e)n.props.getContentElement().addEventListener(t,e[t])},removeContainerEventListener:function(e){for(var t in e)n.props.getContentElement().removeEventListener(t,e[t])},setFocusCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.props.dispatch({type:"container:comment:focus",payload:{focus:e,from:"mask"}})},setSelectCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.props.dispatch({type:"container:comment:select",payload:{select:e,from:"mask"}})},doUpdateCommentThread:function(e){var t=e.cid,r=e.top,a=e.left;return n.props.dispatch({type:"entry:comment-threads:update",payload:{cid:t,top:r,left:a}})},doFocusAtElement:function(e){return n.props.dispatch({type:"entry:focus-element",payload:{focusType:"external",element:e}})},getMarkerPosition:function(e){var t=n.props.queryCurrentScreenContainerElement().getBoundingClientRect(),r=n.props.getContentElement().getBoundingClientRect();return{left:Object(ne.k)(e.clientX,r.left+Gt,r.right-Gt)-t.left,top:Object(ne.k)(e.clientY,r.top+Gt,r.bottom-Gt)-t.top}}},n}return B()(t,e),I()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.getContentElement;n!==e.isActive&&r()&&(n?r().addEventListener("dblclick",this.addCommentThreadListener):r().removeEventListener("dblclick",this.addCommentThreadListener))}},{key:"componentWillUnmount",value:function(){var e=this.props.getContentElement;e()&&e().removeEventListener("dblclick",this.addCommentThreadListener)}},{key:"render",value:function(){var e=this;if(!this.props.isActive)return null;var t=this.props,n=t.commentContainer,r=n.select,a=n.focus,o=t.scale,i=t.commentThreadList,c=t.userId,s=t.currentUserRole;return Y.a.createElement("div",null,i.map(function(t,n){var i=t.cid,u=t.left,l=t.top,d=t.user_id,p=r===i,f=p||a===i,h=r&&!p||a&&!f;return Y.a.createElement(Yt,{key:i,commentMarkerIndex:n+1,commentThreadCid:i,offsetLeft:u*o,offsetTop:l*o,isEditable:Ht(s,c,d).update,isSelect:p,isFocus:f,isFade:h,markerOperations:e.markerOperations})}))}}]),t}(V.PureComponent);z()(Jt,"propTypes",{getContentElement:q.a.func.isRequired,scale:q.a.number,queryCurrentScreenContainerElement:q.a.func.isRequired,isActive:q.a.bool,commentContainer:q.a.object,commentThreadList:q.a.array,userId:q.a.number,currentUserRole:q.a.string,dispatch:q.a.func});var Qt=function(e,t){var n=t.left,r=t.top,a=t.width,o=t.height;return n<=e.clientX&&r<=e.clientY&&n+a>=e.clientX&&r+o>=e.clientY},$t={focus:null,select:null,from:null};var en=n("zkrS"),tn=n("6XO9"),nn=n("i8i4"),rn=n.n(nn),an=n("Ku8Y"),on=n.n(an),cn=on.a["editable-span"],sn=on.a["reply-textarea"],un=function(e){function t(e){var n;return j()(this,t),(n=R()(this,P()(t).call(this,e))).getEditableTextAreaRef=function(e){return n.textarea=e&&e.querySelector("textarea")},n.focusTextarea=function(){if(n.textarea){n.textarea.focus&&n.textarea.focus();var e=n.textarea.value.length;n.textarea.setSelectionRange(e,e)}},n}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){this.focusTextarea()}},{key:"render",value:function(){var e=this.props,t=e.editingValue,n=e.placeholder,r=e.btnSureClass;return Y.a.createElement("div",{ref:this.getEditableTextAreaRef,className:on.a.container},Y.a.createElement(tn.Textarea,{className:"".concat(cn," textarea"),value:t,placeholder:n||"",onChange:this.props.onEditUpdate,onKeyDown:this.props.onEditKeyPress}),Y.a.createElement("div",{className:on.a["btn-sort"]},Y.a.createElement(tn.Button,{className:on.a["btn-cancel"],onClick:this.props.toggleEdit},en.a.I18N.preview.comment.cancelEdit),Y.a.createElement(tn.Button,{className:r,onClick:this.props.onEditFinish},en.a.I18N.preview.comment.updateEdit)))}}]),t}(V.PureComponent);z()(un,"propTypes",{editingValue:q.a.string,placeholder:q.a.string,toggleEdit:q.a.func,btnSureClass:q.a.string,onEditUpdate:q.a.func,onEditKeyPress:q.a.func,onEditFinish:q.a.func});var ln=function(e){function t(e){var n;return j()(this,t),(n=R()(this,P()(t).call(this,e))).toggleEditing=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.setState({isEditing:e,editingValue:n.props.getValue()}),e&&setTimeout(n.focusTextarea,0)},n.startEditing=function(){return n.toggleEditing(!0)},n.onEditUpdate=function(e){return n.setState({editingValue:e})},n.onEditKeyPress=function(e){return pn(e)&&(!n.props.isMultiLine||!e.shiftKey)&&n.onEditFinish()},n.onEditFinish=function(){var e=n.state.editingValue.trim();e!==(n.props.getValue()||"")&&n.props.onValueChange(e),n.props.toggleEdit()},n.state={isEditing:e.isEditing,editingValue:""},e.initEditing&&setTimeout(n.startEditing,50),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.isEditLocked,r=e.getValue,a=e.toggleEdit,o=this.state,i=o.isEditing,c=o.editingValue,s=r()||"",u="".concat(on.a["btn-sure"]," ").concat(c.length&&on.a.active);return n?Y.a.createElement("span",{className:"".concat(cn," span")},s):i?Y.a.createElement(un,{editingValue:c,placeholder:t,toggleEdit:a,btnSureClass:u,onEditUpdate:this.onEditUpdate,onEditKeyPress:this.onEditKeyPress,onEditFinish:this.onEditFinish}):Y.a.createElement("span",{className:"".concat(cn," span")},s)}}]),t}(V.PureComponent);z()(ln,"propTypes",{onValueChange:q.a.func,getValue:q.a.func,placeholder:q.a.string,isMultiLine:q.a.bool,initEditing:q.a.bool,isEditLocked:q.a.bool,isEditing:q.a.bool,toggleEdit:q.a.func});var dn=function(e){function t(e){var n;return j()(this,t),(n=R()(this,P()(t).call(this,e))).onEditUpdate=function(e){var t=e,r=n.props.handleActive;t.length?r(!0):r(!1),!n.props.isEditLocked&&n.setState({editingValue:t})},n.onEditKeyPress=function(e){return pn(e)&&(!n.props.isMultiLine||!e.shiftKey)&&n.onEditFinish(e)},n.onEditFinish=Object(ne.j)(function(){var e=n.getEditingValue();e&&n.props.onValueChange(e),n.setState(function(){return{editingValue:""}},function(){n.props.handleActive(!1)}),setTimeout(function(){return n.setState({editingValue:""})})}),n.getEditingValue=function(){return(n.state.editingValue||"").trim()},n.focus=function(){n.setState({disabled:!1}),n.textarea&&n.textarea.focus()},n.disabledEdit=function(){return n.setState({disabled:!0})},n.textarea=null,n.state={editingValue:"",disabled:!1},n}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){var e=rn.a.findDOMNode(this);this.textarea=e.querySelector("textarea"),this.focus()}},{key:"componentDidUpdate",value:function(){if(this.props.isAutoHeight&&this.textarea){this.textarea.style.height="auto";var e=Math.max(this.textarea.scrollHeight+2,this.textarea.offsetHeight,this.props.minHeight);this.textarea.style.height="".concat(e,"px")}}},{key:"render",value:function(){var e=this.props.placeholder,t=void 0===e?"":e,n=this.state,r=n.editingValue,a=n.disabled;return Y.a.createElement(tn.Textarea,{disabled:a,rows:1,className:sn,value:r,placeholder:t,onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress})}}]),t}(V.PureComponent);z()(dn,"propTypes",{onValueChange:q.a.func,placeholder:q.a.string,handleActive:q.a.func,isMultiLine:q.a.bool,isEditLocked:q.a.bool,isAutoHeight:q.a.bool,minHeight:q.a.number});var pn=function(e){return"Enter"===e.key||13===e.which||13===e.keyCode},fn=function(e){var t=e.avatar,n=e.width,r=e.height,a=e.name,o=e.index;e.isDot;return Y.a.createElement("div",{className:on.a.avatarInform},Y.a.createElement("img",{className:on.a.avatar,src:t,width:n,height:r}),Y.a.createElement("div",{className:on.a["avatar-slide"]},o&&Y.a.createElement("span",{className:on.a.index},"#".concat(o," ")),Y.a.createElement("span",{className:"name"},a)))};fn.propTypes={avatar:q.a.string.isRequired,width:q.a.number,height:q.a.number,name:q.a.string,index:q.a.number,isDot:q.a.bool},fn.defaultProps={width:24,height:24};var hn=n("i6OX"),mn=n("mquD"),vn=n.n(mn),gn=n("UbMB"),yn=n.n(gn),bn=yn.a.bind(vn.a),wn=function(e){var t=e.onDelete;return Y.a.createElement(tn.Tooltip,{content:{hover:I18N.preview.comment.modify_delete},duration:1e3},Y.a.createElement(tn.Dropdown,{opener:Y.a.createElement(hn.b,{type:"dora",name:"trash",className:vn.a.modify}),menuList:[I18N.preview.comment.modify_delete],menuX:"left",menuClassName:"comment-delete",arrowed:!0,onSelect:t}))};wn.propTypes={onDelete:q.a.func.isRequired};var Sn=function(e){var t=e.onSelect;return Y.a.createElement(tn.Tooltip,{content:{hover:I18N.preview.setting},duration:1e3},Y.a.createElement(tn.Dropdown,{opener:Y.a.createElement(hn.b,{name:"cog",type:"dora",className:vn.a.edit}),menuList:[I18N.preview.comment.modify_edit],menuX:"left",arrowed:!0,menuClassName:"comment-setting",onSelect:t}))};Sn.propTypes={onSelect:q.a.func.isRequired};var En=function(e){var t=e.hasUser,n=e.hasSelectCommentThread;return Y.a.createElement("div",{className:bn("content-empty")},Y.a.createElement("img",{src:"".concat("/images/preview/no-comment@2x.png")}),Y.a.createElement("h3",{className:bn("add-comment")},I18N.preview.comment.add_comment),Y.a.createElement("span",null,zt().allowComment?t?en.a.I18N.preview.comment.thread_none_tip_signin:n?en.a.I18N.preview.comment.reply_none_tip:en.a.I18N.preview.comment.thread_none_tip:zt().denyMessage))};En.propTypes={hasUser:q.a.bool,hasSelectCommentThread:q.a.bool};var xn="#8D9EA7",Cn="#5B6B73",kn=function(e){function t(){var e;return j()(this,t),e=R()(this,P()(t).call(this)),z()(U()(U()(e)),"unMountShow",function(){e.setState({animate:!1})}),z()(U()(U()(e)),"handleAnimateEnd",function(){e.props.isReply||e.setState({show:!1})}),e.state={backgroundColor:xn,disabled:!0,show:!1,animate:!1},e.handleActive=function(t){e.setState({backgroundColor:t?Cn:xn,disabled:!t})},e}return B()(t,e),I()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(!e.isReply)return this.unMountShow();this.setState({show:!0}),setTimeout(function(){t.setState({animate:!0})},0)}},{key:"componentDidUpdate",value:function(e,t){this.props.isReply&&t.show===this.state.show&&In(this.containerRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.setReplyTextareaRef,r=t.onValueChange,a=t.doReply,o=this.state,i=o.backgroundColor,c=o.disabled,s=o.show,u=o.animate,l=bn("dropdown-reply",{"dropdown-on":u,"dropdown-off":!u});return s?Y.a.createElement("div",{className:l,onTransitionEnd:this.handleAnimateEnd,ref:function(t){return e.containerRef=t}},Y.a.createElement(dn,{ref:n,onValueChange:r,handleActive:this.handleActive,placeholder:en.a.I18N.preview.comment.comment_placeholder,minHeight:60,isMultiLine:!0,isAutoHeight:!0}),Y.a.createElement(tn.Button,{onClick:a,style:{backgroundColor:i,cursor:c?"not-allowed":"pointer"},disabled:c},en.a.I18N.preview.comment.comment_create)):null}}]),t}(V.PureComponent);kn.propTypes={setReplyTextareaRef:q.a.func.isRequired,onValueChange:q.a.func.isRequired,doReply:q.a.func.isRequired,isReply:q.a.bool.isRequired};var _n=function(e){var t=e.permission,n=(e.comment,e.isFolded),r=e.setEditableSpanComponent,a=e.onValueChange,o=e.getValue,i=e.isEdit,c=e.toggleEdit;return Y.a.createElement("div",{className:bn("comment-content",{folded:n})},Y.a.createElement(ln,{ref:r,onValueChange:a,getValue:o,placeholder:en.a.I18N.preview.comment.comment_placeholder,isEditLocked:!t.update,isEditing:i,toggleEdit:c,isMultiLine:!0}))};_n.propTypes={permission:q.a.object,comment:q.a.object,isFolded:q.a.bool,isEdit:q.a.bool,setEditableSpanComponent:q.a.func,onValueChange:q.a.func,getValue:q.a.func,toggleEdit:q.a.func,handleActive:q.a.func};var Mn=function(e){var t=e.markIndex,n=e.information,r=e.onSelect,a=e.onDelete,o=e.permission,i=e.ifShowBtn,c=e.className,s=void 0===c?"":c,u=e.showByEnter,l=n.avatar,d=n.name;return Y.a.createElement("div",{className:"".concat(bn("header-container")," ").concat(s)},Y.a.createElement("div",{className:bn("header-info")},Y.a.createElement(fn,{avatar:l,name:d,index:t})),(o.update||o.delete)&&i&&u&&Y.a.createElement("div",{className:bn("header-tool")},o.update&&Y.a.createElement(Sn,{onSelect:r}),o.delete&&Y.a.createElement(wn,{onDelete:a})))};Mn.propTypes={markIndex:q.a.number,information:q.a.object,permission:q.a.object,onSelect:q.a.func,onDelete:q.a.func,ifShowBtn:q.a.bool,className:q.a.string,showByEnter:q.a.bool};var Tn="collaborator",On=function(e,t){return e?"guest"===t.userRole?"not_collaborator":Tn:"not_signin"},jn=function(e){var t=e.userId,n=e.currentState,r=e.permission;return On(t,n)===Tn&&r.create},Nn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;return e.length>t},In=function(e){if(e){var t=e.getBoundingClientRect().bottom+An,n=document.getElementById("comment-thread"),r=n.scrollTop,a=n.scrollHeight;t+r>a?setTimeout(function(){return n.scrollTop=r+An},300):t>Rn&&(n.scrollTop=r+An)}},An=120,Rn=window.innerHeight,Ln=yn.a.bind(vn.a),Pn=function(e){var t=e.replyList,n=e.commentOperations,r=(e.current,e.currentState),a=e.doCreateComment;return t.map(function(e,t){var o=e.user_id,i=e.cid,c=n.getCollaborator(o),s=c.name,u=c.avatar;return Y.a.createElement(Dn,{key:i,name:s,avatar:u,comment:e,permission:n.getPermission(o),currentState:r,commentOperations:n,doCreateComment:a})})};Pn.propTypes={replyList:q.a.array,commentOperations:q.a.object,permission:q.a.object,current:q.a.object,currentState:q.a.object,doCreateComment:q.a.func};var Dn=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"doCreateComment",function(e){n.props.doCreateComment(e,!0),n.state.isReply&&n.toggleReply()}),z()(U()(U()(n)),"getCommentMessage",function(){return n.props.comment&&n.props.comment.message}),z()(U()(U()(n)),"handleSetting",function(e){0===Number(e)&&(n.toggleEditing(),MB.event("二次编辑","运行页"))}),z()(U()(U()(n)),"toggleEditing",function(){n.toggleEditState(),n.editableSpanComponent&&n.editableSpanComponent.toggleEditing(!n.state.isEdit)});var r=e.commentOperations,o=e.comment;return n.editableSpanComponent=null,n.setEditableSpanComponent=function(e){return n.editableSpanComponent=e},n.setReplyTextareaRef=function(e){return n.replyTextareaRef=e},n.doReply=function(e){n.replyTextareaRef&&n.replyTextareaRef.onEditFinish(e)},n.doUpdateComment=function(e){return r.doUpdateComment(a()({},o,{message:e}))},n.doDeleteComment=function(){return r.doDeleteComment(o)},n.toggleReply=function(){return n.setState(function(e){return{isReply:!e.isReply}})},n.toggleFolded=function(){return n.setState(function(e){return{isFolded:!e.isFolded}})},n.toggleEditState=function(){return n.setState(function(e){return{isEdit:!e.isEdit}})},n.state={isReply:!1,isFolded:!1,isEdit:!1,showByEnter:!0},n}return B()(t,e),I()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.nextComment,n=t&&Nn(t.message);n!=this.state.isFolded&&this.setState({isFolded:n})}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.name,r=e.avatar,a=e.permission,o=e.currentState,i=t.message,c=t.updated_at,s=t.user_id,u=this.state,l=u.isReply,d=u.isFolded,p=u.isEdit,f=u.showByEnter,h=jn({userId:s,currentState:o,permission:a});return Y.a.createElement("div",{className:"".concat(Ln("container-reply"),"  ").concat(p&&Ln("remove-background"))},Y.a.createElement(Mn,{onDelete:this.doDeleteComment,onSelect:this.handleSetting,permission:a,information:{avatar:r,name:n},className:Ln("reply-header"),ifShowBtn:!p,showByEnter:f}),Y.a.createElement("div",{className:"".concat(Ln("container-main")," ").concat(Ln("reply-content"))},i&&Y.a.createElement(_n,{permission:a,onValueChange:this.doUpdateComment,getValue:this.getCommentMessage,setEditableSpanComponent:this.setEditableSpanComponent,isEdit:p,toggleEdit:this.toggleEditing,comment:t,isFolded:d})),!this.state.isEdit&&Y.a.createElement("div",{className:Ln("container-bottom")},Y.a.createElement("div",{className:vn.a.time},en.a.L10N.parseTimeAgo(1e3*c)),h&&Y.a.createElement("div",{className:Ln("reply-sort"),onClick:this.toggleReply},Y.a.createElement(hn.b,{type:"dora",name:"reply",className:Ln("btn-reply")}),l?en.a.I18N.preview.comment.cancel_reply:en.a.I18N.preview.comment.comment_create)),Y.a.createElement(kn,{isReply:l,setReplyTextareaRef:this.setReplyTextareaRef,onValueChange:this.doCreateComment,doReply:this.doReply}))}}]),t}(V.PureComponent);z()(Dn,"propTypes",{comment:q.a.object,commentOperations:q.a.object,currentState:q.a.object,name:q.a.string,avatar:q.a.string,permission:q.a.object,doCreateComment:q.a.func,nextComment:q.a.object});var Bn=yn.a.bind(vn.a),Fn=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleSetting",function(e){0==Number(e)&&(n.toggleEditing(),MB.event("二次编辑","运行页"))}),z()(U()(U()(n)),"toggleSelect",function(){var e=n.props,t=e.selectCid,r=e.commentOperations,a=e.commentThreadCid;t||r.setFocusCommentThreadCid(a)}),z()(U()(U()(n)),"cancelSelect",function(){var e=n.props,t=e.selectCid,r=e.commentOperations;t||n.state.isEdit||r.cancelSelect()}),z()(U()(U()(n)),"doUpdateComment",function(e){var t=n.props,r=t.commentOperations,o=t.commentList[0];o&&r.doUpdateComment(a()({},o,{message:e}))}),z()(U()(U()(n)),"doCreateComment",function(e,t){var r=n.props,a=r.commentThreadCid;r.commentOperations.doCreateComment(e,a),!t&&n.toggleReply()}),z()(U()(U()(n)),"getCommentMessage",function(){return n.props.commentList[0]&&n.props.commentList[0].message}),z()(U()(U()(n)),"handleRenderMoreComments",function(e){e.stopPropagation(),n.toggleRenderMore(),MB.event("展开评论","运行页")});var r=n.props,o=r.commentOperations,i=r.commentThreadCid,c=r.commentList[0];return n.setReplyTextareaRef=function(e){return n.replyTextareaRef=e},n.setCommentRef=function(e){return n.commentRef=e},n.doReply=function(e){n.replyTextareaRef&&n.replyTextareaRef.onEditFinish(e)},n.doDeleteThread=function(){return o.doDeleteCommentThread(i)},n.toggleEditing=function(){n.toggleEditState(),n.editableSpanComponent&&n.editableSpanComponent.toggleEditing(!n.state.isEdit)},n.setEditableSpanComponent=function(e){return n.editableSpanComponent=e},n.editableSpanComponent=null,n.toggleFolded=function(){return n.setState(function(e){return{isFolded:!e.isFolded}})},n.toggleReply=function(){return n.setState(function(e){return{isReply:!e.isReply}})},n.toggleEditState=function(){return n.setState(function(e){return{isEdit:!e.isEdit}})},n.toggleRenderMore=function(){return n.setState(function(e){return{renderMore:!e.renderMore}})},n.state={isFolded:c&&Nn(c.message)||!1,isReply:!1,renderMore:!1,isEdit:!1,showByEnter:!0},n}return B()(t,e),I()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.commentList,n=t[0]&&Nn(t[0].message);n!=this.state.isFolded&&this.setState({isFolded:n})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.focusCid===e.commentThreadCid;if(!this.props.fromComment&&t&&this.commentRef){var n=document.querySelector("#comment-thread"),r=n.getBoundingClientRect().top,a=n.scrollTop+this.commentRef.getBoundingClientRect().top-r;Object(re.c)(n,a,20)}}},{key:"render",value:function(){var e=this.props,t=e.commentList,n=e.userId,r=e.currentState,a=e.commentThreadCid,o=e.permission,i=e.commentMarkerIndex,c=e.commentOperations,s=e.focusCid,u=e.fromComment,l=this.state,d=l.isReply,p=l.renderMore,f=l.isFolded,h=l.isEdit,m=l.showByEnter,v=s===a,g=t[0]||null,y=g&&c.getCollaborator(g.user_id),b=t.slice(1)||[],w=b.length>2,S=t.length,E="".concat(vn.a.comment," thread-initial entry ").concat(u?"":null==s?"":Bn(v?"comment-focus":"comment-noFocus")),x=jn({userId:n,currentState:r,permission:o});return 0==S?null:Y.a.createElement("div",{ref:this.setCommentRef,className:E,onMouseEnter:this.toggleSelect,onMouseLeave:this.cancelSelect},Y.a.createElement("div",null,Y.a.createElement(Mn,{markIndex:i,onSelect:this.handleSetting,onDelete:this.doDeleteThread,permission:o,information:y,ifShowBtn:!h,showByEnter:m}),Y.a.createElement("div",{className:Bn("container-main")},g&&Y.a.createElement(_n,{permission:o,comment:g,isFolded:f,isEdit:h,toggleEdit:this.toggleEditing,getValue:this.getCommentMessage,setEditableSpanComponent:this.setEditableSpanComponent,onValueChange:this.doUpdateComment}),!this.state.isEdit&&Y.a.createElement("div",{className:"".concat(Bn("container-bottom"))},g&&Y.a.createElement("div",{className:vn.a.time},en.a.L10N.parseTimeAgo(1e3*g.updated_at)),x&&Y.a.createElement("div",{className:Bn("reply-sort"),onClick:this.toggleReply},Y.a.createElement(hn.b,{type:"dora",name:"reply",className:Bn("btn-reply")}),d?en.a.I18N.preview.comment.cancel_reply:en.a.I18N.preview.comment.comment_create)))),Y.a.createElement(kn,{isReply:d,doReply:this.doReply,onValueChange:this.doCreateComment,setReplyTextareaRef:this.setReplyTextareaRef}),w?Y.a.createElement(Pn,Q()({doCreateComment:this.doCreateComment,replyList:b.slice(0,2)},this.props)):Y.a.createElement(Pn,Q()({doCreateComment:this.doCreateComment,replyList:b},this.props)),p&&Y.a.createElement(Pn,Q()({doCreateComment:this.doCreateComment,replyList:b.slice(2)},this.props)),w&&Y.a.createElement("div",{className:vn.a.expand,onClick:this.handleRenderMoreComments},p?I18N.preview.comment.fold:I18N.preview.comment.unfold))}}]),t}(V.PureComponent);z()(Fn,"propTypes",{focusCid:q.a.oneOfType([q.a.string,q.a.object]),selectCid:q.a.oneOfType([q.a.string,q.a.object]),permission:q.a.object,fromComment:q.a.bool,commentList:q.a.array,commentMarkerIndex:q.a.number,commentThreadCid:q.a.string,commentOperations:q.a.object,userId:q.a.number,scrollRef:q.a.object,commentThreadList:q.a.array,currentState:q.a.object});var Un=yn.a.bind(vn.a),Wn=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"autoTextareaFocus",function(){return setTimeout(function(){return n.replyTextareaRef&&n.replyTextareaRef.focus()},200)}),z()(U()(U()(n)),"checkIsNewCreateComment",function(){var e=n.props;return!e.commentListMap[e.commentContainer.select]}),z()(U()(U()(n)),"doReply",function(e){n.replyTextareaRef&&n.replyTextareaRef.onEditFinish(e),n.scrollRef&&Vn(n.scrollRef)}),z()(U()(U()(n)),"doCreateCommentThread",function(e){e&&(n.props.dispatch({type:"entry:comment-threads:add",payload:{top:0,left:0,message:e,cancelSelect:!0}}),Vn(n.scrollRef))}),z()(U()(U()(n)),"doCreateComment",function(e){n.commentOperations.doCreateComment(e),Vn(n.scrollRef)}),z()(U()(U()(n)),"renderContentReply",function(e){if(!zt().allowComment)return null;var t=n.checkIsNewCreateComment(),r=n.props,a=r.userId,o=r.currentState,i=n.state,c=i.backgroundColor,s=i.disabled,u=On(a,o);return Y.a.createElement("div",{className:Un("content-reply")},u===Tn&&Y.a.createElement(dn,{ref:n.setReplyTextareaRef,onValueChange:e&&t?n.doCreateComment:n.doCreateCommentThread,placeholder:en.a.I18N.preview.comment.comment_placeholder,handleActive:n.handleActive,minHeight:20,isMultiLine:!0,isAutoHeight:!0}),u===Tn&&Y.a.createElement(tn.Button,{onClick:n.doReply,style:{backgroundColor:c,cursor:s?"not-allowed":"pointer"},disabled:s},en.a.I18N.preview.comment.thread_create),"not_signin"===u&&Y.a.createElement(tn.Button,{className:vn.a.login,onClick:zn},en.a.I18N.preview.comment.tip_signin),"not_collaborator"===u&&Y.a.createElement("span",null,en.a.I18N.preview.comment.tip_not_collaborator))});var r=n.props,a=r.currentState.screenCid;return(0,r.dispatch)({type:"unread-comment:set-read",payload:{screenCid:a}}),n.commentOperations={cancelSelect:function(){n.props.dispatch({type:"container:comment:select",payload:{select:null}})},getPermission:function(e){var t=n.commentOperations.getCollaborator(e);return Ht(n.props.currentState.userRole,n.props.userId,e,n.props.currentState.teamCid,t)},getCollaborator:function(e){var t=n.props,r=t.collaboratorsState,a=t.currentState,o=a.projectCid,i=a.teamCid;return Yn(r,o,i)[e]||{name:Hn,avatar:qn}},setFocusCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.props.dispatch({type:"container:comment:focus",payload:{focus:e,from:"comment"}})},toggleSelectCommentThread:function(e){(0,n.props.dispatch)({type:"container:comment:select",payload:{select:e||null}})},doDeleteCommentThread:function(e){n.props.dispatch({type:"entry:comment-threads:delete",payload:{cid:e}})},doDeleteComment:function(e){return n.props.dispatch({type:"comments:delete",payload:e})},doUpdateComment:function(e){return n.props.dispatch({type:"entry:comments:update",payload:e})},doCreateComment:function(e,t){var r=n.props,a=r.selectCommentThread,o=r.dispatch,i=t||a.cid;e&&i&&o({type:"entry:comments:add",payload:{thread_cid:i,message:e}})},renderEmptyCommentList:function(){return Y.a.createElement(En,{hasUser:"not_signin"===On(n.props.userId,n.props.currentState),hasSelectCommentThread:Boolean(n.props.selectCommentThread)})}},n.setReplyTextareaRef=function(e){n.replyTextareaRef=e},n.setScrollRef=function(e){return n.scrollRef=e},n.replyTextareaRef=null,n.scrollRef=null,n.state={backgroundColor:xn,disabled:!0},n.handleActive=function(e){n.state.disabled===e&&n.setState({backgroundColor:e?Cn:xn,disabled:!e})},n}return B()(t,e),I()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.unreadCommentState.unreadCountScreenMap,n=e.currentState.screenCid,r=e.dispatch;t[n]&&r({type:"unread-comment:set-read",payload:{screenCid:n}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.commentThreadList,r=t.commentListMap,a=t.currentScreenName,o=t.commentContainer,i=o.focus,c=o.select,s=o.from,u=t.selectCommentThread,l=t.unreadCommentState.unreadCountThreadMap,d=this.props,p=d.userId,f=d.currentState,h=n.length;return Y.a.createElement("div",{className:Un("comment-panel")},h?[Y.a.createElement("div",{key:"title",className:Un("comment-title")},"".concat(a," (").concat(h,") ")),Y.a.createElement("div",{key:"comment",ref:this.setScrollRef,className:Un("comment-thread"),id:"comment-thread"},n.map(function(t,n){var a=t.cid,o=t.user_id,u=r[a]||[],d=l[a]||0,h=e.commentOperations.getPermission(o),m=n+1,v="comment"===s;return Y.a.createElement(Fn,{key:a,commentThreadCid:a,commentMarkerIndex:m,focusCid:i,selectCid:c,fromComment:v,unreadCount:d,commentOperations:e.commentOperations,userId:p,permission:h,currentState:f,commentList:u,scrollRef:e.scrollRef})}))]:this.commentOperations.renderEmptyCommentList(),this.renderContentReply(u))}}]),t}(V.PureComponent);z()(Wn,"propTypes",{commentContainer:q.a.object,currentState:q.a.object,collaboratorsState:q.a.array,unreadCommentState:q.a.object,commentThreadList:q.a.array,selectCommentThread:q.a.object,commentListMap:q.a.object,currentScreenName:q.a.string,userId:q.a.number,dispatch:q.a.func});var zn=function(){window.location.href="/signin?next=".concat(window.location.pathname)},Hn="用户已退出协作",qn="/images/avatar.png",Vn=function(e){return e&&setTimeout(function(){return e.scrollTop=e.scrollHeight-e.offsetHeight},0)},Yn=Object(ne.h)(function(e,t,n){return e.reduce(function(e,r){return r.project_cid!==t&&r.team_cid!==n||(e[r.user_id]=r),e},{})}),Xn=Object(T.connect)(function(e){var t=e.model,n=t.commentThreads,r=t.screens,a=t.comments,o=t.user,i=t.current,c=t.collaborators,s=t.unreadComment,u=e.container;return{commentContainer:u.comment,currentState:i,collaboratorsState:c,unreadCommentState:s,commentThreadList:Zn(n,i.screenCid),selectCommentThread:Kn(n,i.screenCid,u.comment.select),commentListMap:Gn(a),currentScreenName:Jn(r,i.screenCid),userId:o.id}})(Wn),Zn=Object(ne.h)(function(e,t){return e.filter(function(e){return e.screen_cid===t})}),Kn=Object(ne.h)(function(e,t,n){return n&&e.find(function(e){return e.cid===n&&e.screen_cid===t})||null}),Gn=Object(ne.h)(function(e){return e.reduce(function(e,t){return void 0===e[t.thread_cid]?e[t.thread_cid]=[t]:e[t.thread_cid].push(t),e},{})}),Jn=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid==t}).name}),Qn=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.user,a=t.commentThreads,o=e.container;return{queryCurrentScreenContainerElement:$n(n.screenCid),scale:o.common.scale/100,isActive:"comment"==o.previewSetting.toolbarActiveItem,commentContainer:o.comment,commentThreadList:Zn(a,n.screenCid),currentUserRole:n.userRole,userId:r.id}})(Jt),$n=Object(ne.h)(function(e){return function(){return document.querySelector("#pscreen".concat(e," .scontainer"))}}),er={open:!1,event:{}},tr=n("6ZRU"),nr={isSpaceDown:!1},rr={offset:{x:0,y:0},scale:100,keyFlags:nr,viewport:{width:0,height:0}};var ar={alert:tr.a.reducers,common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"preview:set:canvas:offset":return a()({},e,{offset:r.offset});case"preview:set:scale":return a()({},e,{scale:r.scale});case"preview:set:key:flags":return a()({},e,{keyFlags:a()({},nr,r)});case"preview:reset:key:flags":return a()({},e,{keyFlags:nr});case"preview:scrollbar:viewport":return a()({},e,{viewport:r});default:return e}},comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"container:comment:focus":return a()({},e,{focus:r.focus,from:r.from});case"container:comment:select":return a()({},e,{focus:r.select&&e.focus,select:r.select,from:r.from})}return e},layers:Nt,slices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:slice:success":return a()({},e,r,{loading:!1});case"reducer:slice:fail":return a()({},e,r,{error:!0});default:return e}},screens:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:preview-panel:search":return a()({},e,r);case"reducer:preview-panel:reset":return At;default:return e}},artboards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:artboards:success":return a()({},e,r);case"reducer:artboards:fail":return a()({},e,r,{error:!0});default:return e}},previewSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:preview-toolbar:update":return a()({},e,r);case"reducer:preview-toolbar:active-item:init":return a()({},e,{toolbarActiveItem:Rt.c});case"reducer:preview-toolbar:fullscreen":return a()({},e,{isFullScreenMode:r.isFullScreenMode});case"reducer:preview-toolbar:update:highlight":return a()({},e,{isHighlight:r.isHighlight});default:return e}},eventSignUpModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"event-sign-up:close:modal":return a()({open:!1},e);case"event-sign-up:set:event":return t.payload;default:return e}}},or=n("eTac"),ir=n.n(or),cr={info:{name:"lisankebook",desc:"李三科送给你的专属福利，现在注册墨刀即可享受一个月个人版会员",successTip:"注册成功，恭喜你获得墨刀一个月个人版会员"},checker:function(){return function(){var e=location.search;0===e.indexOf("?")&&(e=e.substr(1));var t={};return e.split("&").forEach(function(e){var n=e.split("="),r=te()(n,2),a=r[0],o=r[1];a&&(t[a]=!o||decodeURIComponent(o))}),t}().utm_source===cr.info.name}},sr=[cr];var ur=n("bNtH"),lr=n("4dyd"),dr=n("/OM1"),pr=n.n(dr),fr=function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"handleResize",function(){return n.props.dispatch({type:"entry:update:scrollbar:viewport"})}),z()(U()(U()(n)),"handleScroll",function(e){return n.props.dispatch({type:"entry:preview:set:canvas:offset",payload:{offset:e}})}),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.canvasOffset,n=e.screen,r=e.scale,a=e.viewport,o=a.width,i=a.height,c={x:Math.max(3.5*o,n.width*r/100*2),y:Math.max(3.5*i,n.height*r/100*2)};return Y.a.createElement("div",{className:pr.a.scroll_bar_container,id:"preview_scrollBar_viewport"},Y.a.createElement(ur.a,{canvasOffset:t,viewportWidth:o,viewportHeight:i,canvasRange:c,onScroll:this.handleScroll}),Y.a.createElement(lr.a,{onResize:this.handleResize}))}}]),t}(V.PureComponent);z()(fr,"propTypes",{canvasOffset:q.a.object,dispatch:q.a.func,scale:q.a.number,screen:q.a.object,viewport:q.a.object});var hr=Object(T.connect)(function(e){var t=e.container.common,n=t.offset,r=t.scale,a=t.viewport,o=e.model,i=o.current.screenCid;return{canvasOffset:n,scale:r,screen:o.screens.find(function(e){return e.cid===i}),viewport:a}})(fr),mr=n("foKU"),vr=n("Gbs1"),gr=n("An9T"),yr=n.n(gr),br=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.shellType,r=function(e,t,n){switch(e){case"device":var r=Object(vr.b)(t,e);if(!r.bg)return null;var a=n?"".concat(r.bg,"_land"):r.bg,o=n?[-r.left,-r.top,r.height,r.width]:[-r.top,-r.left,r.width,r.height],i=te()(o,4),c=i[0],s=i[1],u=i[2],l=i[3];return{top:c,left:s,width:u,height:l,backgroundImage:"url(".concat(MB.isHTMLZip()?".":"","/images/devices/").concat(a,".png)")};case"default":case"none":return null}}(n,t,e.isLandscape),a="device"===n&&null===r?"none":n;return Y.a.createElement("div",{className:"".concat(yr.a.shell," ").concat(a),style:r})}}]),t}(V.PureComponent);br.propTypes={project:q.a.object,shellType:q.a.string,isLandscape:q.a.bool};var wr=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.screen,r=e.isLite,a=e.isScreenExpanded,o=e.viewportWidth,i=e.viewportHeight,c=t.splash,s=void 0===c?"":c,u=function(e,t,n,r,a){var o;if(r){var i,c=Math.min(n.width,n.height),s=Math.max(n.width,n.height),u=Math.min(t.width,t.height),l=Math.max(t.width,t.height),d=e.width!==u,p=d!==n.width>n.height;d?(i=s/l,o={width:l,height:Math.min(u,c/i),transform:"".concat(p?"translate(-100%) rotate(-90deg)":""," scale(").concat(i,")"),transformOrigin:p?"top right":"top left"}):(i=c/u,o={width:u,height:Math.min(l,s/i),transform:"".concat(p?"translate(-100%) rotate(-90deg)":""," scale(").concat(i,")"),transformOrigin:p?"top right":"top left"})}else if(a)o={width:e.width,height:e.height};else{var f="landscape"===e.orientation,h=t.width,m=t.height,v=f?[m,h]:[h,m],g=te()(v,2);o={width:g[0],height:g[1]}}return o}(n,t,{width:o,height:i},r,a),l="".concat(n.orientation," ").concat(t.device," ").concat(t.model);return Y.a.createElement("div",{id:"simulator",className:l,style:u},Y.a.createElement("div",{id:"app"}),Y.a.createElement("div",{className:"splash"},s&&Y.a.createElement("img",{src:s}),Y.a.createElement("div",{className:"loading"},Y.a.createElement("div",{className:"spinner"}))))}}]),t}(V.PureComponent);wr.propTypes={screen:q.a.object,project:q.a.object,isLite:q.a.bool,isScreenExpanded:q.a.bool,viewportWidth:q.a.number,viewportHeight:q.a.number,dispatch:q.a.func};var Sr=Object(T.connect)(function(e){var t=Object(De.a)(e),n=Object(De.d)(e),r=Object(De.b)(e),a=Object(De.g)(e),o=t==Rt.b,i=t==Rt.a,c=MB.isFullScreen(),s=o||i||!a||c,u=MB.isMobile(),l=MB.isEmbedded(),d=u||l&&!c,p=l&&"landscape"===Project.find(r.cid).homeScreen().orientation?[r.height,r.width]:[r.width,r.height],f=l?p:[window.innerWidth,window.innerHeight],h=te()(f,2);return{screen:n,project:r,isLite:d,isScreenExpanded:s,viewportWidth:h[0],viewportHeight:h[1]}})(wr),Er=(n("v8PR"),10),xr="hidden",Cr="visible",kr="lightgray",_r="black",Mr="#fff",Tr=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"cancelColorPicker",function(e){n.imageCanvas.contains(e.target)||n.cancelPickerMode()}),z()(U()(U()(n)),"cancelPickerMode",function(){return n.props.dispatch({type:"reducer:preview-toolbar:update",payload:{isShowColorPicker:!1}})}),z()(U()(U()(n)),"renderImageCanvas",function(){var e=n.imageCanvas.getBoundingClientRect(),t=e.width,r=e.height;n.lastCanvasRect={width:t,height:r},n.imageCanvas.width=t,n.imageCanvas.height=r,n.imageCtx.drawImage(n.image,0,0,t,r)}),z()(U()(U()(n)),"calculateCenterPoint",function(e){var t=n.image.getBoundingClientRect(),r=t.left,a=t.top;n.centerPoint={centerX:Math.floor(e.clientX-r),centerY:Math.floor(e.clientY-a)}}),z()(U()(U()(n)),"handleMove",function(e){n.image.complete&&n.state.visibility===xr&&n.setState({visibility:Cr}),n.calculateCenterPoint(e);var t=n.props,r=t.glassHeight,a=t.glassWidth,o=t.scale,i=n.centerPoint,c=i.centerX,s=i.centerY,u=Math.floor(c-a/2),l=Math.floor(s-r/2);n.setState({glassLeft:u,glassTop:l}),s<0&&n.clearGlassRect(),n.glassCtx.clearRect(0,0,a,r),o<1&&console.warn("Can't make the galss scale less than 1, It will make bed invision"),Ir(n.glassCtx,!1),n.glassCtx.drawImage(n.imageCanvas,Math.floor(c-a/2/n.finallyScale),Math.floor(s-r/2/n.finallyScale),Math.floor(a/n.finallyScale),Math.floor(r/n.finallyScale),-Er/2,-Er/2,a,r),Nr(n.glassCtx,kr,Er,Er),Ar(n.glassCtx),Rr(n.glassCtx,_r,Math.floor((a-Er)/2),Math.floor((r-Er)/2),Er,Er),n.getColor()}),z()(U()(U()(n)),"getColor",function(){var e=n.centerPoint,t=e.centerX,r=e.centerY,a=n.imageCtx.getImageData(t,r,1,1).data,o=Or(a),i=o.rgba,c=o.R,s=o.G,u=o.B;n.setState({color:i,R:c,G:s,B:u}),n.color=i}),z()(U()(U()(n)),"handleClick",function(){n.getColor();var e=n.color,t=Object(ne.m)(e),r=t.history,a=t.focusColor;clearTimeout(n.timeoutToken),n.props.dispatch({type:"reducer:preview-toolbar:update",payload:{userPickColor:r,focusColor:a}}),n.timeoutToken=setTimeout(function(){n.props.dispatch({type:"reducer:preview-toolbar:update",payload:{userPickColor:r,focusColor:null}})},1e3)}),z()(U()(U()(n)),"clearGlassRect",function(){var e=n.props,t=e.glassHeight,r=e.glassWidth;n.glassCtx.clearRect(0,0,r,t),n.setState({visibility:xr})}),z()(U()(U()(n)),"handleMouseLeave",function(){n.clearGlassRect()}),z()(U()(U()(n)),"handleKeyDown",function(e){"escape"===e.key.toLowerCase()&&(n.clearGlassRect(),n.cancelPickerMode())}),z()(U()(U()(n)),"handleLoad",function(){n.renderImageCanvas()}),z()(U()(U()(n)),"handleError",function(){n.cancelPickerMode()});var r=n.props.scale;return n.iamgeContainerRef=function(e){return n.image=e},n.getImageCanvasRef=function(e){return n.imageCanvas=e},n.glassCanvasRef=function(e){return n.glassCanvas=e},n.finallyScale=Er*(r<1?1:r),n.state={visibility:xr,glassLeft:0,glassTop:0,color:Mr,R:0,G:0,B:0},n}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){Lr&&(this.image.crossOrigin="Anonymous"),this.imageCtx=this.imageCanvas.getContext("2d"),this.glassCtx=this.glassCanvas.getContext("2d")}},{key:"componentDidCatch",value:function(e){console.log(e),this.cancelPickerMode()}},{key:"componentDidUpdate",value:function(){if(this.imageCanvas){var e=this.imageCanvas.getBoundingClientRect(),t=e.width,n=e.height,r=this.lastCanvasRect||{width:0,height:0},a=r.width,o=r.height;a==t&&o==n||(this.clearGlassRect(),this.renderImageCanvas())}else this.handleError()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.glassWidth,a=e.glassHeight,o=e.src,i=this.state,c=i.visibility,s=i.glassLeft,u=i.glassTop,l=i.color,d=i.R,p=i.G,f=i.B;return Y.a.createElement("div",{className:"mb-picker-container"},Y.a.createElement("img",{ref:this.iamgeContainerRef,className:"mb-picker-image",width:t,height:n,src:o,onLoad:this.handleLoad,onError:this.handleError}),Y.a.createElement("canvas",{ref:this.getImageCanvasRef,onMouseMove:this.handleMove,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,style:{width:t,height:n,opacity:0}}),Y.a.createElement("div",{className:"mb-glass",style:{width:r,height:a,visibility:c,left:s,top:u}},Y.a.createElement("div",{className:"shadow"}),Y.a.createElement("canvas",{ref:this.glassCanvasRef,width:r,height:a,style:{width:r,height:a}}),Y.a.createElement("div",{style:{top:a/2+15},className:"mb-glass-text"},Y.a.createElement("div",{className:"mb-rgba-color"},"R:".concat(d," G:").concat(p," B:").concat(f," ").concat(String(jr(l).hex).toUpperCase())))),Y.a.createElement(Z.a,{onKeyDown:this.handleKeyDown,onClick:this.cancelColorPicker}))}}]),t}(V.PureComponent);z()(Tr,"propTypes",{src:q.a.string,width:q.a.oneOfType([q.a.string,q.a.number]),height:q.a.oneOfType([q.a.string,q.a.number]),glassHeight:q.a.number,glassWidth:q.a.number,scale:q.a.number,dispatch:q.a.func}),z()(Tr,"defaultProps",{src:"/sec3.png",width:1300,height:769,glassWidth:200,glassHeight:200,scale:1,pickColor:function(e){return console.log(e)}});var Or=function(e){return e[3]=parseFloat(e[3]/255),{rgba:"rgba(".concat(e.join(", "),")"),R:e[0],G:e[1],B:e[2]}},jr=function(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d)?)[\s+]?/i);return t&&t.length>=4?{hex:"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2),o:+t[4]}:e},Nr=function(e,t,n,r){e.strokeStyle=t,e.lineWidth=.5;for(var a=n+5.5;a<e.canvas.width-n;a+=n)e.beginPath(),e.moveTo(a,0),e.lineTo(a,e.canvas.height),e.stroke();for(var o=r+5.5;o<e.canvas.height-n;o+=r)e.beginPath(),e.moveTo(0,o),e.lineTo(e.canvas.width,o),e.stroke()},Ir=function(e,t){e.mozImageSmoothingEnabled=t,e.webkitImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t,e.imageSmoothingEnabled=t},Ar=function(e){e.beginPath(),e.strokeStyle="#8D9EA7",e.lineWidth=8,e.arc(100,100,96,0,2*Math.PI),e.stroke(),e.strokeStyle="#D4D7DC",e.lineWidth=5,e.arc(100,100,96,0,2*Math.PI),e.stroke()},Rr=function(e,t,n,r,a,o){e.beginPath(),n+=.5,r+=.5,e.strokeStyle=t,e.lineWidth=1,e.moveTo(n,r),e.lineTo(n+a,r),e.lineTo(n+a,r+o),e.lineTo(n,r+o),e.lineTo(n,r),e.stroke(),e.beginPath(),e.lineWidth=1,e.strokeStyle="white",e.moveTo(n-1,r-1),e.lineTo(n+a+1,r-1),e.lineTo(n+a+1,r+1+o),e.lineTo(n-1,r+o+1),e.lineTo(n-1,r-1),e.stroke()},Lr=!1,Pr=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Dr=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.projects,a=Pr(r,n.projectCid),o=Br(a.access_token,n.screenCid);return{scale:1,width:"100%",height:"100%",src:"".concat(o,"&").concat(Date.now())}})(Tr),Br=function(e,t){return"/snapshot.png?access-token=".concat(e,"&screen-cid=").concat(t,"&mode=zoom-1.00")},Fr=n("uavl"),Ur=n("JTWS"),Wr=(n("dAiO"),function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props.screen,t=e.cid,n=e.state_cid,r=Widget.select(function(e){return"sticky"===e.name&&e.screen_cid===t}).map(function(e){var t=e.dup();return t.setState(n),t});return Y.a.createElement("div",{id:"sticky-container",onClick:this.handleClick},Y.a.createElement("div",{id:"stickies"},r.map(function(e){return Y.a.createElement(zr,{key:e.cid,sticky:e})})))}}]),t}(V.PureComponent));Wr.propTypes={screen:q.a.object};var zr=function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"handleClick",function(e){var t=n.props.sticky;Link.find(t.link_cids)&&MB.runner.pj(e,"tap")}),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props.sticky,t=Object(Ur.a)(e,"p"),n=Object(Ur.b)(e,"p"),r=Link.find(e.link_cids)?e.link_cids:"";return Y.a.createElement("div",{key:e.cid,"data-cid":e.cid,"data-link_cid":r,id:"widget".concat(e.cid,"p"),className:t,style:n,onClick:this.handleClick},Object(Fr.a)(e))}}]),t}(V.PureComponent);zr.propTypes={sticky:q.a.object};var Hr=Object(T.connect)(function(e){return{screen:Object(De.d)(e)}})(Wr),qr=(n("fSKh"),function(e){function t(e){var n;return j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"getContentElementRef",function(){return document.querySelector("#simulator-container")}),z()(U()(U()(n)),"handleKeyDown",function(e){var t=n.props.dispatch,r=e.target.matches("input")||e.target.matches("textarea");32===e.keyCode&&!r&&(e.preventDefault(),t({type:"preview:set:key:flags",payload:{isSpaceDown:!0}})),(e.ctrlKey||e.metaKey)&&13===e.keyCode&&(MB.event("全屏模式开启","运行页"),t({type:"entry:preview:select",payload:{toolbarActiveItem:"preview"}}),t({type:"reducer:preview-toolbar:fullscreen",payload:{isFullScreenMode:!0}}),t({type:"entry:auto-fit:preview:scale"}),t({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:-28}}}))}),z()(U()(U()(n)),"handleKeyUp",function(e){n.props.dispatch({type:"preview:reset:key:flags"})}),z()(U()(U()(n)),"handleMouseDown",function(e){n.props.isSpaceDown&&n.handleDrag(e)}),z()(U()(U()(n)),"handleDrag",function(e){var t=e.clientX,r=e.clientY,a=n.props.canvasOffset,o=a.x,i=a.y,c=function(e){var a={x:o+(e.clientX-t),y:i+(e.clientY-r)};n.props.dispatch({type:"entry:preview:set:canvas:offset",payload:{offset:a}})};document.addEventListener("mousemove",c),document.addEventListener("mouseup",function e(t){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)})}),z()(U()(U()(n)),"handleScaleChange",function(e){n.props.dispatch({type:"entry:preview:set:scale",payload:{scale:e}})}),z()(U()(U()(n)),"handleOffsetChange",function(e,t){n.props.dispatch({type:"entry:preview:set:canvas:offset",payload:{offset:{x:e,y:t}}})}),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.scale,r=t.canvasOffset,a=t.project,o=t.screen,i=t.isSpaceDown,c=t.isStickyShow,s=t.isScrollable,u=t.shellType,l=t.isLayerActive,d=t.isCommentActive,p=t.isColorPickerActive,f=t.isFullScreenMode,h=r.x,m=r.y,v="landscape"===o.orientation,g=l||d,y=g||!s?"none":u,b=a.width,w=a.height,S=v?[w,b]:[b,w],E=te()(S,2),x=E[0],C=E[1],k={width:x,height:C,minWidth:x,minHeight:C,transform:"matrix(1, 0, 0, 1, ".concat(h,", ").concat(m,")")},_={transform:"scale(".concat(n/100,")")},M={width:"".concat(n,"%"),height:"".concat(n,"%")},T={width:o.width*n/100,height:o.height*n/100},O=G()({"wait-drag":i,"is-immersive":g,"is-layer-active":l,"is-screen-expanded":g||!s});return Y.a.createElement(mr.a,{x:h,y:m,scale:n,id:"simulator-container",className:O,onMouseDown:this.handleMouseDown,onScaleChange:this.handleScaleChange,onOffsetChange:this.handleOffsetChange},function(t,n,r){return Y.a.createElement("div",{key:"1",className:G()("screen-viewport",{"is-fullscreen":f,"is-geely":"geely_center_control"===a.model}),style:k},Y.a.createElement("div",{className:"zoom-area",style:_},Y.a.createElement(Sr,null),!g&&Y.a.createElement(br,{project:a,shellType:y,isLandscape:v}),c&&Y.a.createElement(Hr,null)),Y.a.createElement("div",{className:"no-zoom-area-wrapper",style:M},Y.a.createElement("div",{className:"no-zoom-area",style:T},Y.a.createElement("div",{id:"ui-layers",className:"ui-layers ".concat(l?"is-active":"")},p&&Y.a.createElement(Dr,null),l&&!p&&Y.a.createElement(It,null)),Y.a.createElement("div",{id:"ui-comment-marker-panel"},Y.a.createElement(Qn,{getContentElement:e.getContentElementRef})))))},Y.a.createElement(Z.a,{onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp}))}}]),t}(V.PureComponent));qr.propTypes={scale:q.a.number,canvasOffset:q.a.object,screen:q.a.object,project:q.a.object,shellType:q.a.string,isStickyShow:q.a.bool,isScrollable:q.a.bool,isSpaceDown:q.a.bool,isLayerActive:q.a.bool,isCommentActive:q.a.bool,isColorPickerActive:q.a.bool,dispatch:q.a.func,isFullScreenMode:q.a.bool};var Vr=Object(T.connect)(function(e){var t=e.container,n=t.common,r=n.offset,a=n.keyFlags.isSpaceDown,o=t.previewSetting,i=o.toolbarActiveItem,c=o.isShowColorPicker,s=o.isFullScreenMode;return{scale:Object(De.c)(e),canvasOffset:r,screen:Object(De.d)(e),project:Object(De.b)(e),shellType:Object(De.i)(e),isSpaceDown:a,isStickyShow:Object(De.h)(e),isScrollable:Object(De.g)(e),isLayerActive:"inspect"==i,isCommentActive:"comment"==i,isFullScreenMode:s,isColorPickerActive:c}})(qr),Yr=n("QILm"),Xr=n.n(Yr),Zr=(n("WcC0"),function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.menuClassName,r=Xr()(e,["className","menuClassName"]);return Y.a.createElement(tn.Select,Q()({className:Object(tn.trimList)(["ToolbarSelect",t]),menuClassName:Object(tn.trimList)(["ToolbarSelectMenu",n])},r,{placeholder:" ",unstyled:!0,size:"small",menuX:"center"}))}}]),t}(V.PureComponent));z()(Zr,"propTypes",{className:q.a.string,menuClassName:q.a.string});var Kr=n("a1Ia"),Gr=n.n(Kr),Jr=yn.a.bind(Gr.a),Qr=function(e){function t(e){var n;return j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"updateSubToolbar",function(e){n.props.dispatch({type:"reducer:preview-toolbar:update",payload:a()({},e)})}),z()(U()(U()(n)),"pickColor",function(e){e.nativeEvent.stopImmediatePropagation(),MB.event("在标注模式中使用了自定义取色","运行页"),n.updateSubToolbar({isShowColorPicker:!0,showLayerList:!1,isSelectLayer:!1})}),z()(U()(U()(n)),"updateDeviceUnit",function(e){var t=n.props.emPixel,r=ca(e,t);n.updateSubToolbar(r?{unit:e,ratio:r}:{unit:e}),MB.event("在".concat(e,"下切换倍率为").concat(r),"运行页")}),z()(U()(U()(n)),"updateLanguage",function(e){MB.event("代码切换".concat(e),"运行页"),n.updateSubToolbar({language:e})}),z()(U()(U()(n)),"updateColorUnit",function(e){n.updateSubToolbar({colorUnit:e})}),z()(U()(U()(n)),"updateEmPixel",function(e){var t=Number(e);n.updateSubToolbar({emPixel:t,ratio:t}),n.setState({customEmPixel:""});var r=n.props.unit;MB.event("在".concat(r,"下切换倍率为").concat(t),"运行页")}),z()(U()(U()(n)),"onTypingEmPixel",function(e){if(e){n.setState({customEmPixel:e}),n.updateSubToolbar({emPixel:e,ratio:e});var t=n.props.unit;MB.event("在".concat(t,"在设置自定义倍率").concat(e),"运行页")}}),z()(U()(U()(n)),"handleMobileChange",function(e){var t=n.props.unit;n.updateSubToolbar({ratio:Number(e)}),MB.event("在".concat(t,"下切换倍率为").concat(e),"运行页")}),n.state={showLogin:!1,customEmPixel:""},n}return B()(t,e),I()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.unit;this.props.unit!==t&&t===$r&&this.updateSubToolbar({ratio:1})}},{key:"render",value:function(){var e=this.props,t=e.unit,n=e.emPixel,r=e.ratio,a=e.language,o=e.isShowColorPicker,i=e.colorUnit,c=e.isLogin,s=this.state.customEmPixel,u=t===ta||t===ea,l=t===$r,d=t===ta?ia:oa,p=[{value:10,label:"10px"},{value:12,label:"12px"},{value:14,label:"14px"},{value:16,label:"16px"},{value:n,label:"".concat(n,"px")},Y.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},Y.a.createElement(tn.InputNumber,{size:"small",min:1,max:99,precision:0,value:s,placeholder:I18N.custom,onChange:this.onTypingEmPixel}))];return Y.a.createElement("div",{className:Jr("sub-toolbar","preview-sub-toolbar")},Y.a.createElement("div",{className:"mode"},Y.a.createElement(hn.b,{name:"cursor",type:"dora",className:Object(tn.trimList)(["cursor",!o&&"is-active"])}),Y.a.createElement(tn.Tooltip,{arrowed:!0,position:"bottom",duration:1500,className:Object(tn.trimList)(["picker",o&&"is-active"]),tipClassName:"marign-top-20",content:{click:c?null:I18N.preview.guide_login,hover:I18N.preview.color_picker}},Y.a.createElement(hn.b,{name:"tube",type:"dora",onClick:this.pickColor}))),Y.a.createElement("div",{className:"param"},Y.a.createElement(Zr,{className:"color-unit",menuClassName:"PreviewSubToolbarSelectMenu",value:i,optionList:aa,onChange:this.updateColorUnit}),Y.a.createElement(Zr,{menuClassName:"PreviewSubToolbarSelectMenu",placeholder:" ",optionList:ra,value:a,onChange:this.updateLanguage}),Y.a.createElement(Zr,{className:"device-unit",menuClassName:"PreviewSubToolbarSelectMenu",optionList:na,value:t,onChange:this.updateDeviceUnit}),u?Y.a.createElement(Zr,{menuClassName:"PreviewSubToolbarSelectMenu",optionList:d,value:r,onChange:this.handleMobileChange}):l?Y.a.createElement("span",{className:"px-ratio"},"@1x"):Y.a.createElement(Zr,{className:"em-pixel",menuClassName:"PreviewSubToolbarSelectMenu scale-select-menu",optionList:p,value:n,onChange:this.updateEmPixel})))}}]),t}(V.PureComponent);z()(Qr,"propTypes",{unit:q.a.string,language:q.a.string,ratio:q.a.number,colorUnit:q.a.string,isShowColorPicker:q.a.bool,emPixel:q.a.number,isLogin:q.a.bool,dispatch:q.a.func});var $r="px",ea="pt",ta="dp",na=[$r,"em","rem",ta,ea],ra=[{value:"swift",label:"Swift"},{value:"android",label:"Android"},{value:"css",label:"CSS"},{value:"less",label:"Less"},{value:"sass",label:"Sass"},{value:"stylus",label:"Stylus"}],aa=[{value:"hex",label:"Hex"},{value:"rgb",label:"RGB"},{value:"rgba",label:"RGBA"},{value:"argb",label:"ARGB"}],oa=[1,2,3].map(function(e){return{value:e,label:"@".concat(e,"x")}}),ia=[.75,1,1.5,2,3,4].map(function(e){return{value:e,label:"@".concat(e,"x")}}),ca=function(e,t){return"em"===e||"rem"===e?t:1},sa=Object(T.connect)(function(e){var t=e.model.user,n=e.container.previewSetting;return{isLogin:Boolean(t.id),unit:n.unit,emPixel:n.emPixel,ratio:n.ratio,language:n.language,isShowColorPicker:n.isShowColorPicker,colorUnit:n.colorUnit}})(Qr),ua=n("DqDi"),la=n("Lyer"),da=n("EDI8"),pa=n.n(da),fa=yn.a.bind(pa.a),ha=MB.config.SCALES,ma=function(e){function t(){var e;return j()(this,t),e=R()(this,P()(t).call(this)),z()(U()(U()(e)),"handleZoomIn",function(){var t=e.props,n=t.scale,r=t.dispatch;t.fromFullScreen&&MB.event("全屏模式缩放","运行页");var a=ha.findIndex(function(e){return e>n});r({type:"entry:preview:set:scale",payload:{scale:ha[a]||ha[ha.length-1]}})}),z()(U()(U()(e)),"handleZoomOut",function(){var t=e.props,n=t.scale,r=t.dispatch;t.fromFullScreen&&MB.event("全屏模式缩放","运行页");var a=ha.findIndex(function(e){return e>=n});r({type:"entry:preview:set:scale",payload:{scale:ha[a-1]||ha[0]}})}),z()(U()(U()(e)),"handleResetScale",function(){(0,e.props.dispatch)({type:"entry:preview:set:scale",payload:{scale:100}})}),z()(U()(U()(e)),"handleKeyDown",function(t){va(t,e.handleZoomIn,e.handleZoomOut,e.handleResetScale)}),e.state={isGuideShow:!1},e}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fromFullScreen||(this.openGuideTimer=setTimeout(function(){e.setState({isGuideShow:!0})},600))}},{key:"componentWillUnmout",value:function(){clearTimeout(this.openGuideTimer)}},{key:"render",value:function(){var e=this.props,t=e.scale,n=e.project,r=this.state.isGuideShow,a=t<400,o=t>20;return Y.a.createElement(la.a,{id:"preview-zoom",localeKey:"zoom",X:"left",isOpen:r,gotItBtn:!0,noCloseBtn:!0},Y.a.createElement("div",{className:fa("zoom-count","preview-zoom-btn",{template:n.template})},Y.a.createElement("a",{id:"zoomout",disabled:!o,title:I18N.zoomout,onClick:this.handleZoomOut,className:"fs-16"},Y.a.createElement(tn.SVG,{name:"scale_reduce"})),Y.a.createElement("span",null,"".concat(Math.round(t),"%")),Y.a.createElement("a",{id:"zoomin",disabled:!a,title:I18N.zoomin,onClick:this.handleZoomIn,className:"fs-16"},Y.a.createElement(tn.SVG,{name:"scale_enlarge"})),Y.a.createElement(Z.a,{onKeyDown:this.handleKeyDown})))}}]),t}(V.PureComponent);z()(ma,"propTypes",{scale:q.a.number,project:q.a.object,dispatch:q.a.func,fromFullScreen:q.a.bool}),z()(ma,"defaultProps",{fromFullScreen:!1});var va=function(e,t,n,r){(e.ctrlKey||e.metaKey)&&(187==e.keyCode&&(e.preventDefault(),t()),189==e.keyCode&&(e.preventDefault(),n()),48==e.keyCode&&(e.preventDefault(),r()))},ga=n("S8MF"),ya=function(e){function t(){var e;return j()(this,t),e=R()(this,P()(t).call(this)),z()(U()(U()(e)),"handleShare",function(){e.setState({isSharingModalOpen:!0}),MB.event("点击了分享按钮","运行页")}),z()(U()(U()(e)),"onCloseSharingModal",function(){return e.setState({isSharingModalOpen:!1})}),e.state={isSharingModalOpen:!1},e}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props.dispatch,t=this.state.isSharingModalOpen;return Y.a.createElement(tn.Tooltip,{position:"bottom",duration:1e3,content:{hover:I18N.preview.share},tipClassName:"marign-top-20"},Y.a.createElement(hn.b,{type:"dora",name:"share",className:"share-icon",onClick:this.handleShare}),Y.a.createElement(ga.a,{dispatch:e,isOpen:t,onClose:this.onCloseSharingModal,app:MB.project()}))}}]),t}(V.PureComponent);ya.propTypes={dispatch:q.a.func};var ba=n("gX9a"),wa=n.n(ba),Sa=yn.a.bind(wa.a),Ea=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.canSetDeviceShell,n=e.isScrollable,r=e.isHighlight,a=e.isStickyShow,o=e.shellType,i=e.disabled,c=e.dispatch,s=Y.a.createElement(tn.Tooltip,{position:"bottom",tipClassName:"marign-top-20",duration:1e3,content:{hover:i?null:I18N.preview.setting}},Y.a.createElement(hn.b,{name:"cog",type:"dora"}));return Y.a.createElement(tn.Dropdown,{disabled:i,menuClassName:Sa("play-setting-menu"),opener:s,menuX:"right",menu:Y.a.createElement(xa,{canSetDeviceShell:t,isScrollable:n,isHighlight:r,isStickyShow:a,shellType:o,dispatch:c})})}}]),t}(V.PureComponent);z()(Ea,"propTypes",{canSetDeviceShell:q.a.bool,isScrollable:q.a.bool,isHighlight:q.a.bool,isStickyShow:q.a.bool,shellType:q.a.string,disabled:q.a.bool,dispatch:q.a.func});var xa=function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"handleToggleScrollable",function(e){n.props.dispatch({type:"entry:preview-setting:update:is-scrollable",payload:{isScrollable:e}})}),z()(U()(U()(n)),"handleToggleHighlight",function(e){n.props.dispatch({type:"entry:preview-setting:update:is-highlight",payload:{isHighlight:e}})}),z()(U()(U()(n)),"handleToggleSticky",function(e){n.props.dispatch({type:"entry:preview-setting:update:is-sticky-show",payload:{isStickyShow:e}})}),z()(U()(U()(n)),"handleUpdateShellType",function(e){var t=e.value;n.props.dispatch({type:"entry:preview-setting:update:shell-type",payload:{shellType:t}})}),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.canSetDeviceShell,n=e.isScrollable,r=e.isHighlight,a=e.isStickyShow,o=e.shellType,i=t?Rt.g:Rt.h,c=n?o:"none";return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("div",{className:"line"},Y.a.createElement("label",null,I18N.content_scrollable),Y.a.createElement(tn.Switch,{isChecked:n,onChange:this.handleToggleScrollable})),Y.a.createElement("div",{className:"line"},Y.a.createElement("label",null,I18N.highlight_clickable),Y.a.createElement(tn.Switch,{isChecked:r,onChange:this.handleToggleHighlight})),Y.a.createElement("div",{className:"line"},Y.a.createElement("label",null,I18N.sticky_visible),Y.a.createElement(tn.Switch,{isChecked:a,onChange:this.handleToggleSticky})),Y.a.createElement("div",{className:"line"},Y.a.createElement("label",null,I18N.shell_type),Y.a.createElement(tn.RadioGroup,{size:"small",isDisabled:!n,value:c,optionList:i,onChange:this.handleUpdateShellType})))}}]),t}(V.PureComponent);z()(xa,"propTypes",{canSetDeviceShell:q.a.bool,isScrollable:q.a.bool,isHighlight:q.a.bool,isStickyShow:q.a.bool,shellType:q.a.oneOf(["device","default","none"]),dispatch:q.a.func});var Ca=n("RtVw"),ka=n.n(Ca),_a=function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"handleFullScreen",function(){MB.event("全屏模式开启","运行页");var e=n.props.dispatch;e({type:"entry:preview:select",payload:{toolbarActiveItem:Rt.c}}),e({type:"reducer:preview-toolbar:fullscreen",payload:{isFullScreenMode:!0}}),e({type:"entry:auto-fit:preview:scale"}),e({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:-28}}})}),n}return B()(t,e),I()(t,[{key:"render",value:function(){return Y.a.createElement(tn.Tooltip,{position:"bottom",tipClassName:"margin-top-20",duration:1e3,content:I18N.preview.fullscreen,style:{lineHeight:0,cursor:"pointer"}},Y.a.createElement("div",{className:ka.a.fullscreen,onClick:this.handleFullScreen},Y.a.createElement(tn.SVG,{name:"preview/fullscreen"})))}}]),t}(V.PureComponent);z()(_a,"propTypes",{dispatch:q.a.func});var Ma=n("rtgd"),Ta=n.n(Ma),Oa=function(e){function t(e){var n;return j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleTabChange",function(e){var t=n.props.dispatch,r=Rt.d[e];t({type:"entry:preview:select",payload:{toolbarActiveItem:Rt.d[e]}}),MB.event("".concat(Rt.i[r]),"运行页")}),e.dispatch({type:"reducer:preview-toolbar:active-item:init"}),Ra()&&n.props.dispatch({type:"entry:preview:select",payload:{toolbarActiveItem:Rt.b}}),n}return B()(t,e),I()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.toolbarActiveItem,n=e.loadSliceUrl;t!=this.props.toolbarActiveItem&&this.props.dispatch({type:"reducer:preview-toolbar:update",payload:{isShowColorPicker:!1,isSelectLayer:!1}}),n!=this.props.loadSliceUrl&&Aa(n)}},{key:"render",value:function(){var e=this.props,t=e.scale,n=e.project,r=e.dispatch,a=e.toolbarActiveItem,o=e.existUnreadComment,i=e.isScrollable,c=e.isHighlight,s=e.isStickyShow,u=e.shellType,l=Rt.d.indexOf(a)||0,d=a!=Rt.c,p=n.name||"",f=!Na(),h=MB.isHTMLZip()?Rt.f:Rt.e,m=!MB.isHTMLZip()&&o,v=Y.a.createElement(ma,{scale:t,project:n,dispatch:r});return n.template?v:Y.a.createElement("header",{className:Ta.a["preview-toolbar"]},Y.a.createElement("div",{className:"toolbar-left"},!f&&Y.a.createElement("a",{title:I18N.back,onClick:ja},Y.a.createElement(hn.b,{name:"back_fc",type:"dora",className:"fs-16"})),Y.a.createElement("span",{className:"project-name",title:p},p)),Y.a.createElement("div",{className:"toolbar-main"},v,Y.a.createElement("div",{className:"toolbar-main-wrapper"},Y.a.createElement(ua.b,{tabs:h,activeIndex:l,onChange:this.handleTabChange,className:"preview-toolbar-nav",hideBorder:!0}),m&&Y.a.createElement("span",{className:"unread"}))),Y.a.createElement("div",{className:"toolbar-right"},Y.a.createElement(Ea,{canSetDeviceShell:Object(vr.a)(n),disabled:d,isScrollable:i,isHighlight:c,isStickyShow:s,shellType:u,dispatch:r}),Y.a.createElement("span",{className:"line"}),Y.a.createElement(ya,{dispatch:r}),Y.a.createElement("span",{className:"line"}),Y.a.createElement(_a,{dispatch:r})))}}]),t}(V.PureComponent);z()(Oa,"propTypes",{scale:q.a.number,project:q.a.object,toolbarActiveItem:q.a.string,existUnreadComment:q.a.bool,loadSliceUrl:q.a.string,isScrollable:q.a.bool,isHighlight:q.a.bool,isStickyShow:q.a.bool,shellType:q.a.string,dispatch:q.a.func});var ja=function(){Na()&&MB.designer.backDesign()},Na=function(){return!MB.f.inSharing&&"file:"!==window.location.protocol},Ia=function(e){return Object(s.b)(e,null,{method:"POST"})},Aa=function(){var e=ut()(i.a.mark(function e(t){var n,r,a,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,a=1;case 2:if(!n){e.next=16;break}return e.next=5,Object(ne.n)(Math.min(2e3*a++,1e4));case 5:return e.next=7,Ia(t);case 7:if(o=e.sent,c=o.url,"ok"===o.status&&(n=!1,r=c),!(a>20)){e.next=14;break}return Object(ne.d)(),e.abrupt("return",!1);case 14:e.next=2;break;case 16:return Object(ne.e)({url:"/".concat(r),name:name,type:"zip"}),e.abrupt("return",!0);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ra=function(){return new URLSearchParams(location.search).has("inspect")},La=Object(T.connect)(function(e){var t=e.model,n=t.current.screenCid,r=t.unreadComment.unreadCountScreenMap,a=e.container,o=a.common.scale,i=a.previewSetting,c=i.toolbarActiveItem,s=i.loadSliceUrl,u=Object(De.b)(e),l=Object(De.g)(e),d=Object(De.e)(e),p=Object(De.h)(e),f=Object(De.i)(e);return{scale:o,project:u,toolbarActiveItem:c,existUnreadComment:!!r[n],loadSliceUrl:s,isScrollable:l,isHighlight:d,isStickyShow:p,shellType:f}})(Oa),Pa=n("0/XF"),Da=n("l00i"),Ba=n.n(Da),Fa=n("lwmc"),Ua=function(e){function t(e){var n;return j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleExpand",function(e,t){e.stopPropagation();var r=n.state.collapseKeySet,a=t.cid,o=new ir.a(r);r.has(a)?o.delete(a):o.add(a),n.setState({collapseKeySet:o})}),z()(U()(U()(n)),"handleActivate",function(e,t){e.stopPropagation(),n.props.activeCid!==t.cid?(n.props.dispatch({type:"entry:sync-runner:set-screen",payload:{cid:t.cid}}),n.props.dispatch({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:0}}})):n.handleExpand(e,t)}),z()(U()(U()(n)),"handleKeyDown",function(e){(e.ctrlKey||e.metaKey)&&(186==e.keyCode&&(e.preventDefault(),n.resetExpandAll()),222==e.keyCode&&(e.preventDefault(),n.closeExpanedAll()))}),z()(U()(U()(n)),"resetExpandAll",function(){n.setState({collapseKeySet:new ir.a})}),z()(U()(U()(n)),"closeExpanedAll",function(){var e=(n.props.screenTreeData||{}).childListMap,t=new ir.a;Ba()(e).map(function(e){var n=te()(e,2),r=n[0],a=n[1];Array.isArray(a)&&a.length&&t.add(r)}),n.setState({collapseKeySet:t})}),n.state={collapseKeySet:new ir.a},n.treeProps={renderItem:e.renderCommentIcon,handleScreenItemActions:{handleExpand:n.handleExpand,handleActivate:n.handleActivate}},n}return B()(t,e),I()(t,[{key:"componentDidUpdate",value:function(e){if(e.activeCid!==this.props.activeCid){var t=Screen.find(this.props.activeCid);if(t.parent_cid){var n=this.state.collapseKeySet,r=new ir.a(n);n.has(t.parent_cid)&&r.delete(t.parent_cid),this.setState({collapseKeySet:r})}}}},{key:"render",value:function(){var e=this.props,t=e.activeCid,n=e.isSearching,r=e.screenTreeMap,a=e.screenDataMap;return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Fa.a,{collapseKeySet:this.state.collapseKeySet,activeCid:t,isSearching:n,screenTreeMap:r,screenDataMap:a,treeProps:this.treeProps}),Y.a.createElement(Z.a,{onKeyDown:this.handleKeyDown}))}}]),t}(V.PureComponent);z()(Ua,"propTypes",{activeCid:q.a.string,isSearching:q.a.bool,screenTreeData:q.a.object,screenTreeMap:q.a.object,screenDataMap:q.a.object,renderCommentIcon:q.a.func,dispatch:q.a.func});var Wa=n("L0cU"),za=function(e){function t(e){var n;return j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleActivateScreen",function(e){var t=n.props,r=t.activeCid,a=t.dispatch;e!==r&&a({type:"entry:sync-runner:set-screen",payload:{cid:e}})}),n.treeProps={renderItem:e.renderCommentIcon},n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.activeCid,n=function e(t,n,r){var a=r[t]?[r[t]]:[];return n[t]&&n[t].forEach(function(t){var o=t.cid,i=e(o,n,r);a.push.apply(a,ce()(i))}),a}("root",e.screenTreeMap,e.screenDataMap);return Y.a.createElement(Wa.a,{screenList:n,projectToken:MB.currentProject.access_token,activeScreenCid:t,onClickScreenItem:this.handleActivateScreen,treeProps:this.treeProps})}}]),t}(V.PureComponent);z()(za,"propTypes",{activeCid:q.a.string,screenTreeMap:q.a.object,screenDataMap:q.a.object,renderCommentIcon:q.a.func,dispatch:q.a.func});var Ha=n("sEfC"),qa=n.n(Ha),Va=function(e,t,n){for(var r=[],o=0,i=Ba()(e),c=0;c<i.length;c++){var s=te()(i[c],2),u=s[0],l=s[1];t&&t.length>0&&l.toLowerCase().includes(t)&&r.push(a()({},n[u],{index:o++}))}return r},Ya=n("naIL"),Xa=n.n(Ya),Za=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleSearch",function(e){n.debounceSearch(e.toLowerCase()),n.setState({keyword:e})}),z()(U()(U()(n)),"debounceSearch",qa()(function(e){MB.event("使用了页面搜索","运行页"),n.props.dispatch({type:"reducer:preview-panel:search",payload:{screenSearch:e}})},300)),z()(U()(U()(n)),"handleListView",function(){var e=n.props.toolbarActiveItem;MB.event("在".concat(Rt.i[e],",点击了列表"),"运行页"),n.setState({imageMode:!1})}),z()(U()(U()(n)),"handleThumbnailView",function(){var e=n.props.toolbarActiveItem;MB.event("在".concat(Rt.i[e],",点击了缩略图"),"运行页"),n.setState({imageMode:!0})}),z()(U()(U()(n)),"renderCommentIcon",function(e){var t=n.props.screenCommentThreadCountMap;if((t&&t[e.cid]||0)>=1&&!MB.isHTMLZip())return Y.a.createElement("span",{className:"toggle-comment"},Y.a.createElement(hn.b,{type:"dora",name:"comment"}))});var r=e.screenTreeData,a=r.nodeMap,o=r.screenNameCidMap,i=e.screenSearch;return n.state={keyword:"",imageMode:e.isDemo,searchScreenKeyMap:Va(o,i,a)||[]},n}return B()(t,e),I()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.screenSearch,n=this.props,r=n.screenTreeData,a=r.nodeMap,o=r.screenNameCidMap;if(t!=n.screenSearch){var i=Va(o,t,a)||[];this.setState({searchScreenKeyMap:i})}}},{key:"render",value:function(){var e=this.props,t=e.screenTreeData,n=e.currentScreenCid,r=e.screenSearch,a=e.dispatch,o=this.state,i=o.imageMode,c=o.keyword,s=o.searchScreenKeyMap,u=r.length>0,l=u?{root:s}:t.childListMap;return Y.a.createElement("div",{className:Xa.a["screen-panel"]},Y.a.createElement("div",{className:"search-box"},Y.a.createElement(Pa.a,{value:c,placeholder:I18N.preview.search,onChange:this.handleSearch}),Y.a.createElement("div",{className:"screen-mode-tab"},Y.a.createElement(tn.Tooltip,{className:"view-mode-icon",content:{hover:I18N.preview.list_mode},duration:1e3,position:"bottom",tipClassName:"marign-top-20"},Y.a.createElement(hn.b,{type:"dora",name:"list",className:i?"fs-color-gray":"",onClick:this.handleListView})),Y.a.createElement(tn.Tooltip,{className:"view-mode-icon",content:{hover:I18N.preview.image_mode},duration:1e3,position:"bottom",tipClassName:"marign-top-20"},Y.a.createElement(hn.b,{type:"dora",name:"cover",className:i?"":"fs-color-gray",onClick:this.handleThumbnailView})))),Y.a.createElement("div",{className:"screen-list-container rn-content-body"},i?Y.a.createElement(za,{activeCid:n,screenTreeMap:l,screenDataMap:t.nodeMap,renderCommentIcon:this.renderCommentIcon,dispatch:a}):Y.a.createElement(Ua,{activeCid:n,isSearching:u,screenTreeData:t,screenTreeMap:l,screenDataMap:t.nodeMap,renderCommentIcon:this.renderCommentIcon,dispatch:a})))}}]),t}(V.PureComponent);z()(Za,"propTypes",{screenTreeData:q.a.object,screenCommentThreadCountMap:q.a.object,currentScreenCid:q.a.string,screenNameCidMap:q.a.object,screenSearch:q.a.string,toolbarActiveItem:q.a.string,isDemo:q.a.bool,noSearch:q.a.bool,dispatch:q.a.func});var Ka=Object(T.connect)(function(e){return{screenTreeData:Ja(e.model.screens,e.model.current.projectCid),screenCommentThreadCountMap:Ga(e.model.commentThreads),currentScreenCid:e.model.current.screenCid,screenSearch:e.container.screens.screenSearch}})(Za),Ga=Object(ne.h)(function(e){return e.reduce(function(e,t){return e[t.screen_cid]=(e[t.screen_cid]||0)+1,e},{})}),Ja=Object(ne.h)(function(e,t){var n={},r={},a=z()({},"root",[]);return e.forEach(function(e){if(e.project_cid===t){var o=e.cid,i=e.position,c=e.parent_cid||"root";n[o]=e,r[o]=String(e.name).toLowerCase(),void 0===a[c]&&(a[c]=[]),a[c].push({cid:o,position:i})}}),b()(a).forEach(function(e){return e.sort(function(e,t){return n[e.cid].position-n[t.cid].position})}),{rootCid:"root",nodeMap:n,childListMap:a,screenNameCidMap:r}}),Qa=n("8fIB"),$a=n.n(Qa),eo=function(e,t){return new $a.a(function(n){e.src=t,e.onload=function(){return n(e)},e.onerror=n})},to=function(){var e=$a.a.resolve("QUEUE_HEAD");return{pushTask:function(t){var n=e.then(t).catch(console.log);return e=n,n}}}().pushTask,no=function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"getElementRef",function(e){return n.imageRef=e}),n}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){var e=this;to(ut()(i.a.mark(function t(){var n,r,a,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.src,a=n.adjustImage,t.next=3,eo(e.imageRef,r);case 3:o=t.sent,a&&o&&Object(ne.b)({image:o,adjust:a});case 5:case"end":return t.stop()}},t,this)}))).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this.props,t=(e.src,e.adjustImage,Xr()(e,["src","adjustImage"]));return Y.a.createElement("img",Q()({alt:"",ref:this.getElementRef},t))}}]),t}(V.PureComponent);no.propTypes={src:q.a.string,adjustImage:q.a.number};var ro=n("2s0x"),ao=n.n(ro),oo=yn.a.bind(ao.a),io=!1,co=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleActiveLayer",function(e){n.setState({activeLayerId:e})}),z()(U()(U()(n)),"downloadSlice",ut()(i.a.mark(function e(){var t,r,a,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.projectCid,a=t.projectName,o=t.isLogin,!0!==n.state.download&&o){e.next=3;break}return e.abrupt("return");case 3:return n.startLoadSlice(),e.next=6,mo(r,a);case 6:c=e.sent,n.endLoadSlice(c);case 8:case"end":return e.stop()}},e,this)}))),z()(U()(U()(n)),"startLoadSlice",function(){n.startTime=Date.now(),n.setState({download:!0}),MB.event("点击下载全部切图","运行页")}),z()(U()(U()(n)),"endLoadSlice",function(e){e&&(MB.event("下载全部切图时长".concat(Date.now()-n.startTime),"运行页"),n.setState({download:!1}))}),z()(U()(U()(n)),"requestLayer",function(e){var t=n.props.dispatch;t({type:"REQUEST_SELECT_LAYER",payload:{layerID:e}}),t({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:!0}})}),io=!1,n.state={download:!1,activeLayerId:null};var r=n.props,a=r.loading,o=r.dispatch;return a&&o({type:"reducer:slice:init"}),n}return B()(t,e),I()(t,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.projectCid,n=e.dispatch,r=this.state.download,a="/api/v2/projects/".concat(t,"/build/slices_zips.json");r&&(io=!0,n({type:"reducer:preview-toolbar:update",payload:{loadSliceUrl:a}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.download,r=t.activeLayerId,a=this.props,o=a.slicesMap,i=a.loading,c=a.error,s=a.currentScreenCid,u=a.isLogin;return c||i?Y.a.createElement(fo,null):0===o.length?Y.a.createElement(ho,null):Y.a.createElement("div",{className:oo("slice-container")},o.map(function(t){var n=t.name,a=t.id,o=t.screen_cid,i=t.image,c=t.image_set;return Y.a.createElement(so,{key:a,src:i,name:n,currentScreenCid:s,id:a,imageSet:c,screenCid:o,requestLayer:e.requestLayer,activeLayer:e.handleActiveLayer,activeLayerId:r})}),Y.a.createElement(uo,{onClick:this.downloadSlice,isLoading:n,isLogin:u}))}}]),t}(V.PureComponent);co.propTypes={slicesMap:q.a.array.isRequired,loading:q.a.bool,error:q.a.bool,currentScreenCid:q.a.string,isLogin:q.a.bool,projectCid:q.a.string,projectName:q.a.string,dispatch:q.a.func};var so=function(e){function t(){var e;return j()(this,t),e=R()(this,P()(t).call(this)),z()(U()(U()(e)),"isIncurrentScreen",function(){return e.props.screenCid===e.props.currentScreenCid}),z()(U()(U()(e)),"handleClick",function(){var t=e.props,n=t.id,r=t.requestLayer;(0,t.activeLayer)(n),e.isIncurrentScreen()?r(n):console.warn("Not in current Screen")}),z()(U()(U()(e)),"handleOnload",function(){e.setState({imageLoad:!0})}),z()(U()(U()(e)),"handleError",function(){throw new Error("image load fail")}),z()(U()(U()(e)),"handleMouseEnter",function(){e.setState({loadSingleSlice:!0})}),z()(U()(U()(e)),"handleMouseLeave",function(){e.setState({loadSingleSlice:!1})}),z()(U()(U()(e)),"handleSingleDownload",function(t){t.persist(),t.stopPropagation(),e.delaySingleDownload()}),e.state={imageLoad:!1,loadSingleSlice:!1},e.imageRef=function(t){return e.$image=t},e.delaySingleDownload=qa()(function(){var t=e.props,n=t.imageSet,r=t.name;Object(ne.e)({url:n,name:r,type:"zip"}),MB.event("在切图列表中下载单张切图","运行页")},500,{leading:!0}),e}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.src,r=e.activeLayerId,a=e.id,o=this.state,i=o.imageLoad,c=o.loadSingleSlice,s=i?"opacity-1":"opacity-0",u={display:i?"block":"none"},l=oo("slice-item",{active:r===a});return Y.a.createElement(tn.Tooltip,{type:"block",content:{click:this.isIncurrentScreen()?null:I18N.preview_panel.not_incurrent_screen}},Y.a.createElement("div",{className:l,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},Y.a.createElement("div",{className:"slice-item-wrap",style:{background:"url(/images/preview/slice-bg.png) left top",backgroundSize:"cover"}},!i&&Y.a.createElement("img",{src:"/images/preview/image-load-gif.gif",alt:"Loading..."}),Y.a.createElement(no,{style:u,src:n,alt:t,adjustImage:38,className:"".concat(s),onLoad:this.handleOnload,onError:this.handleError})),Y.a.createElement("div",{className:"slice-item-content"},Y.a.createElement("span",{className:"slice-item-name textEllipsis"},t),c&&Y.a.createElement(hn.b,{name:"export",type:"dora",onClick:this.handleSingleDownload}))))}}]),t}(V.PureComponent);so.propTypes={name:q.a.string,src:q.a.string.isRequired,id:q.a.number.isRequired,imageSet:q.a.string.isRequired,screenCid:q.a.string.isRequired,requestLayer:q.a.func.isRequired,activeLayer:q.a.func,activeLayerId:q.a.number,currentScreenCid:q.a.string.isRequired};var uo=function(e){var t=e.onClick,n=e.isLoading,r=e.isLogin?null:I18N.preview.guide_login;return Y.a.createElement(tn.Tooltip,{content:{click:r},type:"block",position:"top",arrowed:!1,className:oo("download"),onClick:t},I18N.preview_panel.download,n?Y.a.createElement(po,null):Y.a.createElement(hn.b,{type:"dora",name:"export",className:oo("icon-download")}))};uo.propTypes={onClick:q.a.func,isLoading:q.a.bool,isLogin:q.a.bool};var lo=function(){return Y.a.createElement("div",{className:oo("layer-load")},Y.a.createElement("span",{className:oo("spinner")}))},po=function(){return Y.a.createElement("div",{className:oo("download-slice-load")},Y.a.createElement(lo,null))},fo=function(){return Y.a.createElement("div",{className:oo("slice-load-wrap")},Y.a.createElement(lo,null))},ho=function(){return Y.a.createElement("div",{className:oo("no-slice")},Y.a.createElement("img",{src:"/images/preview/no-slice@2x.png"}),Y.a.createElement("span",null,I18N.preview_panel.no_slice),Y.a.createElement("span",null,I18N.preview_panel.slice_in_sketch),Y.a.createElement("a",{href:"https://s3.cn-north-1.amazonaws.com.cn/modao/sketch/MockingBot.sketchplugin.zip"},Y.a.createElement("img",{src:"/images/preview/ic_sketch@2x.png",alt:"sketch"}),I18N.preview_panel.download_sketch))},mo=function(){var e=ut()(i.a.mark(function e(t,n){var r,a,o,c,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,o=1;case 2:if(!r){e.next=22;break}if(!io){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,l(t);case 7:if(c=e.sent,s=c.url,"ok"!==c.status){e.next=15;break}r=!1,a=s,e.next=17;break;case 15:return e.next=17,Object(ne.n)(Math.min(2e3*o++,1e4));case 17:if(!(o>20)){e.next=20;break}return Object(ne.d)(),e.abrupt("return",!1);case 20:e.next=2;break;case 22:return Object(ne.e)({url:"/".concat(a),name:n,type:"zip"}),e.abrupt("return",!0);case 24:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),vo=Object(T.connect)(function(e){var t=e.model,n=t.current,r=n.screenCid,a=n.projectCid,o=t.user,i=e.container.slices;return{slicesMap:i.slices,loading:i.loading,error:i.error,isLogin:!!o.id,projectCid:a,currentScreenCid:r}})(co),go=n("GEF2"),yo=n.n(go),bo=yn.a.bind(yo.a),wo=function(e){function t(e){var n;return j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleBackToOrigin",function(){n.props.dispatch({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:0}}})}),z()(U()(U()(n)),"handleTabChange",function(e){n.setState({activeIndex:e})}),z()(U()(U()(n)),"toggleMinimized",function(){var e=n.props.toolbarActiveItem;n.setState(function(e){return{isMinimized:!e.isMinimized}}),MB.event("".concat(Rt.i[e],",点击了").concat(n.state.isMinimized?"展开":"收起","列表"),"运行页")}),n.state={isMinimized:MB.isUIChina()||MB.isForum(),activeIndex:0},n}return B()(t,e),I()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){"inspect"!==e.toolbarActiveItem&&this.setState({activeIndex:0})}},{key:"render",value:function(){var e=this.props,t=e.isDemo,n=e.project,r=e.screensCount,a=e.toolbarActiveItem,o=e.isDisplaced,i=this.state,c=i.isMinimized,s=i.activeIndex,u=[{type:"dora",label:"".concat(I18N.preview.pages," (").concat(r,")"),icon:"file_text"},{type:"dora",label:I18N.preview.images,icon:"slice"}],l="inspect"==a&&!MB.isHTMLZip(),d=l?u:u.slice(0,1),p=bo("preview-panel",{minimized:c},{"is-uichina":MB.isUIChina()||MB.isForum()}),f=bo("preview-panel-nav",{"single-nav":!l});return Y.a.createElement("div",{className:bo("preview-panel-wrapper"),style:{width:c?0:240}},Y.a.createElement("div",{className:bo("reset-btn",{"is-show":o}),onClick:this.handleBackToOrigin},I18N.click_to_origin),Y.a.createElement("div",{className:p},Y.a.createElement(ua.b,{tabs:d,activeIndex:s,onChange:this.handleTabChange,className:f,hideBorder:!0}),Y.a.createElement("div",{className:"preview-panel-nav-line",style:{opacity:l?0:1}}),0==s?Y.a.createElement(Ka,{toolbarActiveItem:a,isDemo:t}):Y.a.createElement(vo,{projectName:n.name}),Y.a.createElement("div",{className:bo("panel-toggle-minimize",{minimized:c}),onClick:this.toggleMinimized},Y.a.createElement(hn.b,{type:"fa",name:"angle-right",className:"toggle-icon"}))))}}]),t}(V.PureComponent);z()(wo,"propTypes",{project:q.a.object.isRequired,screensCount:q.a.number.isRequired,toolbarActiveItem:q.a.string.isRequired,isLoggedIn:q.a.bool,isDisplaced:q.a.bool,isDemo:q.a.bool,dispatch:q.a.func});var So=Object(T.connect)(function(e){var t=e.model,n=t.user,r=t.current.projectCid,a=t.projects,o=t.screens,i=e.container,c=i.common.offset,s=i.previewSetting.toolbarActiveItem,u=!!n.id,l=Boolean(c.x||c.y),d=xo(a,r),p=Eo.has(d.access_token);return{isLoggedIn:u,isDisplaced:l,screensCount:o.reduce(function(e,t){return t.project_cid===r?e+1:e},0),project:d,isDemo:p,toolbarActiveItem:s}})(wo),Eo=new ir.a(["demo","cS1AXKF5jtrJePbEKiYcdcHosQPdzrk","workout","sI3GY2tDz76RrZ4MGFiIcZTZpAHyluC","UMQzYmknxWeHNvvVyeyJDuSkgyvi6Xw","9Py1L5RdC8ZPRSmnWEt4uuUUSDUAxkM"]),xo=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Co=n("qOCw"),ko=n("XrEr"),_o=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e=e.toString(),"pt"!==n?e.replace(t,n):r?Object(ko.d)(e):e.replace(t,"")},Mo={px:{x:"left",y:"top",width:"width",height:"height",lineHeight:"line-height",opacity:"opacity",border:"border",borderRadius:"border-radius",borderColor:"border-color",borderWidth:"border-width",backgroundColor:"background-color",color:"color",fontSize:"font-size",fontFamily:"font-family",fontStyle:"font-style",textAlign:"text-align",shadows:"box-shadow",innerShadows:"inner-shadow"},dp:{x:"left",y:"top",width:"layout_width",height:"layout_height",border:"border",opacity:"opacity",color:"textColor",fontSize:"textSize",fontFamily:"font-family",fontStyle:"font-style",textAlign:"gravity",backgroundColor:"background",borderRadius:"radius",borderColor:"border-color",lineHeight:"line-height",borderWidth:"border-width",shadows:"box-shadow",innerShadows:"inner-shadow"},pt:{x:"x",y:"y",width:"width",height:"height",opacity:"opacity",border:"border",backgroundColor:"backgroundColor",color:"text-color",textAlign:"alignment",fontSize:"fontSize",fontFamily:"fontFamily",fontStyle:"font-style",borderRadius:"cornerRadius",borderColor:"borderColor",borderWidth:"border-width",lineHeight:"lineSpacing"}},To=n("PqLM"),Oo=n("RUem"),jo=function(e){var t=e.layer,n=e.unit,r=e.ratio,o=e.showGlobal,i=e.userPickColor,c=void 0===i?[]:i,s=e.globalColor,u=void 0===s?[]:s,l=e.globalText,d=void 0===l?[]:l,p=e.documentColor,f=void 0===p?[]:p,h=e.screenColor,m=void 0===h?[]:h,v=e.language,g=e.colorUnit,y=e.dispatch,b=t.src_left,w=t.src_top,S=t.src_width,E=t.src_height,x=t.origin_width,C=t.origin_height,k=t.bd_radius,_=t.line_height,M=t.bg_colors,T=void 0===M?[]:M,O=t.borders,j=void 0===O?[]:O,N=t.i,I=t.display_name,A=t.padding,R=void 0===A?0:A,L=t.hiddSpacing,P=void 0!==L&&L,D=t.text_styles,B=void 0===D?[]:D,F=t.alignment,U=t.vertical_alignment,W=t.image,H=t.text,q=t.letter_spacing,V=t.image_set_zip,X=t.shadows,Z=void 0===X?[]:X,K=t.inner_shadows,G=void 0===K?[]:K,J=t.rotation,Q=t.textShadows,$=void 0===Q?[]:Q,ee=t.image_set,te=void 0===ee?[]:ee,ne=t.name,re=j.length>0,ae=T.length>0,oe=!!W,ie=B.length>0&&H&&Object(Co.d)(t).length,ce=Z.length>0||$.length>0,se=G.length>0,le=V,de={left:b,top:w,width:x||S,height:C||E,borderRadius:k,opacity:t.o,rotation:J,ratio:r,unit:n};if("line"===ne){var pe=Object(To.h)(t,!0),fe=pe.length,he=pe.thickness,me=pe.angle;de.width=fe,de.height=he,de.rotation=me}var ve=Object(Co.a)(de),ge=ve.adapterTop,ye=ve.adapterLeft,be=ve.adapterWidth,we=ve.adapterHeight,Se=ve.radius,Ee=ve.opacity,xe=ve.rotate,Ce={lineHeight:_,letterSpacing:q,unit:n,ratio:r},ke=Object(Co.c)(Ce),_e=ke.lineHeight,Me=ke.letterSpacing,Te="number"==typeof N?N?"italic":"normal":void 0,Oe={textStyles:B,background:T,borders:j,shadows:Z,innerShadows:G,colorUnit:g,ratio:r,unit:n},je=Object(Co.b)(Oe),Ne=t.o&&100!=t.o?t.o/100:null,Ie=function(e){var t=e.attr,n=e.language,r=e.unit,a=Object(Co.e)(n),o=t.width,i=t.height,c=t.lineHeight,s=t.opacity,u=t.borderRadius,l=t.borderWidth,d=t.borderColor,p=t.backgroundColor,f=t.color,h=t.fontSize,m=t.fontFamily,v=t.fontStyle,g=t.boxShadow,y=t.textAlign,b=t.x,w=t.y,S=b&&z()({},Mo[a].x,_o(b,r,a)),E=w&&z()({},Mo[a].y,_o(w,r,a)),x=o&&z()({},Mo[a].width,_o(o,r,a)),C=i&&z()({},Mo[a].height,_o(i,r,a)),k=c&&z()({},Mo[a].lineHeight,_o(c,r,a)),_=s&&z()({},Mo[a].opacity,_o(s,r,a)),M=u&&z()({},Mo[a].borderRadius,_o(u,r,a)),T=p&&z()({},Mo[a].backgroundColor,_o(p,r,a,!0)),O=f&&z()({},Mo[a].color,_o(f,r,a,!0)),j=h&&z()({},Mo[a].fontSize,_o(h,r,a)),N=m&&z()({},Mo[a].fontFamily,_o(m,r,a)),I=v&&z()({},Mo[a].fontStyle,_o(v,r,a)),A=g&&z()({},Mo[a].shadows,g),R=l&&z()({},Mo[a].borderWidth,_o(l,r,a)),L=d&&z()({},Mo[a].borderColor,_o(d,r,a,!0)),P=y&&z()({},Mo[a].textAlign,y);return ue()({},S,E,x,C,k,_,M,R,L,T,O,j,I,P,A,N)}({attr:a()({x:ye,y:ge,width:be,height:we,lineHeight:_e,textAlign:F,opacity:Ne,borderRadius:Se},je),language:v,unit:n}),Ae=oe?"ImageView":ie?"TextView":"View",Re="screen"===t.type||t.kind?t.name:I,Le="line"===t.name;return o?Y.a.createElement(Oo.h,{adapterWidth:be,adapterHeight:we,documentColor:f,globalText:d,globalColor:u,screenColor:m,userPickColor:c,colorUnit:g,dispatch:y}):Y.a.createElement("div",null,Y.a.createElement(Oo.j,{value:Re}),Y.a.createElement(Oo.b,{adapterTop:ge,adapterLeft:ye,adapterWidth:be,adapterHeight:we,rotate:xe,radius:Se,opacity:Ee,unit:n,colorUnit:g}),ie&&Y.a.createElement(Oo.m,{textStyles:B,alignment:F,vertical_alignment:U,lineHeight:_e,letterSpacing:Me,ratio:r,unit:n,o:t.o,padding:R,fontStyle:Te,colorUnit:g,hiddSpacing:P,text:Object(Co.d)(t)}),ae&&Y.a.createElement(Oo.g,{backgroundColorSort:T,colorUnit:g}),re&&Y.a.createElement(Oo.c,{isStroke:Le,borderSort:j,ratio:r,unit:n,colorUnit:g}),ce&&Y.a.createElement(Oo.l,{shadows:Z,textShadows:$,colorUnit:g,unit:n,ratio:r}),se&&Y.a.createElement(Oo.l,{shadows:G,colorUnit:g,unit:n,ratio:r,isInnerShaow:!0}),le&&Y.a.createElement(Oo.i,{imageSetZip:V,name:t.display_name,imageSet:te}),Y.a.createElement(Oo.d,{code:Ie,whichAndView:Ae,language:v,text:Object(Co.d)(t)||""}))};jo.propTypes={userPickColor:q.a.array,screenColor:q.a.array,documentColor:q.a.array,globalText:q.a.array,globalColor:q.a.array,colorUnit:q.a.string,layer:q.a.object,getLayerRef:q.a.func,showGlobal:q.a.bool,unit:q.a.string,ratio:q.a.number,language:q.a.string,dispatch:q.a.func};var No=jo,Io=n("sxGJ"),Ao=n.n(Io),Ro=n("xn7q"),Lo=n.n(Ro),Po=function(e){function t(){var e;return j()(this,t),(e=R()(this,P()(t).call(this))).getScrollLayerRef=function(t){return e.layerRef=t},e.state={error:!1},e}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){this.clipBoard=new Ao.a('[data-type="copy"]')}},{key:"componentWillUnmount",value:function(){$(this.layerRef).perfectScrollbar("destroy"),this.clipBoard.destroy()}},{key:"componentWillReceiveProps",value:function(e){e.screenCid!=this.props.screenCid&&this.props.dispatch({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:!1}})}},{key:"componentDidUpdate",value:function(e){e.layer!=this.props.layer&&$(this.layerRef).perfectScrollbar({suppressScrollX:!0}),e.layer&&this.props.layer&&e.layer.id!=this.props.layer.id&&this.layerRef&&(this.layerRef.scrollTop=0)}},{key:"componentDidCatch",value:function(e){this.setState({error:!0}),console.error(e)}},{key:"render",value:function(){var e=this.props,n=e.isSelectLayer,r=e.layer,a=this.state.error;return Y.a.createElement("div",{className:Lo.a.previewPanelLayer},r?Y.a.createElement("div",{className:Lo.a.layerInfo,ref:this.getScrollLayerRef},a?Y.a.createElement(t.Error,null):Y.a.createElement(No,Q()({},this.props,{showGlobal:!n}))):Y.a.createElement(Oo.k,null))}}]),t}(V.PureComponent);z()(Po,"Error",function(){return Y.a.createElement("div",null,"Sorry!Error happend, Please refresh it")}),z()(Po,"propTypes",{colorUnit:q.a.string.isRequired,isSelectLayer:q.a.bool.isRequired,unit:q.a.string.isRequired,ratio:q.a.number.isRequired,layer:q.a.object,screenCid:q.a.string,dispatch:q.a.func.isRequired});var Do=Object(T.connect)(function(e){var t=e.container,n=t.layers,r=n.activeLayerID,o=n.visibilityScreenID,i=n.resourceByScreen,c=t.previewSetting,s=e.model,u=s.current,l=u.screenCid,d=u.projectCid,p=s.projects,f=c.isSelectLayer,h=Fo(p,d).device,m=Uo(f,i,o,r),v=Bo(i,o,h);return a()({},c,{layer:m},v,{screenCid:l})})(Po),Bo=Object(ne.h)(function(e,t,n){var r=[],a=[],o=[],i=[],c=e[t];if(c){var s=c.layers,u=Object(Co.f)(s);r=u.screenColor,i=u.globalText,a=c.documentColor,o=c.globalColor}return{screenColor:r,documentColor:a,globalColor:o,globalText:i}}),Fo=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Uo=Object(ne.h)(function(e,t,n,r){var o=t[n];if(!o||o.layers&&0==o.layers.length)return null;var i=o.layers;return e?Me()(i,function(e){return e.id===r}):a()({},i[0])}),Wo=n("zAG7"),zo=n("7Qib"),Ho=(n("oSKl"),function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(o))),z()(U()(U()(n)),"state",{formData:{name:"",email:"",pwd:""},submitErrMsg:"",submitted:!1}),z()(U()(U()(n)),"handleFormDataChange",function(e){return function(t){return n.setState({formData:a()({},n.state.formData,z()({},e,t))})}}),z()(U()(U()(n)),"handleEmailChange",function(e){return n.setState({formData:a()({},n.state.formData,{email:e})})}),z()(U()(U()(n)),"resetSubmitErrMsg",function(){return n.setState({submitErrMsg:""})}),z()(U()(U()(n)),"verifyEmail",function(e){return Wo.a.test(e)}),z()(U()(U()(n)),"handleSignUp",function(){var e=n.props.event,t=n.state.formData,r=t.name,a=t.email,o=t.pwd;if(n.resetSubmitErrMsg(),!n.verifyEmail(a))return n.setState({submitErrMsg:"请输入正确的 Email 地址"});Object(zo.d)("/events/sign_up.json",{username:r,email:a,password:o,locale:"zh-CN",event:e.name}).then(function(){return Object(zo.d)("/sessions.json",{email:a,password:o}).then(function(){return n.setState({submitted:!0})})},function(e){return n.setState({submitErrMsg:e.detail})})}),n}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.inMobile,n=e.isOpen,r=e.event,a=this.state,o=a.formData,i=o.name,c=o.email,s=o.pwd,u=a.submitErrMsg,l=a.submitted,d=!!i&&!!c&&!!s;return Y.a.createElement(tn.Modal,{className:"sign-up-modal ".concat(t?"modal-in-mobile":""),maskClassName:"modal-mask",title:"注册墨刀帐户",isOpen:n},l?Y.a.createElement("div",{className:"award-view"},Y.a.createElement("img",{className:"award",src:"/images/event/award.png"}),Y.a.createElement("p",{className:"success-tip"},r.successTip)):Y.a.createElement("div",{className:"sign-up-view"},Y.a.createElement("p",{className:"event-desc"},r.desc),Y.a.createElement("div",{className:"input-entry"},Y.a.createElement(hn.b,{className:"icon",type:"mb",name:"user"}),Y.a.createElement(tn.Input,{className:"input",placeholder:"姓名",defaultValue:i,onChange:this.handleFormDataChange("name")})),Y.a.createElement("div",{className:"input-entry"},Y.a.createElement(hn.b,{className:"icon",type:"mb",name:"mail"}),Y.a.createElement(tn.InputEmail,{className:"input",placeholder:"Email 地址",defaultValue:c,onChange:this.handleEmailChange})),Y.a.createElement("div",{className:"input-entry"},Y.a.createElement(hn.b,{className:"icon",type:"mb",name:"lock"}),Y.a.createElement(tn.Input,{className:"input",placeholder:"密码",type:"password",defaultValue:s,onChange:this.handleFormDataChange("pwd")})),!!u&&Y.a.createElement("p",{className:"error-msg"},"* ".concat(u)),Y.a.createElement(tn.Button,{className:"primary-button",type:"primary",isDisabled:!d,onClick:this.handleSignUp},"注册"),Y.a.createElement("p",{className:"agree-terms"},"点击「注册」按钮将视为您同意墨刀",Y.a.createElement("a",{href:"/tos",target:"_blank"},"使用条款"))))}}]),t}(V.PureComponent));Ho.propTypes={event:q.a.object,isOpen:q.a.bool,inMobile:q.a.bool};var qo=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.event,r=e.loggedIn,a=e.inMobile,o=e.dispatch;return Y.a.createElement("div",null,t&&!r&&Y.a.createElement(Ho,{inMobile:a,event:n,isOpen:t,onClose:function(){return o("event-sign-up:close:modal")}}))}}]),t}(V.PureComponent);qo.propTypes={open:q.a.bool,inMobile:q.a.bool,event:q.a.object,loggedIn:q.a.bool,dispatch:q.a.func};var Vo=Object(T.connect)(function(e){return a()({},e.container.eventSignUpModal,{loggedIn:!!e.model.user.id,inMobile:MB.isMobile()})})(qo),Yo=n("6PGs"),Xo=n.n(Yo),Zo=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){var e,t=this.props,n=t.screen,r=t.screenInOrder,a=t.shouldTextShow,o=t.reachFirstScreen,i=t.reachLastScreen,c=r.findIndex(function(e){return e===n.cid});return e=o?I18N.preview.firstScreen:i?I18N.preview.lastScreen:"".concat(c+1," / ").concat(r.length),Y.a.createElement("div",{className:G()(Xo.a["screen-info"],{show:a})},Y.a.createElement("div",null,e),Y.a.createElement("span",{className:"dot"}),Y.a.createElement("div",{className:"screen-name"},n.name))}}]),t}(V.PureComponent);z()(Zo,"propTypes",{screen:q.a.object,screenInOrder:q.a.array,shouldTextShow:q.a.bool,reachFirstScreen:q.a.bool,reachLastScreen:q.a.bool});n("mxnB");var Ko=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",{className:"last-screen","data-action":"last",onClick:this.props.onClick},Y.a.createElement(tn.SVG,{className:"left-arrow",name:"angle_bracket_left"})),Y.a.createElement("span",{className:"next-screen","data-action":"next",onClick:this.props.onClick},Y.a.createElement(tn.SVG,{className:"right-arrow",name:"angle_bracket_right"})))}}]),t}(V.PureComponent);z()(Ko,"propTypes",{onClick:q.a.func});n("peLG");var Go=function(e){function t(){return j()(this,t),R()(this,P()(t).apply(this,arguments))}return B()(t,e),I()(t,[{key:"render",value:function(){return Y.a.createElement("div",{className:"top-right-action"},Y.a.createElement("div",{className:"mode"},Y.a.createElement(tn.SVG,{name:"preview/daynight"}),Y.a.createElement("span",{className:"light","data-mode":"light",onClick:this.props.onClickMode}),Y.a.createElement("span",{className:"dark","data-mode":"dark",onClick:this.props.onClickMode})),Y.a.createElement("div",{className:"exit-full-screen",onClick:this.props.onClickExit},Y.a.createElement(tn.SVG,{name:"preview/exit"})))}}]),t}(V.PureComponent);z()(Go,"propTypes",{onClickMode:q.a.func,onClickExit:q.a.func});var Jo=n("Kurm"),Qo=n.n(Jo),$o=function(e){var t=document.querySelector(".full-screen header"),n=document.querySelector(".full-screen .preview-content-container > div:last-child"),r=document.querySelector(".x_handler"),a=document.querySelector(".y_handler"),o=document.querySelector(".x_track"),i=document.querySelector(".y_track"),c=document.querySelector("#simulator-container"),s=[t,n,r,a,o,i];"hide"===e?(c.style.overflow="visible",s.forEach(function(e){return e.style.opacity=0}),setTimeout(function(){return s.forEach(function(e){return e.style.pointerEvents="none"})},300)):"show"===e&&(c.style.overflow="hidden ",s.forEach(function(e){return e.style.pointerEvents="auto"}),setTimeout(function(){return s.forEach(function(e){return e.style.opacity=1})},300))},ei=function(e){function t(e){var n;return j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleExitFullScreen",function(){var e=n.props.dispatch;MB.event("全屏模式关闭","运行页"),e({type:"reducer:preview-toolbar:fullscreen",payload:{isFullScreenMode:!1}}),e({type:"entry:init:preview:scale"}),e({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:0}}})}),z()(U()(U()(n)),"setMode",function(e){var t=n.state.isDarkMode,r=e.target.dataset.mode;"light"===r&&t&&n.setState({isDarkMode:!1}),"dark"!==r||t||(MB.event("全屏模式暗色背景","运行页"),n.setState({isDarkMode:!0}))}),z()(U()(U()(n)),"goToLastScreen",function(){var e=n.props,t=e.screen,r=e.screenInOrder,a=e.dispatch,o=t.cid,i=r.findIndex(function(e){return e===o});i>0&&(a({type:"entry:sync-runner:set-screen",payload:{cid:r[i-1]}}),n.setState({shouldTextShow:!0,reachFirstScreen:!1,reachLastScreen:!1}));0===i&&n.setState({shouldTextShow:!0,reachFirstScreen:!0})}),z()(U()(U()(n)),"goToNextScreen",function(){var e=n.props,t=e.screen,r=e.screenInOrder,a=e.dispatch,o=t.cid,i=r.findIndex(function(e){return e===o});i<r.length-1&&(a({type:"entry:sync-runner:set-screen",payload:{cid:r[i+1]}}),n.setState({shouldTextShow:!0,reachFirstScreen:!1,reachLastScreen:!1}));i===r.length-1&&n.setState({shouldTextShow:!0,reachLastScreen:!0})}),z()(U()(U()(n)),"handleKeyDown",function(e){27===e.keyCode&&n.handleExitFullScreen(),37===e.keyCode&&n.goToLastScreen(),39===e.keyCode&&n.goToNextScreen()}),z()(U()(U()(n)),"handleNavigate",function(e){var t=e.currentTarget.dataset.action;"last"===t?n.goToLastScreen():"next"===t&&n.goToNextScreen()}),n.state={isDarkMode:!1,shouldTextShow:!1,reachFirstScreen:!1,reachLastScreen:!1},n}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){$o("hide")}},{key:"componentWillUnmount",value:function(){$o("show")}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.state.shouldTextShow&&(clearTimeout(this.timer),this.timer=setTimeout(function(){return t.setState({shouldTextShow:!1})},1500)),this.props.screen!==e.screen){var n=this.props,r=n.screen,a=n.screenInOrder,o=r.cid,i=a.findIndex(function(e){return e===o});0!==i&&this.setState({reachFirstScreen:!1}),i!==a.length-1&&this.setState({reachLastScreen:!1})}}},{key:"render",value:function(){var e=this.state,t=e.isDarkMode,n=e.shouldTextShow,r=e.reachFirstScreen,a=e.reachLastScreen,o=this.props,i=o.screen,c=o.screenInOrder,s=o.dispatch,u=o.scale;return Y.a.createElement("div",{className:G()(Qo.a["full-screen-actions"],{"dark-mode":t})},Y.a.createElement("div",{className:G()("zoom-wrapper",{"is-Iniframe":MB.isUIChina()||MB.isForum()})},Y.a.createElement(ma,{dispatch:s,scale:u,project:Project.find(i.project_cid),fromFullScreen:!0})),Y.a.createElement(Go,{onClickMode:this.setMode,onClickExit:this.handleExitFullScreen}),Y.a.createElement(Zo,{screen:i,screenInOrder:c,shouldTextShow:n,reachFirstScreen:r,reachLastScreen:a}),Y.a.createElement(Ko,{onClick:this.handleNavigate}),Y.a.createElement(Z.a,{onKeyDown:this.handleKeyDown}))}}]),t}(V.PureComponent);z()(ei,"propTypes",{dispatch:q.a.func,screen:q.a.object,screenInOrder:q.a.array,scale:q.a.number});var ti=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.screens,a=e.container,o=a.previewSetting.isFullScreenMode,i=a.common.scale,c=n.screenCid,s=ni(r,c),u=ri(r,n.projectCid).childListMap;return{screen:s,isFullScreenMode:o,screenInOrder:ai(u,"root"),scale:i}})(ei),ni=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),ri=Object(ne.h)(function(e,t){var n={},r=z()({},"root",[]);return e.forEach(function(e){if(e.project_cid===t){var a=e.cid,o=e.position,i=e.parent_cid||"root";n[a]=e,void 0===r[i]&&(r[i]=[]),r[i].push({cid:a,position:o})}}),b()(r).forEach(function(e){return e.sort(function(e,t){return n[e.cid].position-n[t.cid].position})}),{rootCid:"root",nodeMap:n,childListMap:r}}),ai=function e(t,n){var r=[];return t[n].forEach(function(n){var a=n.cid;if(r.push(a),t[a]){var o=e(t,a);r.push.apply(r,ce()(o))}}),r},oi=(n("bTYh"),function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=R()(this,(e=P()(t)).call.apply(e,[this].concat(a))),z()(U()(U()(n)),"state",{isOpen:!0}),n}return B()(t,e),I()(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({isOpen:!1}),MB.localStorageDelegate.setItem(ci,!0)},4e3)}},{key:"render",value:function(){var e=this.state.isOpen;return Y.a.createElement(tn.Guide,{className:"commercial-font-tip",isOpen:e,noCloseBtn:!0,guide:I18N.commercial_font_tip_preview,X:"center",Y:"top"})}}]),t}(V.Component));function ii(e){return MB.localStorageDelegate.getItem(ci)?null:Y.a.createElement(oi,e)}var ci="commercialFontTipShownInPreview",si=n("XpKX"),ui=n.n(si),li=yn.a.bind(ui.a),di=window,pi=di.MB,fi=di.I18N,hi=new ir.a(["ai@mockingbot.com","ethantw@me.com"]),mi=function(e){function t(e){var n;j()(this,t),n=R()(this,P()(t).call(this,e)),z()(U()(U()(n)),"handleClick",function(){bi(),n.setState({showLoadtip:!1})});var r=e.dispatch;return r({type:"entry:init:preview:scale"}),r({type:"reducer:artboards:init"}),r({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:0}}}),gi(e),r({type:"entry:unread-comment:init"}),r({type:"entry:init:preview-setting"}),n.state={showLoadtip:!0},n}return B()(t,e),I()(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"entry:preview:clear"})}},{key:"componentDidMount",value:function(){var e=function(){var e=sr.find(function(e){return(0,e.checker)()});return e?e.info:null}();if(e){var t={open:!0,event:e};this.props.dispatch({type:"event-sign-up:set:event",payload:t})}}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.props.project!==e.project&&gi(e)}},{key:"render",value:function(){var e=this.props,t=e.isLite,n=e.project,r=n.owner_email,a=n.master,o=e.previewSetting,i=e.isProjectFromOtherFreeUser,c=this.state.showLoadtip;if(t)return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Sr,null),Y.a.createElement(Vo,null));var s=o.toolbarActiveItem,u=o.isFullScreenMode,l=s==Rt.c,d=s==Rt.b,p=s==Rt.a,f=!pi.isElectron()&&!pi.isHTMLZip()&&d&&c&&yi(),h=!a&&l&&(hi.has(r)||i),m=li({"is-offline-mode":pi.isHTMLZip(),"is-uichina":pi.isUIChina()||pi.isForum(),"full-screen":u});return Y.a.createElement("div",{className:m},Y.a.createElement(La,null),u&&Y.a.createElement(ti,null),d&&Y.a.createElement(sa,null),Y.a.createElement("div",{className:li("adjust-container","preview-content-container")},p&&Y.a.createElement(Xn,null),d&&Y.a.createElement(Do,null),Y.a.createElement(Vr,null),Y.a.createElement(hr,null),Y.a.createElement(So,null)),h||pi.isUIChina()&&Y.a.createElement("a",{className:"powered-by",href:"/",target:"_blank"},Y.a.createElement("img",{className:"zh",src:"/images/preview/watermark_zh.svg",alt:fi.preview.powered_by_modao}),Y.a.createElement("img",{className:"en",src:"/images/preview/watermark_en.svg",alt:fi.preview.powered_by_modao})),Y.a.createElement(vi,{isActive:f,onClick:this.handleClick}),l&&Y.a.createElement(ii,null),Y.a.createElement(Vo,null))}}]),t}(V.Component);z()(mi,"propTypes",{isLite:q.a.bool,project:q.a.object,previewSetting:q.a.object,layer:q.a.object,isProjectFromOtherFreeUser:q.a.bool,userId:q.a.number,dispatch:q.a.func});var vi=function(e){var t=e.isActive,n=e.onClick;return t?Y.a.createElement("div",{className:"download-client-tip"},Y.a.createElement(hn.b,{type:"fa",name:"info-circle",className:"download-client-tip-icon"}),Y.a.createElement("span",{className:"download-text"},Y.a.createElement("a",{href:"/downloads",rel:"noopener noreferrer",target:"_blank"},fi.preview.client_load_a)," ",fi.preview.client_load_tip),Y.a.createElement(hn.b,{type:"dora",name:"times_fc",className:"download-client-close-icon",onClick:n})):null};vi.propTypes={isActive:q.a.bool.isRequired,onClick:q.a.func.isRequired};var gi=function(e){var t=e.project,n=e.isProjectFromOtherFreeUser;return function(e){var t=e.allowComment,n=e.denyMessage;return ue()(Wt,{allowComment:t,denyMessage:n})}({allowComment:t.limitation.commentable,denyMessage:pi.renewMsg("cant_comment",{role:n?t.team_cid?"team":"project":"user"})})},yi=function(){return!pi.localStorageDelegate.getItem("close_client_load_tip")},bi=function(){return pi.localStorageDelegate.setItem("close_client_load_tip","true")},wi=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Si=Object(ne.h)(function(e,t){return t!==e.owner_id&&e.expired}),Ei=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.projects,a=e.container.previewSetting,o=a.toolbarActiveItem,i=wi(r,n.projectCid),c=MB.isMobile()||MB.isEmbedded();return{isLayerActive:o===Rt.b,isCommentActive:o===Rt.a,previewSetting:a,isProjectFromOtherFreeUser:Si(i,n.userId),isLite:c,project:i}})(mi);n.d(t,"c",function(){return xi}),n.d(t,"a",function(){return Ei}),n.d(t,"b",function(){return ar});var xi={layerSaga:Mt,sliceSaga:h,artboardsSaga:C}},qOCw:function(e,t,n){"use strict";n.d(t,"d",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"f",function(){return m}),n.d(t,"b",function(){return g}),n.d(t,"e",function(){return w});n("eTac");var r=n("RIqP"),a=n.n(r),o=n("wig9"),i=n.n(o),c=n("7tbW"),s=n.n(c),u=n("/5+U"),l=n("XrEr"),d=function(e){return"rich_text"===e.name?function(e){return JSON.parse(e).reduce(function(e,t,n,r){var a=t.children.reduce(function(e,t,n){return e+t.text},"");return e+(0===n?"":"\n")+a},"")}(e.text):function(e){return!!e&&e.replace(/<[^>]+>/gi,"")}(e.text)},p=function(e){var t=e.width,n=e.height,r=e.left,a=e.top,o=e.opacity,i=e.borderRadius,c=e.rotation,s=e.ratio,l=e.unit,d=Object(u.a)(r,s,l),p=Object(u.a)(a,s,l),h=Object(u.a)(t,s,l),m=Object(u.a)(n,s,l),v=i?String(i).split(",").map(function(e){return Object(u.a)(parseInt(e)||0,s,l)}).join(" "):null,g=f(c)?null:"".concat(c,"°");return{adapterLeft:d,adapterTop:p,adapterWidth:h,adapterHeight:m,radius:v,opacity:f(o)?null:"".concat(o,"%"),rotate:g}},f=function(e){return null===e||isNaN(e)||0===e},h=function(e){var t=e.lineHeight,n=e.letterSpacing,r=e.unit,a=e.ratio;return{lineHeight:t=f(t)?null:Object(u.a)(t,a,r),letterSpacing:n=f(n)?null:Object(u.a)(n,a,r)}},m=function(e){var t=[],n=[];return e.forEach(function(e){var r=e.bg_colors,o=void 0===r?[]:r,i=e.borders,c=void 0===i?[]:i,s=e.text_styles,u=void 0===s?[]:s,d=u.length>0?u[0]:{},p=d.color,f=d.font_face,h=[];o.length&&(h=o.map(function(e){var t=e.value,n=e.type,r=void 0===n?"color":n,a=e.gradient,o=Object(l.c)(t);return"color"===r?o:b(a)})),h=v(h);var m=[];c.length&&(m=c.map(function(e){var t=e.color;return Object(l.c)(t)})),m=v(m);var g=p&&Object(l.b)(Object(l.e)(p),"rgba");!t.includes(g)&&t.push(g),!n.includes(f)&&n.push(f),t=!(t=!t.includes(h)&&a()(t).concat(a()(h))).includes(m)&&a()(t).concat(a()(m))}),{screenColor:s()(i()(t)).slice(0,14)||[],globalText:i()(n)}},v=function(e){var t;return(t=[]).concat.apply(t,a()(e))},g=function(e){var t,n,r,a,o,i,c,s,d,p=e.textStyles,f=e.borders,h=e.background,m=e.shadows,v=e.innerShadows,g=(e.colorUnit,e.unit),b=e.ratio;if(p.length){var w=p[0],S=w.color,E=w.font_size,x=w.font_face;t=S&&Object(l.c)(S),n=Object(u.a)(E,b,g),r=x}if(f.length){var C=f[0],k=C.position,_=void 0===k?"inside":k,M=C.color,T=C.thickness;a=Object(u.a)(T,b,g),i=_,M&&(o=Object(l.c)(M))}return h.length&&(c=Object(l.c)(h[0].value)),m.length&&(s=y(m,g,b)),v.length&&(d=y(v,g,b,!0),s="".concat(s,", ").concat(d)),{fontFamily:r,fontSize:n,color:t,borderWidth:a,borderColor:o,borderPosition:i,backgroundColor:c,boxShadow:s}},y=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.length;return e.reduce(function(e,o,i){var c=o.color,s=o.offset_x,d=void 0===s?0:s,p=o.offset_y,f=void 0===p?0:p,h=o.blur_radius,m=void 0===h?0:h,v=o.spread,g=void 0===v?0:v,y=Object(u.a)(d,n,t),b=Object(u.a)(f,n,t),w=Object(u.a)(m,n,t);g=Object(u.a)(g,n,t),c=Object(l.c)(c);var S=i<a-1?", ":"",E=r?"inset ":"";return e.concat("".concat(E).concat(y," ").concat(b," ").concat(w," ").concat(g," ").concat(c).concat(S))},"")},b=function(e){return e&&e.color_stops?e.color_stops.map(function(e){var t=e.color;return Object(l.c)(t)}):l.a},w=function(e){switch(e){case"swift":return"pt";case"android":return"dp";default:return"px"}}},qZTm:function(e,t,n){var r=n("kekF")(Object.keys,Object);e.exports=r},quyA:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},rEGp:function(e,t){e.exports=function(){return[]}},rXnp:function(e,t,n){},rbsZ:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return m});var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/Q2I"),s=n("0L8M"),u=(n("1mjR"),window),l=u.MB,d=u.I18N,p=function(){return window.open("/pricing?next=".concat(location.href))},f=function(e){var t=e.reason,n=e.data,r=e.shouldShowConfirm,o=e.onClose;return a.a.createElement(c.a,{isOpen:!0,className:"renew-modal",title:d.renew_prompt.title,onConfirm:r?p:null,confirmText:r?d.renew_now:null,onClose:o},a.a.createElement("p",null,h(t,n)))};f.propTypes={reason:i.a.string,data:i.a.object,shouldShowConfirm:i.a.bool,onClose:i.a.func};var h=function(e,t){var n=t.role,r=t.plan,a=void 0===r?l.currentProject&&l.currentProject.owner_plan||l.user&&l.user.current_plan:r,o=t.storage,i=void 0===o?"":o,c=t.format,s=void 0===c?"":c,u=t.collaborators,p=void 0===u?"":u;return(d.renew_prompt["".concat(n,"_plan")]+d.renew_prompt[e]+d.renew_prompt["".concat(n,"_upgrade")]).replace("{plan}",d[a]).replace("{storage}",i).replace("{format}",s).replace("{collaborators}",p)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.ga&&window.ga("ec:setAction","checkout",{step:1,option:e}),window.ga&&window.ga("send","event","goal","弹出了续费提示"),Object(s.a)(f,{reason:e,data:t,shouldShowConfirm:"user"===t.role})}},rtgd:function(e,t,n){e.exports={"preview-toolbar":"_3kKqNauE-PaVHPIZg_7k-D"}},rwIS:function(e,t,n){e.exports={"guide-button":"_31FtTxh_wpy1_6DRt1eNdq"}},sEfC:function(e,t,n){var r=n("GoyQ"),a=n("QIyF"),o=n("tLB3"),i="Expected a function",c=Math.max,s=Math.min;e.exports=function(e,t,n){var u,l,d,p,f,h,m=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError(i);function b(t){var n=u,r=l;return u=l=void 0,m=t,p=e.apply(r,n)}function w(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-m>=d}function S(){var e=a();if(w(e))return E(e);f=setTimeout(S,function(e){var n=t-(e-h);return g?s(n,d-(e-m)):n}(e))}function E(e){return f=void 0,y&&u?b(e):(u=l=void 0,p)}function x(){var e=a(),n=w(e);if(u=arguments,l=this,h=e,n){if(void 0===f)return function(e){return m=e,f=setTimeout(S,t),v?b(e):p}(h);if(g)return f=setTimeout(S,t),b(h)}return void 0===f&&(f=setTimeout(S,t)),p}return t=o(t)||0,r(n)&&(v=!!n.leading,d=(g="maxWait"in n)?c(o(n.maxWait)||0,t):d,y="trailing"in n?!!n.trailing:y),x.cancel=function(){void 0!==f&&clearTimeout(f),m=0,u=h=l=f=void 0},x.flush=function(){return void 0===f?p:E(a())},x}},seXi:function(e,t,n){var r=n("qZTm"),a=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,c,s){var u=n&a,l=r(e),d=l.length;if(d!=r(t).length&&!u)return!1;for(var p=d;p--;){var f=l[p];if(!(u?f in t:o.call(t,f)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var m=!0;s.set(e,t),s.set(t,e);for(var v=u;++p<d;){var g=e[f=l[p]],y=t[f];if(i)var b=u?i(y,g,f,t,e,s):i(g,y,f,e,t,s);if(!(void 0===b?g===y||c(g,y,n,i,s):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var w=e.constructor,S=t.constructor;w!=S&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S)&&(m=!1)}return s.delete(e),s.delete(t),m}},sgoq:function(e,t,n){var r=n("asDA"),a=n("TKrE"),o=n("6nK8"),i=RegExp("['’]","g");e.exports=function(e){return function(t){return r(o(a(t).replace(i,"")),e,"")}}},"t5S/":function(e,t,n){var r=n("87hQ"),a=n("RNpe"),o=n("kUAk"),i=n("/MKq");function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)})}}var d=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,r,a,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.element,r=t.width,a=t.height,o=t.skipHeavyRender,i=void 0!==o&&o,n){e.next=3;break}throw new Error("invalid element: ".concat(n));case 3:if(r=parseInt(r||n.style.width.endsWith("px")&&n.style.width||n.offsetWidth),a=parseInt(a||n.style.height.endsWith("px")&&n.style.height||n.offsetHeight),r&&a){e.next=7;break}throw new Error("can not get output size: width: ".concat(r,", height: ").concat(a));case 7:return c=(new window.XMLSerializer).serializeToString(n).split("\n"),e.abrupt("return",p({htmlSourceList:c,width:r,height:a,skipHeavyRender:i}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.createSnapshotFromElement=d;var p=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,u,l,d,p,h,m,v,g,y,b,w,S,E,x,C,k,_,M,T,O,j,N,I,A,R,L;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.htmlSourceList,u=t.width,l=t.height,d=t.skipHeavyRender,p=void 0!==d&&d,Array.isArray(n)){e.next=3;break}throw new Error("invalid htmlSourceList: ".concat(n));case 3:if(u&&l){e.next=5;break}throw new Error("invalid size: width: ".concat(u,", height: ").concat(l));case 5:h=(0,o.createHTMLFragCollector)(),n.forEach(function(e){return h.collect(e,"")}),m=(0,o.createCSSFragCollector)(),v=Array.from(document.getElementsByTagName("link")).map(function(e){return"stylesheet"===e.rel&&e.href}).filter(function(e){return e}),g=!0,y=!1,b=void 0,e.prev=12,w=v[Symbol.iterator]();case 14:if(g=(S=w.next()).done){e.next=25;break}return E=S.value,e.t0=m,e.next=19,(0,r.fetchTextWithCache)(E);case 19:e.t1=e.sent,e.t2=E,e.t0.collect.call(e.t0,e.t1,e.t2);case 22:g=!0,e.next=14;break;case 25:e.next=31;break;case 27:e.prev=27,e.t3=e.catch(12),y=!0,b=e.t3;case 31:e.prev=31,e.prev=32,g||null==w.return||w.return();case 34:if(e.prev=34,!y){e.next=37;break}throw b;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return Array.from(document.getElementsByTagName("style")).map(function(e){return m.collect(e.innerHTML,"")}),x=h.getOutput(),C=m.getOutput(),k=new Set(s(x.fontInfo.fontFamilySet).concat(s(C.fontInfo.fontFamilySet))),Object.entries(Object.assign({},x.fontInfo.fontFaceMap,C.fontInfo.fontFaceMap)).forEach(function(e){var t=c(e,2),n=t[0],r=t[1];if(!k.has(n.split("|")[0]))return r.forEach(function(e){e.isIgnore=!0});var a=null,o=null;r.forEach(function(e){a=a||(e.urlString.includes("woff2")?e:null),o=o||(e.urlString.includes("woff")?e:null)});var i=!1;r.forEach(function(e){a&&e!==a?e.isIgnore=!0:o&&e!==o?e.isIgnore=!0:(e.isIgnore=i,i=!0)})}),R=function(){return{htmlString:_,cssString:M,domString:T,svgString:O,svgDataUrl:j,imageElement:N,canvasElement:I,pngDataUrl:A}},e.prev=46,e.t4=i.prepareHTMLString,e.next=50,(0,a.convertFragListWithUrlMap)(x);case 50:return e.t5=e.sent,e.next=53,(0,e.t4)(e.t5);case 53:return _=e.sent,e.t6=i.prepareCSSString,e.next=57,(0,a.convertFragListWithUrlMap)(C);case 57:return e.t7=e.sent,e.next=60,(0,e.t6)(e.t7);case 60:return M=e.sent,T="".concat(M,"\n").concat(_),e.next=64,(0,i.prepareSVGString)({domString:T,width:u,height:l});case 64:if(O=e.sent,j="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(O)),p){e.next=73;break}return e.next=69,f({svgDataUrl:j,width:u,height:l});case 69:L=e.sent,N=L.imageElement,I=L.canvasElement,A=L.pngDataUrl;case 73:e.next=78;break;case 75:e.prev=75,e.t8=e.catch(46);case 78:return e.abrupt("return",R());case 79:case"end":return e.stop()}},e,this,[[12,27,31,39],[32,,34,38],[46,75]])}));return function(t){return e.apply(this,arguments)}}();t.createSnapshotFromHTMLSourceList=p;var f=function(){var e=l(regeneratorRuntime.mark(function e(t){var n,r,a,o,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.svgDataUrl,r=t.width,a=t.height,e.next=3,(0,i.prepareImageElement)({svgDataUrl:n,width:r,height:a});case 3:return o=e.sent,e.next=6,(0,i.prepareCanvasElement)({imageElement:o,width:r,height:a});case 6:return c=e.sent,s=c.toDataURL(),e.abrupt("return",{imageElement:o,canvasElement:c,pngDataUrl:s});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.renderPngDataUrlFromSvgDataUrl=f},tLB3:function(e,t){e.exports=function(e){return e}},tajm:function(e,t,n){"use strict";var r,a=n("eTac"),o=n.n(a),i=n("o0o1"),c=n.n(i),s=n("yXPU"),u=n.n(s),l=n("rVSK"),d=n.n(l),p=n("CoAX"),f=n("os03"),h=n("8fIB"),m=n.n(h),v=n("XkTy"),g=n("Clcl"),y=window,b=y.$,w=y.MB,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new m.a(function(t,n){Object(v.b)(e).then(t),setTimeout(n,6e4)}).catch(function(){return setTimeout(function(){return Object(g.b)({type:"Error:alertAsyncBlocked:timeout",option:e})},0)})},E=function(){var e=u()(c.a.mark(function e(t){var n,r=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:-255,e.next=3,S({desc:I18N.unknown_error.replace(/%s/i,n),isHTML:!0});case 3:return location.reload(),Object(g.a)(t),e.next=7,Object(f.f)(36e5);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),x=function(){Object(g.d)({type:"AutoSaver:Socket",timeInterval:3e5,getReportObject:function(){return w.AutoSaver.getState()}});var e=new Date;e.setDate(e.getDate()+1),e.setHours(4),e.setMinutes(0),e.setSeconds(0),(0,function(e){var t,n=function(){t&&clearInterval(t),t=void 0,document.removeEventListener("visibilitychange",r)},r=function(){Date.now()<e||(n(),setInterval(function(){return Object(v.b)({desc:I18N.new_version_detected,isHTML:!0}).then(function(){return location.reload()})},2e4))};return{start:function(){t&&clearInterval(t),t=setInterval(r,6e5),document.addEventListener("visibilitychange",r)},stop:n,check:r}}(e).start)(),window.onbeforeunload=function(){return w.AutoSaver.getIsEmpty()?void 0:w.isLegacyElectron()?!w.confirmAsync({title:I18N.warning,desc:I18N.data_lost_warning})||void 0:I18N.data_lost_warning},window.onerror=function(e,t,n,r,a){return!w.config.ignoreError.test(e)&&a&&a.stack&&console.error(a)},w.myXhr=b.ajaxSettings.xhr(),b.ajaxSettings.xhr=function(){return w.myXhr},b.ajaxSetup({timeout:6e4})},C=window.MB,k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},n=[];e.forEach(function(e){var r=e.record,a="".concat(r.constructor.className,"-").concat(r.cid);void 0===t[a]&&(t[a]=n.length),n[t[a]]=e});var r=new o.a;n.forEach(function(e){var t=e.record;return e.isDelete&&["Widget","Panel"].includes(t.constructor.className)&&r.add(t.cid)});var a=n.filter(function(e){var t=e.record;return!("Widgetstate"===t.constructor.className&&r.has(t.widget_cid)||"Panelstate"===t.constructor.className&&r.has(t.panel_cid))});return a.map(function(e){var t=e.record,n=e.isDelete,r=t.constructor.className,a=n?"DELETE":"Asset"===r?"POST":"PUT",o="POST"===a?"/".concat(r.toLowerCase(),"s"):"/".concat(r.toLowerCase(),"s/").concat(encodeURIComponent(t.id)),i=d()("DELETE"===a?{cid:t.cid,mtime:t.mtime}:Object(p.a)(t.toJSON())),c={className:r,cid:t.cid};if("Panel"===r){var s=Template.find(t.template_cid);s&&(c.template_token=s.access_token)}return{url:o,method:a,body:i,extraInfo:c}})},_=function(e){var t=e.url,n=e.method,r=e.body;return d()({url:t,method:n,bodyLength:r?r.length:0})},M=function(){var e=u()(c.a.mark(function e(t){var n,r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.saveChunk,t.attempt,t.timeout,r=C.project()?C.project().template?C.project().host_cid:C.project().cid:"",a={id:C.user.id,name:C.user.name,avatar:C.user.avatar},e.next=5,C.Pusher.requestBatchSave({batchSaveQueue:n,rootProjectCid:r,fromUser:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=u()(c.a.mark(function e(t,n){var r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.saveChunk,n.attempt,a=n.timeout,!t.message||!t.message.toLowerCase().includes("timeout")){e.next=9;break}return C.ga("send","event","batch-saving","batch saving timeout","(".concat(r.length,")(").concat(a,"ms)(").concat(C.user.email,")")),C.alertAsync({title:I18N.error_happened,desc:I18N.network_error,isHTML:!0}),e.next=7,Object(f.f)(5e3);case 7:e.next=12;break;case 9:return C.ga("send","event","batch-saving","batch saving error: ".concat(t.status),"[".concat(t.status,"] ").concat(t.message||t,": (").concat(r.length,"item|").concat(a,"ms)(").concat(C.user.email,")")),e.next=12,E(t,t.status);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=u()(c.a.mark(function e(t){var n,r,a,o,i,s,u,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.saveItem,r=n.url,a=n.method,o=n.body,i=t.attempt,s=t.timeout,e.next=3,Object(f.e)(r,{headers:{"Content-Type":"application/json"},method:a,body:o,timeout:s});case 3:if(u=e.sent,200===(l=u.status)){e.next=9;break}return C.ga("send","event","saving","saving error: ".concat(l),"".concat(l,": ").concat(r,"(").concat(a,"|x").concat(i,"|").concat(s,"ms)(").concat(C.user.email,")")),e.next=9,E(new Error("fallback saving error: ".concat(l)),l);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=u()(c.a.mark(function e(t,n){var r,a,o,i,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.saveItem,a=r.url,o=r.method,i=n.attempt,s=n.timeout,C.ga("send","event","saving","fallback saving error: ".concat(t.message||t),"".concat(t.message||t,": ").concat(a,"(").concat(o,"|x").concat(i,"|").concat(s,"ms)(").concat(C.user.email,")")),C.alertAsync({title:I18N.error_happened,desc:I18N.network_error,isHTML:!0}),e.next=6,Object(f.f)(5e3);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),N=n("MVZn"),I=n.n(N),A=function(){var e=u()(c.a.mark(function e(t){var n,r,a,o,i,s,l,d,p,h,m,v,y,b;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.setSavingState,r=t.getAutoSaveQueueState,a=t.saveChunkList,o=t.saveQueueLength,i=t.getSaveItemInfo,s=t.isSocketAvailable,l=t.doSocketBatchSave,d=t.onSocketError,p=t.doFallbackSaveItem,h=t.onFallbackError,m=0,v=c.a.mark(function e(t,v){var y,b,w;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y=a[t],b=0,w=c.a.mark(function e(){var a,w,S,E;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a={chunkIndex:t,chunkIndexMax:v,saveChunkFirstInfo:i(y[0]),saveChunkLength:y.length,chunkAttempt:b,saveQueueIndex:m,saveQueueLength:o},e.prev=1,!s()){e.next=6;break}return e.next=5,Object(f.g)({retry:2,timeout:6e4,task:function(){var e=u()(c.a.mark(function e(t){var r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.attempt,o=t.timeout,n(I()({type:"socket-batch-save",attempt:r,timeout:o},a)),e.next=4,l({saveChunk:y,attempt:r,timeout:o});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onError:function(){var e=u()(c.a.mark(function e(t,r){var o,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.attempt,i=r.timeout,n(I()({type:"socket-batch-save-retry",error:t.toString(),attempt:o,timeout:i},a)),e.next=4,d(t,{saveChunk:y,attempt:o,timeout:i});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()});case 5:return e.abrupt("return","break");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(g.c)(e.t0,"[AutoSaveQueue][doSave] failed to save with socket",r());case 11:e.prev=11,w=c.a.mark(function e(t,r){var o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=y[t],s=I()({index:t,indexMax:r,saveItem:i(o)},a,{saveQueueIndex:m+t}),e.next=4,Object(f.g)({retry:4,timeout:1e5,task:function(){var e=u()(c.a.mark(function e(t){var r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.attempt,a=t.timeout,n(I()({type:"fallback-save-item",attempt:r,timeout:a},s)),e.next=4,p({saveItem:o,attempt:r,timeout:a});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onError:function(){var e=u()(c.a.mark(function e(t,r){var a,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.attempt,i=r.timeout,n(I()({type:"fallback-save-item-retry",error:t.toString(),attempt:a,timeout:i},s)),e.next=4,h(t,{saveItem:o,attempt:a,timeout:i});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()});case 4:case"end":return e.stop()}},e,this)}),S=0,E=y.length;case 14:if(!(S<E)){e.next=19;break}return e.delegateYield(w(S,E),"t1",16);case 16:S++,e.next=14;break;case 19:return e.abrupt("return","break");case 22:e.prev=22,e.t2=e.catch(11),Object(g.c)(e.t2,"[AutoSaveQueue][doSave] failed to save with fetch fallback",r());case 25:b++;case 26:case"end":return e.stop()}},e,this,[[1,8],[11,22]])});case 3:return e.delegateYield(w(),"t0",5);case 5:if("break"!==e.t0){e.next=8;break}return e.abrupt("break",10);case 8:e.next=3;break;case 10:m+=y.length;case 11:case"end":return e.stop()}},e,this)}),y=0,b=a.length;case 4:if(!(y<b)){e.next=9;break}return e.delegateYield(v(y,b),"t0",6);case 6:y++,e.next=4;break;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),R=n("9Kre"),L=n.n(R),P=n("Hmy9"),D=n("RIqP"),B=n.n(D),F=n("J4zp"),U=n.n(F),W=n("l00i"),z=n.n(W),H=function(e,t){return e.includes(t)?e:B()(e).concat([t])},q=function(e,t){var n=e.indexOf(t);return~n?B()(e.slice(0,n)).concat(B()(e.slice(n+1))):e},V=function(e){var t=[];return{subscribe:function(e){t=H(t,e)},unsubscribe:function(e){t=q(t,e)},getState:function(){return e},setState:function(n){if((n=function(e,t){for(var n=z()(t),r=0;r<n.length;r++){var a=U()(n[r],2),o=a[0],i=a[1];if(e[o]!==i)return I()({},e,t)}return e}(e,n))===e)return e;var r=e;return e=n,t.forEach(function(t){return t(e,r)}),e}}},Y=n("DR1i"),X=function(){},Z=function(e){console.error("ERROR",e)},K={userSocket:null},G=n("t3Un"),J=window,Q=J.$,$=J.MB,ee=J.Screen,te=J.Screenstate,ne=J.Panel,re=J.Panelstate,ae=J.Widget,oe=J.Widgetstate,ie=J.Link,ce=function(e,t){if(!$.f.inSharing&&"create"===e){var n=new Asset;n.load(t),n.lsave(!1)}},se={Screen:function(e,t){if("update"===e){var n=ee.find(t.cid);n?(n.refresh(t),$.currentScreen.cid===n.cid&&($.action("set:current:screen",{screen:n}),Q("#design").trigger("slider:update"))):((n=new ee).load(t),n.lsave(!1)),$.currentProject&&$.currentProject.cid===n.project_cid&&$.action("update:screens:all",{screens:$.currentProject.cscreens()})}else if("destroy"===e){var r=ee.find(t.cid);if(!r)return;r.ldestroy(!1),$.currentProject&&$.currentProject.cid===r.project_cid&&$.action("entry:remove:from:screen-history",{cids:[r.cid]})}},Screenstate:function(e,t){var n=ee.find($.currentScreen.cid);if("update"===e){var r=te.find(t.cid);if(r?r.refresh(t):((r=new te).load(t),r.lsave(!1)),n&&n.cid===r.screen_cid)return $.renderStateList()}else if("destroy"===e){var a=te.find(t.cid);if(!a)return;if(a.ldestroy(!1),n&&n.cid===a.screen_cid)return n.state_cid===a.cid&&(n.setState("default",!0),$.action("set:current:screen",{screen:n}),ScreenManager.updateWidgetList()),$.renderStateList()}},Panel:function(){var e=u()(c.a.mark(function e(t,n,r){var a,o,i,s,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$.getCurrentScreen(),"update"!==t){e.next=31;break}if(o=ne.find(n.cid)){e.next=26;break}return e.prev=4,e.next=7,Object(G.b)("/app/".concat(r.template_token,".json"));case 7:if(i=e.sent,Template.refresh([i.project]),ee.refresh(i.screens),ae.refreshWidgetAfterDecompress(i.widgets),ie.refresh(i.links),$.Pusher.enableSocketChannel(i.project.cid),(s=new ne).load(n),s.lsave(!1),$.renderTemplateList(),a!==s.screen_cid){e.next=19;break}return e.abrupt("return",ScreenManager.updateWidgetList());case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),console.warn(e.t0);case 24:e.next=29;break;case 26:if(o.refresh(n),a!==o.screen_cid){e.next=29;break}return e.abrupt("return",ScreenManager.updateWidgetList());case 29:e.next=42;break;case 31:if("destroy"!==t){e.next=42;break}if(u=ne.find(n.cid)){e.next=35;break}return e.abrupt("return");case 35:if(a!==u.screen_cid){e.next=41;break}return PanelManager.remove(u.cid,!1),$.action("selection:unselect:items",{cids:[u.cid]}),e.abrupt("return",ScreenManager.updateWidgetList());case 41:return e.abrupt("return",u.ldestroy(!1));case 42:case"end":return e.stop()}},e,this,[[4,21]])}));return function(t,n,r){return e.apply(this,arguments)}}(),Panelstate:function(e,t){var n=ee.find($.currentScreen.cid);if("update"===e){var r=re.find(t.cid);if(r?r.refresh(t):((r=new re).load(t),r.lsave(!1)),n&&n.state_cid===r.screenstate_cid){var a=ne.find(r.panel_cid);a.screenstate_cid===r.screenstate_cid&&(a.restore(r),a.lsave(!1),ScreenManager.updateWidgetList())}}},Widget:function(e,t){return function(e,t){var n=$.getCurrentScreen();if("update"===e){var r=ae.find(t.cid);r?r.refresh(t):((r=new ae).load(t),r.lsave(!1)),n===r.screen_cid&&ScreenManager.updateWidgetList()}else if("destroy"===e){var a=ae.find(t.cid);if(!a)return;a.ldestroy(!1),n===a.screen_cid&&($.action("selection:unselect:items",{cids:[a.cid]}),ScreenManager.updateWidgetList())}}(e,Object(p.b)(t))},Widgetstate:function(e,t){return function(e,t){var n=ee.find($.currentScreen.cid);if("update"===e){var r=oe.find(t.cid);if(r?r.refresh(t):((r=new oe).load(t),r.lsave(!1)),n&&n.state_cid===r.screenstate_cid){var a=ae.find(r.widget_cid);a.screenstate_cid===r.screenstate_cid&&(a.restore(r),a.lsave(!1),ScreenManager.updateWidgetList())}}}(e,Object(p.b)(t))},Link:function(e,t){var n,r=$.getCurrentScreen();if("update"===e)(n=ie.find(t.cid))?n.refresh(t):((n=new ie).load(t),n.lsave(!1));else if("destroy"===e){if(!(n=ie.find(t.cid)))return;n.ldestroy(!1)}n&&r===n.screen_cid&&$.renderLinks()}},ue={Asset:Asset,Collaborator:Collaborator,Team:Team,Project:Project,Screen:ee,Screenstate:te,Panel:ne,Panelstate:re,Widget:ae,Widgetstate:oe,Link:ie},le=function(e,t,n){var r=ue[e]&&ue[e].findByAttribute("cid",t),a=r&&r.mtime>n;return a},de=window.MB,pe=function(e){var t=e.filterStaleData,n=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,n=Object(f.b)(),r=n.clear,a=n.addEventListener,o=n.removeEventListener,i=n.dispatchEvent,s=V(t),l=function(){var n=s.getState().userSocket;n&&n.close(),r(),e=m.a.resolve("HEAD"),s.setState(t)};return I()({},s,{clear:l,queueAsync:function(t){var n=e.then(t);return e=n.then(X,Z),n},getIsOpen:function(){var e=s.getState().userSocket;return Boolean(e&&e.connected)},getServerTimestamp:function(){var e=s.getState().userSocket;return e?e.getServerTimestamp():Date.now()},openSocket:function(e){var t=e.userId;l(),t||console.warn("[SocketStore][openSocket] use dummy socket");var n=t?Object(Y.createUserSocket)({userId:t,socketUrl:location.origin,socketPath:"/imock-socket"}):{DUMMY_SOCKET:"DUMMY_SOCKET",connected:!1,close:function(){},on:function(){},emitAsync:function(){var e=u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getServerTimestamp:function(){return.001*Date.now()}};n.on("error",function(e){console.log("socket error",e)}),n.on("connect",u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("user socket connected"),e.next=3,n.calibrateTimestampOffsetAsync();case 3:i({type:"socket:open",payload:{userSocket:n}}),console.log("user socket open");case 6:case"end":return e.stop()}},e,this)}))),s.setState({userSocket:n})},dispatchEvent:i,addEventListener:a,removeEventListener:o})}(I()({},K,{projectCidList:[]}));n.openSocket({userId:de.user.id});var a=n.getState().userSocket;a.on("broadcast:user:notification",function(e){return n.dispatchEvent({type:"socket:broadcast:user:notification",payload:e})}),a.on("broadcast:user:data",function(e){return n.dispatchEvent({type:"socket:broadcast:user:data",payload:e})}),a.on("broadcast:project:data",function(e){return n.dispatchEvent({type:"socket:broadcast:project:data",payload:e})}),a.on("broadcast:project:batch-save",function(e){return n.dispatchEvent({type:"socket:broadcast:project:batch-save",payload:e})});var o=function(){var e=u()(c.a.mark(function e(t){var r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState(),o=r.projectCidList,e.abrupt("return",!o.includes(t)&&a.emitAsync("join:projects",{projectCidList:[t]}).then(function(e){console.log("userSocket joined project",e),n.setState({projectCidList:H(o,t)})},g.c));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=n.getState().projectCidList;return a.emitAsync("leave:projects",{projectCidList:e}).then(function(e){console.log("userSocket left all project",e),n.setState({projectCidList:[]})},g.c)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=n.getServerTimestamp(),a=e.reduce(function(e,t){var n=t.object,a=n.cid,o=n.mtime,i=void 0===o?r:o;return e[a]=i,e},{});return t(a)};return n.addEventListener("socket:open",u()(c.a.mark(function e(){var t,r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.getState(),r=t.userSocket,a=t.projectCidList,e.t0=a.length,!e.t0){e.next=5;break}return e.next=5,r.emitAsync("join:projects",{projectCidList:a}).catch(g.c);case 5:case"end":return e.stop()}},e,this)}))),n.addEventListener("socket:broadcast:user:notification",function(e){var t=e.type,n=e.payload;console.log("[SocketBroadcastData]",t,n),r&&Object(P.b)(n,r)}),n.addEventListener("socket:broadcast:user:data",function(e){var t=e.type,n=e.payload;console.log("[SocketBroadcastData]",t,n);var r=s(n).remoteStaleCidSet,a=!0,o=!1,i=void 0;try{for(var c,u=L()(n);!(a=(c=u.next()).done);a=!0){var l=c.value,d=l.action,p=l.className,f=l.object;he(r,p,d,f)}}catch(e){o=!0,i=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw i}}}),n.addEventListener("socket:broadcast:project:data",function(e){var t=e.type,r=e.payload;return n.queueAsync(u()(c.a.mark(function e(){var n,a,o,i,u,l,d,p,f,h,m,v;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[SocketBroadcastData]",t,r),n=s(r),a=n.remoteStaleCidSet,o=!0,i=!1,u=void 0,e.prev=5,l=L()(r);case 7:if(o=(d=l.next()).done){e.next=14;break}return p=d.value,f=p.action,h=p.className,m=p.object,v=p.extraInfo,e.next=11,me(a,h,f,m,v);case 11:o=!0,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),i=!0,u=e.t0;case 20:e.prev=20,e.prev=21,o||null==l.return||l.return();case 23:if(e.prev=23,!i){e.next=26;break}throw u;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[5,16,20,28],[21,,23,27]])})))}),n.addEventListener("socket:broadcast:project:batch-save",function(e){var t=e.type,r=e.payload;return n.queueAsync(u()(c.a.mark(function e(){var n,a,o,i,u,l,d,p,f,h,m,v,g,y,b,w;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[SocketBroadcastData]",t,r),n=r.fromUser,a=r.rootProjectCid,o=r.batchSaveQueue,i=(void 0===o?[]:o).map(function(e){var t=e.method,n=e.body,r=e.extraInfo;return{className:r.className,action:"PUT"===t?"update":"DELETE"===t?"destroy":"POST"===t?"create":"",object:n?JSON.parse(n):{cid:r.cid},extraInfo:r}}),u=s(i),l=u.remoteStaleCidSet,d=!0,p=!1,f=void 0,e.prev=7,h=L()(i);case 9:if(d=(m=h.next()).done){e.next=16;break}return v=m.value,g=v.className,y=v.action,b=v.object,w=v.extraInfo,e.next=13,me(l,g,y,b,w,a,n);case 13:d=!0,e.next=9;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),p=!0,f=e.t0;case 22:e.prev=22,e.prev=23,d||null==h.return||h.return();case 25:if(e.prev=25,!p){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},e,this,[[7,18,22,30],[23,,25,29]])})))}),I()({},n,{requestBatchSave:function(e){var t=e.batchSaveQueue,n=void 0===t?[]:t,r=e.rootProjectCid,o=void 0===r?"":r,i=e.fromUser,c=void 0===i?{}:i;return a.emitAsync("request:project:batch-save",{batchSaveQueue:n,rootProjectCid:o,fromUser:c})},joinProject:o,leaveProject:function(e){var t=n.getState().projectCidList;return t.includes(e)&&a.emitAsync("leave:projects",{projectCidList:[e]}).then(function(r){console.log("userSocket left project",r),n.setState({projectCidList:q(t,e)})},g.c)},leaveAllProject:i,enableSocketChannel:o,resetSocketChannel:i,enableNotifier:fe})},fe=function(){r=r||Object(P.a)()},he=function(e,t,n,r){e.has(r.cid)||le(t,r.cid,r.mtime)||("Team"===t?function(e,t){if(!$.f.inSharing){if("update"===e){var n=Team.find(t.cid);n?n.refresh(t):((n=new Team).load(t),n.lsave(!1)),$.webpackInterface.refreshAll()}if("destroy"===e){var r=Team.find(t.cid);r&&$.webpackInterface.deleteTeamByCid(r.cid)}}}(n,r):"Project"===t?function(e,t){if(!$.f.inSharing){if("update"===e){var n=Project.find(t.cid);if(n){if(n.duplicating){var r=n.screens_count;n.refresh(t),n.screens_count=r}}else(n=new Project).load(t),n.screens_count||(n.screens_count=2),n.lsave(!1);$.webpackInterface.refreshAll(),n.duplicating||Q("#notification").removeClass("active"),$.f.isDuplicatingDemo&&!n.duplicating&&($.f.isDuplicatingDemo=!1,$.webpackInterface.navigateTo("/workspace/apps/".concat(n.cid)))}if("destroy"===e){var a=Project.find(t.cid);if(a)$.webpackInterface.deleteProjectByCid(a.cid);else{var o=Template.find(t.cid);o&&(o.ldestroy(!1),$.renderTemplateList())}}Q(".timeago").timeago()}}(n,r):"Collaborator"===t&&function(e,t){if($.f.inSharing){if("update"===e){var n=Collaborator.find(t.cid);n?n.refresh(t):((n=new Collaborator).load(t),n.lsave(!1)),$.webpackInterface.store.dispatch({type:"entry:state:init"})}if("destroy"===e){var r=Collaborator.find(t.cid);if(!r)return;if(r.ldestroy(!1),r.user_id===$.user.id)window.location.reload()}}else{if("update"===e){var a=Collaborator.find(t.cid);a?a.refresh(t):((a=new Collaborator).load(t),a.lsave(!1)),$.webpackInterface.refreshAll()}if("destroy"===e){var o=Collaborator.find(t.cid);if(!o)return;if(o.ldestroy(!1),o.user_id===$.user.id){var i=o.project_cid&&Project.find(o.project_cid),c=o.team_cid&&Team.find(o.team_cid);i&&$.webpackInterface.deleteProjectByCid(i.cid),c&&$.webpackInterface.deleteTeamByCid(c.cid)}}}}(n,r))},me=function(){var e=u()(c.a.mark(function e(t,n,r,a,o,i){var s,u,l,d,p=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=p.length>6&&void 0!==p[6]?p[6]:{},!t.has(a.cid)&&!le(n,a.cid,a.mtime)){e.next=3;break}return e.abrupt("return");case 3:if("Asset"!==n){e.next=5;break}return e.abrupt("return",ce(r,a));case 5:if("PointComments::Comment"!==n&&"Comment"!==n){e.next=7;break}return e.abrupt("return",de.webpackInterface&&de.webpackInterface.pushData("comments",r,a));case 7:if("PointComments::Thread"!==n&&"CommentThread"!==n){e.next=9;break}return e.abrupt("return",de.webpackInterface&&de.webpackInterface.pushData("comment-threads",r,a));case 9:if(!de.f.inSharing&&de.currentProject){e.next=11;break}return e.abrupt("return");case 11:if(e.t0=se[n],!e.t0){e.next=15;break}return e.next=15,se[n](r,a,o);case 15:s.id&&(!(u="Screen"===n?a.cid:a.screen_cid)&&a.screenstate_cid&&(l=Screenstate.find(a.screenstate_cid))&&(u=l.screen_cid),(d=CoWorker.find(s.id)||new CoWorker({cid:s.id,name:s.name,avatar:s.avatar})).screen_cid=u,d.last_seen=new Date,d.save(),de.renderCoWorkers&&de.renderCoWorkers());case 16:case"end":return e.stop()}},e,this)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}();n.d(t,"a",function(){return ge});var ve=window.MB,ge=function(){var e=function(e){var t=e.doSave,n=e.onError,r=e.delay,a=Object(f.b)(),o=a.clear,i=a.addEventListener,c=a.removeEventListener,s=a.dispatchEvent,u=Object(f.c)({beforeSave:function(){return s({type:"beforesave"})},afterSave:function(){return s({type:"aftersave"})},doSave:t,onError:n}),l=u.clear,d=u.add,p=u.save,h=u.filter,m=u.getLength,v=u.getIsSaving,g=u.getSavingState,y=Object(f.d)({func:p,delay:r}),b=y.start,w=y.stop;return{reset:function(){w(),o(),l()},add:function(e){console.log("[AutoSaveQueue] add",e),d(e),b()},getState:function(){return{pendingLength:m(),isSaving:v(),savingState:g()}},getIsEmpty:function(){return!v()&&!m()},getIsSaving:v,filterSaveQueue:h,triggerSave:p,afterCurrentSave:function(e){if(!v())return e();i("aftersave",function t(){c("aftersave",t),e()})},addEventListener:i,removeEventListener:c}}({delay:2e4,onError:function(){var e=u()(c.a.mark(function e(n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(g.c)(n,"[AutoSaveQueue] unhandled error",t()),e.next=3,E(n,n.status);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),doSave:function(){var e=u()(c.a.mark(function e(n,r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=k(n),e.next=3,A({setSavingState:r,getAutoSaveQueueState:t,saveChunkList:Object(f.a)(a,64),saveQueueLength:a.length,getSaveItemInfo:_,isSocketAvailable:function(){return ve.Pusher.getIsOpen()},doSocketBatchSave:M,onSocketError:T,doFallbackSaveItem:O,onFallbackError:j});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}),t=e.getState,n=e.getIsEmpty,r=e.getIsSaving,a=e.add,i=e.addEventListener,s=e.filterSaveQueue,l=e.triggerSave,d=e.afterCurrentSave;i("beforesave",function(){ve.setSaving&&ve.setSaving(!0)}),i("aftersave",function(){ve.currentProject&&(ve.currentProject.timestamp=String(.001*Date.now()),ve.currentProject.updated_at=(new Date).toISOString(),ve.currentProject.lsave(!1)),ve.setSaving&&ve.setSaving(!1),ve.refreshCoWorkers&&ve.refreshCoWorkers()}),ve.Pusher=pe({filterStaleData:function(e){var t=new o.a,n=[];return s(function(r){var a=r.record,o=a.cid,i=a.mtime,c=e[o],s=!c||c<i;return s?t.add(o):n.push(r),s}),{remoteStaleCidSet:t,localStaleDataList:n}}}),ve.AutoSaver={getState:t,getIsEmpty:n,getIsSaving:r,triggerSave:l,afterCurrentSave:d,add:function(e){var t=e.record,n=e.isDelete,r=void 0!==n&&n;t.mtime=ve.Pusher.getServerTimestamp(),a({record:t,isDelete:r})}},x()}},tiHd:function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d});var r=n("eTac"),a=n.n(r),o=n("8fIB"),i=n.n(o),c=n("MVZn"),s=n.n(c),u=function(e){return{getState:function(){return e},setState:function(t){return e=s()({},e,t)}}},l=function(){var e=null,t=null;return{promise:new i.a(function(n,r){e=n,t=r}),resolve:function(){e&&e.apply(void 0,arguments),e=null,t=null},reject:function(){t&&t.apply(void 0,arguments),e=null,t=null}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){},t=new a.a,n=i.a.resolve("QUEUE_HEAD");return{pushTask:function(r){var a=l(),o=a.promise,c=a.resolve,s=a.reject;return n=n.then(function(){return i.a.resolve(r()).then(c,s).catch(e).then(function(){return t.delete(r)})}),t.add(r),o},resetTaskQueue:function(){t=new a.a,n=i.a.resolve("QUEUE_HEAD")},getTaskQueueSize:function(){return t.size}}}},tpxX:function(e,t,n){var r=n("jl5L")("round");e.exports=r},tw9P:function(e,t,n){"use strict";n.d(t,"i",function(){return x}),n.d(t,"g",function(){return C}),n.d(t,"b",function(){return k}),n.d(t,"d",function(){return M}),n.d(t,"f",function(){return T}),n.d(t,"e",function(){return O}),n.d(t,"h",function(){return j}),n.d(t,"a",function(){return N}),n.d(t,"j",function(){return I}),n.d(t,"c",function(){return R});var r=n("Ev6p"),a=n("q09E"),o=Object(r.u)("IO"),i="TAKE",c="PUT",s="ALL",u="RACE",l="CALL",d="CPS",p="FORK",f="JOIN",h="CANCEL",m="SELECT",v="ACTION_CHANNEL",g="CANCELLED",y="FLUSH",b="GET_CONTEXT",w="SET_CONTEXT",S="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",E=function(e,t){var n;return(n={})[o]=!0,n[e]=t,n};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&Object(r.g)(arguments[0],r.n.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),r.n.pattern(e))return E(i,{pattern:e});if(r.n.channel(e))return E(i,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}x.maybe=function(){var e=x.apply(void 0,arguments);return e[i].maybe=!0,e};x.maybe;function C(e,t){return arguments.length>1?(Object(r.g)(e,r.n.notUndef,"put(channel, action): argument channel is undefined"),Object(r.g)(e,r.n.channel,"put(channel, action): argument "+e+" is not a valid channel"),Object(r.g)(t,r.n.notUndef,"put(channel, action): argument action is undefined")):(Object(r.g)(e,r.n.notUndef,"put(action): argument action is undefined"),t=e,e=null),E(c,{channel:e,action:t})}function k(e){return E(s,e)}function _(e,t,n){Object(r.g)(t,r.n.notUndef,e+": argument fn is undefined");var a=null;if(r.n.array(t)){var o=t;a=o[0],t=o[1]}else if(t.fn){var i=t;a=i.context,t=i.fn}return a&&r.n.string(t)&&r.n.func(a[t])&&(t=a[t]),Object(r.g)(t,r.n.func,e+": argument "+t+" is not a function"),{context:a,fn:t,args:n}}function M(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return E(l,_("call",e,n))}function T(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return E(p,_("fork",e,n))}function O(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1)return k(t.map(function(e){return O(e)}));var a=t[0];return 1===t.length&&(Object(r.g)(a,r.n.notUndef,"cancel(task): argument task is undefined"),Object(r.g)(a,r.n.task,"cancel(task): argument "+a+" is not a valid Task object "+S)),E(h,a||r.d)}function j(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return 0===arguments.length?e=r.l:(Object(r.g)(e,r.n.notUndef,"select(selector,[...]): argument selector is undefined"),Object(r.g)(e,r.n.func,"select(selector,[...]): argument "+e+" is not a function")),E(m,{selector:e,args:n})}function N(e,t){return Object(r.g)(e,r.n.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(Object(r.g)(t,r.n.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),Object(r.g)(t,r.n.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),E(v,{pattern:e,buffer:t})}function I(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return T.apply(void 0,[a.a,e,t].concat(r))}C.resolve=function(){var e=C.apply(void 0,arguments);return e[c].resolve=!0,e},C.sync=Object(r.k)(C.resolve,Object(r.w)("put.sync","put.resolve"));var A=function(e){return function(t){return t&&t[o]&&t[e]}},R={take:A(i),put:A(c),all:A(s),race:A(u),call:A(l),cps:A(d),fork:A(p),join:A(f),cancel:A(h),select:A(m),actionChannel:A(v),cancelled:A(g),flush:A(y),getContext:A(b),setContext:A(w)}},u6S6:function(e,t,n){var r=n("6acW"),a=n("sgoq")(function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)});e.exports=a},uavl:function(e,t,n){"use strict";var r=n("MVZn"),a=n.n(r),o=n("J4zp"),i=n.n(o),c=n("PJYZ"),s=n.n(c),u=n("lSNA"),l=n.n(u),d=n("lwsE"),p=n.n(d),f=n("W8MJ"),h=n.n(f),m=n("a1gu"),v=n.n(m),g=n("Nsbk"),y=n.n(g),b=n("7W2i"),w=n.n(b),S=n("17x9"),E=n.n(S),x=n("q1tI"),C=n.n(x),k=n("m/km"),_=/^(fa|md|mb|ci)-/;function M(e){var t=_.test(e.icon),n=(e.icon||"").replace(_,""),r=t?e.icon.split("-")[0]:"fa",a="".concat("mb"===r?"icon":r,"-").concat(n),o="".concat(r," ").concat(a),i={fontSize:"".concat(e.iS(),"px")};return C.a.createElement("span",{className:"icon ".concat(o),style:i},"md"===r?n:null)}var T=n("CoAX");function O(e,t){switch(e.name){case"rich_text":return C.a.createElement(N,{widget:e});case"text_field":case"nav_bar":case"navigation_bar":return C.a.createElement(I,{widget:e});case"mtext_input":return C.a.createElement(A,{widget:e});case"mtextarea":return C.a.createElement(R,{widget:e});case"mcheckbox2":return C.a.createElement(L,{widget:e});case"mfile_input":return C.a.createElement(P,{widget:e});case"mradiobutton":return C.a.createElement(D,{widget:e});case"mselect":return C.a.createElement(B,{widget:e});case"button":return C.a.createElement(F,{widget:e});case"hr":return C.a.createElement(U,{widget:e});case"line":return C.a.createElement(W,{widget:e});case"ve":return C.a.createElement(z,{widget:e});case"triangleb":return C.a.createElement(H,{widget:e});case"triangletl":return C.a.createElement(q,{widget:e});case"lr":case"tab_bar":case"rectangle":return C.a.createElement(V,{widget:e});case"image_view":return C.a.createElement(Z,{widget:e});case"webpage":return C.a.createElement(Y,{widget:e,isPreview:t});case"video_view":return C.a.createElement(X,{widget:e});case"keyboard":return C.a.createElement(K,{widget:e});case"iphone_keyboard":return C.a.createElement(G,{widget:e});case"ipad_keyboard":return C.a.createElement(J,{widget:e});case"android_keyboard":return C.a.createElement(Q,{widget:e});case"map_view":return C.a.createElement($,{widget:e});case"search_bar":return C.a.createElement(ee,{widget:e});case"status_bar":return C.a.createElement(te,{widget:e});case"ios_status_bar":return C.a.createElement(ne,{widget:e});case"iphone_x_status_bar":return C.a.createElement(re,{widget:e});case"android_status_bar":return C.a.createElement(ae,{widget:e});case"switch":case"ios_switch":return C.a.createElement(oe,{widget:e});case"android_switch":return C.a.createElement(ie,{widget:e});case"ios_check":return C.a.createElement(ce,{widget:e});case"android_check":return C.a.createElement(se,{widget:e});case"android_radio":return C.a.createElement(ue,{widget:e});case"tab_item":return C.a.createElement(le,{widget:e});case"pg":return C.a.createElement(de,{widget:e});case"icon_button":return C.a.createElement(pe,{widget:e});case"label":return C.a.createElement(fe,{widget:e});case"circle_rect":case"rounded_rect":case"text_view":return C.a.createElement(he,{widget:e});case"sticky":return C.a.createElement(me,{widget:e});case"mtooltip":return C.a.createElement(ve,{widget:e});default:return null}}n.d(t,"a",function(){return O});var j=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){return null}}]),t}(x.PureComponent);j.propTypes={widget:E.a.object};var N=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=JSON.parse(e.text);return C.a.createElement("div",{className:"rich-text",dangerouslySetInnerHTML:{__html:Object(T.e)(t)}})}}]),t}(j),I=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("span",{className:"text"},e.text)}}]),t}(j),A=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("input",{type:e.input_type,placeholder:e.text})}}]),t}(j),R=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=Math.round(e.padding*e.s()/100),n=Math.round(t-(e.lh-e.fs)/2);n<0&&(n=0);var r={padding:"".concat(n,"px ").concat(t,"px")};return C.a.createElement("textarea",{style:r,placeholder:e.text})}}]),t}(j),L=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("input",{type:"checkbox",checked:e.checked})}}]),t}(j),P=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){return C.a.createElement("input",{type:"file"})}}]),t}(j),D=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("input",{type:"radio",name:e.gid,checked:e.checked})}}]),t}(j),B=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("select",null,e.text.split(/\n/).map(function(e,t){return C.a.createElement("option",{key:e+t},e)}))}}]),t}(j),F=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("div",{className:"button-wrapper"},e.icon?M(e):null,C.a.createElement("span",{className:"text"},e.text))}}]),t}(j),U=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.h()-10*e.s()/100;return t<1&&(t=1),C.a.createElement("span",{style:{borderTopWidth:t}})}}]),t}(j),W=function(e){function t(){var e,n;p()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=v()(this,(e=y()(t)).call.apply(e,[this].concat(a))),l()(s()(s()(n)),"getStrokeDashArray",function(e){return 0==e?"":1==e?"2 2":2==e?"6 2":void 0}),l()(s()(s()(n)),"getStrokePath",function(e,t,n){var r=i()(n[0].point,2),a=r[0],o=r[1],c=i()(n[1].point,2),s=[e*a,t*o],u=[e*c[0],t*c[1]];return"M ".concat(s[0]," ").concat(s[1]," L ").concat(u[0]," ").concat(u[1])}),l()(s()(s()(n)),"genDropShadow",function(e){var t=i()(e,6),n=t[1],r=t[2],a=t[3],o=t[5];return"drop-shadow(".concat(n,"px ").concat(r,"px ").concat(a,"px ").concat(o,")")}),n}return w()(t,e),h()(t,[{key:"render",value:function(){var e,t=this.props.widget,n=t.width,r=t.height,a=t.bs,o=t.bc,i=t.ls,c=t.points,s=t.box_shadow;if(s){var u=JSON.parse(s)[0];e=this.genDropShadow(u)}var l=JSON.parse(c),d=this.getStrokePath(n,r,l),p=this.getStrokeDashArray(i);return C.a.createElement("svg",{style:{overflow:"visible",filter:e||"none"}},C.a.createElement("path",{d:d,stroke:o,strokeWidth:a,strokeDasharray:p}),C.a.createElement("path",{d:d,stroke:"transparent",strokeWidth:"10",style:{pointerEvents:"auto"}}))}}]),t}(j),z=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.w()-10*e.s()/100;return t<1&&(t=1),C.a.createElement("span",{style:{borderLeftWidth:t}})}}]),t}(j),H=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t="M "+[[e.width/2,0],[e.width,e.height],[0,e.height]].map(function(e){return e.join(" ")}).join(" L ")+" Z";return C.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},C.a.createElement("path",{d:t}))}}]),t}(j),q=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t="M "+[[0,0],[e.width,0],[0,e.height]].map(function(e){return e.join(" ")}).join(" L ")+" Z";return C.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},C.a.createElement("path",{d:t}))}}]),t}(j),V=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){return C.a.createElement("span",null)}}]),t}(j),Y=function(e){function t(){var e,n;p()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=v()(this,(e=y()(t)).call.apply(e,[this].concat(a))),l()(s()(s()(n)),"setElemRef",function(e){return n.$elem=e}),n}return w()(t,e),h()(t,[{key:"componentDidUpdate",value:function(e,t){this.props.isPreview&&this.props.widget.text!==e.widget.text&&this.updateIframeURL()}},{key:"updateIframeURL",value:function(){var e=this.props.widget.text.replace(/&amp;/g,"&");this.$elem.setAttribute("src",e)}},{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("div",{className:"webpage-wrapper"},C.a.createElement("span",{className:"text"},e.text),C.a.createElement("p",{className:"notice"},I18N.https_only),C.a.createElement("iframe",{ref:this.setElemRef,className:"iframe"}))}}]),t}(j),X=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){return C.a.createElement("span",null,C.a.createElement("i",{className:"fa fa-play-circle-o"}))}}]),t}(j),Z=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t="";if(e.image)if(["a","i"].includes(e.image[0])&&-1===e.image.indexOf("images")){var n=Asset.find(e.image);n&&(n.raw||n.image)&&(t="".concat(n.image||n.raw))}else t=e.image;var r={display:t?"none":"flex",backgroundColor:e.bg},a={display:t?"block":"none",height:e.p?"auto":"100%",filter:e.filter.trim()?e.filter.trim():""};return C.a.createElement("div",{className:"image-wrapper"},C.a.createElement("span",{style:r},C.a.createElement("i",{className:"icon-widget-img"})),C.a.createElement("div",{className:"wrapper"},C.a.createElement("img",{src:t,draggable:!1,style:a})))}}]),t}(j),K=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=MB.project().device,n=e.numeric?"n":"r",r=e.cs().orientation,a="/images/keyboards/".concat(t,"_").concat(n,"_").concat(r,".png");return C.a.createElement("img",{src:a,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),t}(j),G=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.numeric?"n":"r",n=e.cs().orientation,r="/images/keyboards/iphone_".concat(t,"_").concat(n,".png");return C.a.createElement("img",{src:r,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),t}(j),J=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.numeric?"n":"r",n=e.cs().orientation,r="/images/keyboards/ipad_".concat(t,"_").concat(n,".png");return C.a.createElement("img",{src:r,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),t}(j),Q=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.numeric?"n":"r",n=e.cs().orientation,r="/images/keyboards/android_".concat(t,"_").concat(n,".png");return C.a.createElement("img",{src:r,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),t}(j),$=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){return C.a.createElement("div",{className:"image"},C.a.createElement("img",{draggable:!1,src:MB.staticMap()}))}}]),t}(j),ee=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("div",null,C.a.createElement("div",{className:"text_edit"},C.a.createElement("input",{type:"text",placeholder:e.text})),C.a.createElement("i",{className:"fa fa-search"}))}}]),t}(j),te=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.tc;return C.a.createElement("div",null,C.a.createElement("div",{className:"signal",style:{color:t}},C.a.createElement("div",{className:"ball"}),C.a.createElement("div",{className:"ball"}),C.a.createElement("div",{className:"ball"}),C.a.createElement("div",{className:"ball"}),C.a.createElement("div",{className:"ball"})),C.a.createElement("div",{className:"carrier"},C.a.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:e.text}})),C.a.createElement("div",{className:"time"},"12:00",C.a.createElement("span",{className:"meridian"}," AM")),C.a.createElement("div",{className:"wifi md"},"wifi"),C.a.createElement("div",{className:"battery"},C.a.createElement("div",{className:"body",style:{borderColor:t}},C.a.createElement("div",{className:"inner",style:{backgroundColor:t}})),C.a.createElement("div",{className:"head",style:{backgroundColor:t}})))}}]),t}(j),ne=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget.tc;return C.a.createElement("div",{className:"iOS-StatusBar",style:{color:e}},C.a.createElement("div",{className:"StatusBarSignal",dangerouslySetInnerHTML:{__html:k.d}}),C.a.createElement("div",{className:"StatusBarWifi",dangerouslySetInnerHTML:{__html:k.e}}),C.a.createElement("div",{className:"StatusBarTime"},"12:00"),C.a.createElement("div",{className:"StatusBarBattery",dangerouslySetInnerHTML:{__html:k.c}}))}}]),t}(j),re=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget.tc;return C.a.createElement("div",{className:"iPhoneX-StatusBar",style:{color:e}},C.a.createElement("div",{className:"StatusBarTime"},"12:00"),C.a.createElement("div",{className:"StatusBarSignal",dangerouslySetInnerHTML:{__html:k.d}}),C.a.createElement("div",{className:"StatusBarWifi",dangerouslySetInnerHTML:{__html:k.e}}),C.a.createElement("div",{className:"StatusBarBattery",dangerouslySetInnerHTML:{__html:k.c}}))}}]),t}(j),ae=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget.tc;return C.a.createElement("div",{className:"Android-StatusBar",style:{color:e}},C.a.createElement("div",{className:"StatusBarWifi icon md"},"signal_wifi_4_bar"),C.a.createElement("div",{className:"StatusBarSignal icon md"},"signal_cellular_4_bar"),C.a.createElement("div",{className:"StatusBarBattery icon md"},"battery_full"),C.a.createElement("div",{className:"StatusBarTime"},"12:00"))}}]),t}(j),oe=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("label",{className:"iOS-Switch"},C.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),C.a.createElement("span",{className:"CheckState"}))}}]),t}(j),ie=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("label",{className:"Android-Switch"},C.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),C.a.createElement("span",{className:"CheckState"}))}}]),t}(j),ce=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("label",{className:"iOS-Check"},C.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),C.a.createElement("span",{className:"CheckState"},C.a.createElement("svg",{width:"13",height:"8",viewBox:"0 0 13 8"},C.a.createElement("path",{d:"M1 4.5L4.5 8l8-8"}))))}}]),t}(j),se=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("label",{className:"Android-Check"},C.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),C.a.createElement("span",{className:"CheckState"},C.a.createElement("svg",{width:"14",height:"10",viewBox:"0 0 14 10"},C.a.createElement("path",{d:"M5 10L0 5.192l1.4-1.346L5 7.308 12.6 0 14 1.346"}))))}}]),t}(j),ue=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("label",{className:"Android-Radio"},C.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"radio",name:e.gid,defaultChecked:e.checked}),C.a.createElement("span",{className:"CheckState"}))}}]),t}(j),le=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget;return C.a.createElement("div",{className:"wrapper"},M(e),C.a.createElement("span",{className:"text"},e.text))}}]),t}(j),de=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=Link.find(e.link_cids),n=t?t.gesture:"tap";return C.a.createElement("i",{className:"icon-gesture-".concat(n)})}}]),t}(j),pe=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){return M(this.props.widget)}}]),t}(j),fe=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget.text.replace(/<\/?p>/g,"");return C.a.createElement("p",{dangerouslySetInnerHTML:{__html:e}})}}]),t}(j),he=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t={padding:e.paddingS()};return C.a.createElement("div",{className:"text",style:t,dangerouslySetInnerHTML:{__html:MB.v.multiline(e.text)}})}}]),t}(j),me=function(e){function t(){var e,n;p()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=v()(this,(e=y()(t)).call.apply(e,[this].concat(a))),l()(s()(s()(n)),"handleDown",function(e){if(!MB.f.inPreview&&!MB.f.inSharing){e.stopPropagation(),MB.f.isDragging=!0;var t=n.props.widget,r=e.clientX,a=e.clientY,o=t.slt,i=t.slw,c=function(e){var c=e.clientX-r,s=e.clientY-a,u=c/MB.scale()*100,l=s/MB.scale()*100;t.slt=o+l+6,t.l()>160?t.slw=i-u:t.slw=i+u,n.forceUpdate()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",function e(){MB.f.isDragging=!1,t.lsave(),MB.action("update:widgets",{widgets:[t]}),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)})}}),n}return w()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.l()<160,n=e.bg,r=e.slt;e.slt<20?r=20:e.slt>e.height-20&&(r=e.height-20);var a=(e.slt-r)*e.s()/100,o={top:e.slt<=e.top-20?a:"",height:Math.abs(a)},i={top:a},c={top:r*e.s()/100,width:e.slw*e.s()/100,borderColor:n},s={left:t?"100%":"",right:t?"":"100%",backgroundColor:n},u={backgroundImage:"linear-gradient(135deg, ".concat(n," 25%, transparent 25%, transparent 100%), linear-gradient(45deg, transparent 75%, ").concat(n," 75%, ").concat(n," 100%)")};return C.a.createElement("div",null,C.a.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:MB.v.multiline(e.text)}}),C.a.createElement("div",{className:"sideline",style:c},C.a.createElement("div",{className:"box",style:o}),C.a.createElement("div",{className:"line",style:i},C.a.createElement("div",{className:"arrow",style:s,onMouseDown:this.handleDown}))),C.a.createElement("div",{className:"sawtooth",style:u}))}}]),t}(j),ve=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return w()(t,e),h()(t,[{key:"render",value:function(){var e,t,n=this.props.widget,r={top:"borderBottomColor",bottom:"borderTopColor",left:"borderRightColor",right:"borderLeftColor"}[n.tt_placement],o="top"==n.tt_placement||"bottom"==n.tt_placement,i={borderWidth:n.arrowSize(),left:o?n.ttOffset():"",top:o?"":n.ttOffset()},c=a()({},i,(e={},l()(e,n.tt_placement,0-n.arrowSize()),l()(e,r,n.bc||"#aaa"),e)),s=a()({},i,(t={},l()(t,n.tt_placement,0-n.arrowSize()+n.bS()),l()(t,r,n.bg||"white"),t)),u={padding:n.paddingS(),marginTop:n.text&&"middle"===n.va?0-n.textHeight()/2:""};return C.a.createElement("div",null,C.a.createElement("div",{className:"arrow1 arrow ".concat(n.tt_placement),style:c}),C.a.createElement("div",{className:"arrow2 arrow ".concat(n.tt_placement),style:s}),C.a.createElement("div",{className:"text",style:u,dangerouslySetInnerHTML:{__html:MB.v.multiline(n.text)}}))}}]),t}(j)},udQi:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u});var r=[],a=0;function o(e){try{c(),e()}finally{s()}}function i(e){r.push(e),a||(c(),u())}function c(){a++}function s(){a--}function u(){s();for(var e=void 0;!a&&void 0!==(e=r.shift());)o(e)}},ujtX:function(e,t,n){},upRB:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"i",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"d",function(){return f});var r=n("peh1"),a=n("1iCU"),o=function(e){return e.container.common.scale},i=function(e){return e.container.previewSetting.toolbarActiveItem},c=function(e){return e.container.previewSetting.isScrollable},s=function(e){return e.container.previewSetting.isStickyShow},u=function(e){return e.container.previewSetting.isHighlight},l=function(e){return e.container.previewSetting.shellType},d=Object(r.createSelector)([i,c],function(e,t){return[a.b,a.a].includes(e)||!t}),p=Object(r.createSelector)([function(e){return e.model.projects},function(e){return e.model.current.projectCid}],function(e,t){return e.find(function(e){return e.cid===t})}),f=Object(r.createSelector)([function(e){return e.model.screens},function(e){return e.model.current.screenCid}],function(e,t){return e.find(function(e){return e.cid===t})})},"ut/Y":function(e,t,n){var r=n("ZCpW"),a=n("GDhZ"),o=n("zZ0H"),i=n("Z0cm"),c=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?a(e[0],e[1]):r(e):c(e)}},v8PR:function(e,t,n){},v9Wr:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),u=n("Nsbk"),l=n.n(u),d=n("7W2i"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("8fIB"),y=n.n(g),b=n("o0o1"),w=n.n(b),S=n("yXPU"),E=n.n(S),x=n("jaNy"),C=n.n(x),k=n("17x9"),_=n.n(k),M=n("q1tI"),T=n.n(M),O=n("tiHd"),j=n("/N2d"),N=Object(O.a)().pushTask,I=new C.a,A=function(){var e=E()(w.a.mark(function e(t,n,r,a){var o,i,c;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)({screenCid:n,screenStateCid:"default",canvasZoom:a});case 2:return o=e.sent,i=o.canvasElement,c=i.toDataURL(),e.abrupt("return",R(t,n,r,c));case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),R=function(e,t,n,r){return new y.a(function(a,o){e.onload=function(){e.src.includes(P)||I.set("".concat(t).concat(n),r),a()},e.onerror=function(){e.src=P,o()},e.src=r})},L=function(){var e=E()(w.a.mark(function e(t,n,r,a,o){var i,c,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=MB.browserInfo,c=i.name,s=i.version,!(1>4&&"Chrome"===c&&s>53||"Firefox"===c&&s>57)){e.next=7;break}return e.next=5,A(t,n,r,o);case 5:e.next=9;break;case 7:return e.next=9,R(t,n,r,a);case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),P="/images/preview/image-load.png",D=function(e){function t(){var e;return a()(this,t),e=s()(this,l()(t).call(this)),v()(h()(h()(e)),"setElementRef",function(t){return e.$elem=t}),e.isUnmounted=!1,e.retryTimer=null,e}return p()(t,e),i()(t,[{key:"componentDidUpdate",value:function(e,t){this.props.isVisible&&(clearTimeout(this.retryTimer),this.generateSnapshotTask())}},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0,clearTimeout(this.retryTimer)}},{key:"generateSnapshotTask",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;N(E()(w.a.mark(function t(){var n,r,a,o,i;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.screenCid,a=n.version,o=n.imageUrl,i=n.canvasZoom,n.isVisible){t.next=3;break}return t.abrupt("return");case 3:if(!e.isUnmounted){t.next=5;break}return t.abrupt("return");case 5:if(!I.get("".concat(r).concat(a))){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,L(e.$elem,r,a,o,i);case 9:case"end":return t.stop()}},t,this)}))).catch(function(n){e.retryTimer=setTimeout(function(){e.generateSnapshotTask(2*t)},1e3*t)})}},{key:"render",value:function(){var e=this.props,t=e.screenCid,n=e.version,r=I.get("".concat(t).concat(n));return T.a.createElement("img",{ref:this.setElementRef,src:r||P})}}]),t}(M.PureComponent);D.propTypes={screenCid:_.a.string,version:_.a.string,imageUrl:_.a.string,screenName:_.a.string,canvasZoom:_.a.number,isVisible:_.a.bool}},vpYg:function(e,t,n){"use strict";var r=["onAbort","onAnimationEnd","onAnimationIteration","onAnimationStart","onBlur","onCanPlay","onCanPlayThrough","onClick","onContextMenu","onCopy","onCut","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onFocus","onInput","onInvalid","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetadata","onLoadStart","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onProgress","onRateChange","onReset","onScroll","onSeeked","onSeeking","onStalled","onSubmit","onSuspend","onTimeUpdate","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","onVolumeChange","onWaiting","onWheel"],a=["onAfterPrint","onBeforePrint","onBeforeUnload","onDeviceLight","onDeviceMotion","onDeviceOrientation","onDeviceProximity","onHashChange","onLanguageChange","onPopState","onRejectionHandled","onResize","onSelect","onStorage","onUnhandledRejection","onUnload","onUserProximity"],o=["onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp"];e.exports={allEvents:r.concat(a).concat(o),documentEvents:r.concat(o),windowEvents:a}},wCGR:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("pVnL"),a=n.n(r),o=n("q1tI"),i=n.n(o),c=n("17x9"),s=n.n(c),u=n("Z0cm"),l=n.n(u),d={app:["项目","app"],team:["团队","team"],teamMember:["团队成员","team member"]},p={delete:["删除","delete"],leave:["退出","leave"],move:["移动","move"],duplicate:["复制","duplicate"]},f={actionConfirmation:[["您确定要","[VERB]","[NOUN]","[UGN]","吗？"],["Are you sure you want to ","[VERB]"," ","[NOUN]"," ","[UGN]"]],nounMap:d,verbMap:p},h=window.MBLocale,m=["zh-CN","en"].indexOf(h),v=function(e){return function(t,n){return function(e){return/^\[[A-Z_]+\]/.test(e)}(t)?function(e,t){return Object(o.isValidElement)(e)?i.a.cloneElement(e,{key:t}):e}(function(e){var t=e.pos,n=e.variableMap,r=n.verb,a=n.noun,o=n.ugn;return"[VERB]"===t?p[r][m]:"[NOUN]"===t?d[a][m]:"[UGN]"===t?o:null}({pos:t,variableMap:e}),n):t}};function g(e){var t=e.name,n=e.variableMap,r=void 0===n?{}:n,a=f[t][m];return l()(a)?a.map(v(r)):a}function y(e){var t=e.variableMap,n=void 0===t?{}:t;return i.a.createElement(g,a()({name:"actionConfirmation"},{variableMap:n}))}g.propTypes={name:s.a.string.isRequired,variableMap:s.a.object},y.propTypes={variableMap:s.a.object}},"wF/u":function(e,t,n){var r=n("e5cp"),a=n("ExA7");e.exports=function e(t,n,o,i,c){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,o,i,e,c))}},wJg7:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var a=typeof e;return!!(t=null==t?n:t)&&("number"==a||"symbol"!=a&&r.test(e))&&e>-1&&e%1==0&&e<t}},wfO3:function(e,t,n){},wig9:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var o=e[t];o&&(a[r++]=o)}return a}},wy8a:function(e,t,n){var r=n("KxBF");e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},xYSL:function(e,t,n){var r=n("R/W3");e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},xn7q:function(e,t,n){e.exports={previewPanelLayer:"_1440VIJ3r2SoiW8WAZ21xI",layerInfo:"_1auiNpZenxIHtuOt85xZWs"}},yLV6:function(e,t,n){var r;!function(a,o,i,c){"use strict";var s,u=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),d="function",p=Math.round,f=Math.abs,h=Date.now;function m(e,t,n){return setTimeout(E(e,n),t)}function v(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==c)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function y(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=a.console&&(a.console.warn||a.console.log);return o&&o.call(a.console,r,n),e.apply(this,arguments)}}s="function"!=typeof Object.assign?function(e){if(e===c||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==c&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t}:Object.assign;var b=y(function(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;)(!n||n&&e[r[a]]===c)&&(e[r[a]]=t[r[a]]),a++;return e},"extend","Use `assign`."),w=y(function(e,t){return b(e,t,!0)},"merge","Use `assign`.");function S(e,t,n){var r,a=t.prototype;(r=e.prototype=Object.create(a)).constructor=e,r._super=a,n&&s(r,n)}function E(e,t){return function(){return e.apply(t,arguments)}}function x(e,t){return typeof e==d?e.apply(t&&t[0]||c,t):e}function C(e,t){return e===c?t:e}function k(e,t,n){g(O(t),function(t){e.addEventListener(t,n,!1)})}function _(e,t,n){g(O(t),function(t){e.removeEventListener(t,n,!1)})}function M(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function T(e,t){return e.indexOf(t)>-1}function O(e){return e.trim().split(/\s+/g)}function j(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function N(e){return Array.prototype.slice.call(e,0)}function I(e,t,n){for(var r=[],a=[],o=0;o<e.length;){var i=t?e[o][t]:e[o];j(a,i)<0&&r.push(e[o]),a[o]=i,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function A(e,t){for(var n,r,a=t[0].toUpperCase()+t.slice(1),o=0;o<u.length;){if((r=(n=u[o])?n+a:t)in e)return r;o++}return c}var R=1;function L(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var P="ontouchstart"in a,D=A(a,"PointerEvent")!==c,B=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F=25,U=1,W=2,z=4,H=8,q=1,V=2,Y=4,X=8,Z=16,K=V|Y,G=X|Z,J=K|G,Q=["x","y"],$=["clientX","clientY"];function ee(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){x(e.options.enable,[e])&&n.handler(t)},this.init()}function te(e,t,n){var r=n.pointers.length,a=n.changedPointers.length,o=t&U&&r-a==0,i=t&(z|H)&&r-a==0;n.isFirst=!!o,n.isFinal=!!i,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,a=r.length;n.firstInput||(n.firstInput=ne(t));a>1&&!n.firstMultiple?n.firstMultiple=ne(t):1===a&&(n.firstMultiple=!1);var o=n.firstInput,i=n.firstMultiple,s=i?i.center:o.center,u=t.center=re(r);t.timeStamp=h(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=ce(s,u),t.distance=ie(s,u),function(e,t){var n=t.center,r=e.offsetDelta||{},a=e.prevDelta||{},o=e.prevInput||{};t.eventType!==U&&o.eventType!==z||(a=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=a.x+(n.x-r.x),t.deltaY=a.y+(n.y-r.y)}(n,t),t.offsetDirection=oe(t.deltaX,t.deltaY);var l=ae(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=f(l.x)>f(l.y)?l.x:l.y,t.scale=i?function(e,t){return ie(t[0],t[1],$)/ie(e[0],e[1],$)}(i.pointers,r):1,t.rotation=i?function(e,t){return ce(t[1],t[0],$)+ce(e[1],e[0],$)}(i.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,a,o,i=e.lastInterval||t,s=t.timeStamp-i.timeStamp;if(t.eventType!=H&&(s>F||i.velocity===c)){var u=t.deltaX-i.deltaX,l=t.deltaY-i.deltaY,d=ae(s,u,l);r=d.x,a=d.y,n=f(d.x)>f(d.y)?d.x:d.y,o=oe(u,l),e.lastInterval=t}else n=i.velocity,r=i.velocityX,a=i.velocityY,o=i.direction;t.velocity=n,t.velocityX=r,t.velocityY=a,t.direction=o}(n,t);var d=e.element;M(t.srcEvent.target,d)&&(d=t.srcEvent.target);t.target=d}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function ne(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:p(e.pointers[n].clientX),clientY:p(e.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:t,center:re(t),deltaX:e.deltaX,deltaY:e.deltaY}}function re(e){var t=e.length;if(1===t)return{x:p(e[0].clientX),y:p(e[0].clientY)};for(var n=0,r=0,a=0;a<t;)n+=e[a].clientX,r+=e[a].clientY,a++;return{x:p(n/t),y:p(r/t)}}function ae(e,t,n){return{x:t/e||0,y:n/e||0}}function oe(e,t){return e===t?q:f(e)>=f(t)?e<0?V:Y:t<0?X:Z}function ie(e,t,n){n||(n=Q);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return Math.sqrt(r*r+a*a)}function ce(e,t,n){n||(n=Q);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return 180*Math.atan2(a,r)/Math.PI}ee.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(L(this.element),this.evWin,this.domHandler)}};var se={mousedown:U,mousemove:W,mouseup:z},ue="mousedown",le="mousemove mouseup";function de(){this.evEl=ue,this.evWin=le,this.pressed=!1,ee.apply(this,arguments)}S(de,ee,{handler:function(e){var t=se[e.type];t&U&&0===e.button&&(this.pressed=!0),t&W&&1!==e.which&&(t=z),this.pressed&&(t&z&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var pe={pointerdown:U,pointermove:W,pointerup:z,pointercancel:H,pointerout:H},fe={2:"touch",3:"pen",4:"mouse",5:"kinect"},he="pointerdown",me="pointermove pointerup pointercancel";function ve(){this.evEl=he,this.evWin=me,ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(he="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),S(ve,ee,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),a=pe[r],o=fe[e.pointerType]||e.pointerType,i="touch"==o,c=j(t,e.pointerId,"pointerId");a&U&&(0===e.button||i)?c<0&&(t.push(e),c=t.length-1):a&(z|H)&&(n=!0),c<0||(t[c]=e,this.callback(this.manager,a,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(c,1))}});var ge={touchstart:U,touchmove:W,touchend:z,touchcancel:H},ye="touchstart",be="touchstart touchmove touchend touchcancel";function we(){this.evTarget=ye,this.evWin=be,this.started=!1,ee.apply(this,arguments)}S(we,ee,{handler:function(e){var t=ge[e.type];if(t===U&&(this.started=!0),this.started){var n=function(e,t){var n=N(e.touches),r=N(e.changedTouches);t&(z|H)&&(n=I(n.concat(r),"identifier",!0));return[n,r]}.call(this,e,t);t&(z|H)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var Se={touchstart:U,touchmove:W,touchend:z,touchcancel:H},Ee="touchstart touchmove touchend touchcancel";function xe(){this.evTarget=Ee,this.targetIds={},ee.apply(this,arguments)}S(xe,ee,{handler:function(e){var t=Se[e.type],n=function(e,t){var n=N(e.touches),r=this.targetIds;if(t&(U|W)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var a,o,i=N(e.changedTouches),c=[],s=this.target;if(o=n.filter(function(e){return M(e.target,s)}),t===U)for(a=0;a<o.length;)r[o[a].identifier]=!0,a++;a=0;for(;a<i.length;)r[i[a].identifier]&&c.push(i[a]),t&(z|H)&&delete r[i[a].identifier],a++;if(!c.length)return;return[I(o.concat(c),"identifier",!0),c]}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var Ce=2500,ke=25;function _e(){ee.apply(this,arguments);var e=E(this.handler,this);this.touch=new xe(this.manager,e),this.mouse=new de(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Me(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},Ce)}}S(_e,ee,{handler:function(e,t,n){var r="touch"==n.pointerType,a="mouse"==n.pointerType;if(!(a&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(e,t){e&U?(this.primaryTouch=t.changedPointers[0].identifier,Me.call(this,t)):e&(z|H)&&Me.call(this,t)}).call(this,t,n);else if(a&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var a=this.lastTouches[r],o=Math.abs(t-a.x),i=Math.abs(n-a.y);if(o<=ke&&i<=ke)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Te=A(l.style,"touchAction"),Oe=Te!==c,je="auto",Ne="manipulation",Ie="none",Ae="pan-x",Re="pan-y",Le=function(){if(!Oe)return!1;var e={},t=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||a.CSS.supports("touch-action",n)}),e}();function Pe(e,t){this.manager=e,this.set(t)}Pe.prototype={set:function(e){"compute"==e&&(e=this.compute()),Oe&&this.manager.element.style&&Le[e]&&(this.manager.element.style[Te]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,function(t){x(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(T(e,Ie))return Ie;var t=T(e,Ae),n=T(e,Re);if(t&&n)return Ie;if(t||n)return t?Ae:Re;if(T(e,Ne))return Ne;return je}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,a=T(r,Ie)&&!Le[Ie],o=T(r,Re)&&!Le[Re],i=T(r,Ae)&&!Le[Ae];if(a){var c=1===e.pointers.length,s=e.distance<2,u=e.deltaTime<250;if(c&&s&&u)return}if(!i||!o)return a||o&&n&K||i&&n&G?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var De=1,Be=2,Fe=4,Ue=8,We=Ue,ze=16;function He(e){this.options=s({},this.defaults,e||{}),this.id=R++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=De,this.simultaneous={},this.requireFail=[]}function qe(e){return e&ze?"cancel":e&Ue?"end":e&Fe?"move":e&Be?"start":""}function Ve(e){return e==Z?"down":e==X?"up":e==V?"left":e==Y?"right":""}function Ye(e,t){var n=t.manager;return n?n.get(e):e}function Xe(){He.apply(this,arguments)}function Ze(){Xe.apply(this,arguments),this.pX=null,this.pY=null}function Ke(){Xe.apply(this,arguments)}function Ge(){He.apply(this,arguments),this._timer=null,this._input=null}function Je(){Xe.apply(this,arguments)}function Qe(){Xe.apply(this,arguments)}function $e(){He.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function et(e,t){return(t=t||{}).recognizers=C(t.recognizers,et.defaults.preset),new tt(e,t)}He.prototype={defaults:{},set:function(e){return s(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ye(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return v(e,"dropRecognizeWith",this)?this:(e=Ye(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;return-1===j(t,e=Ye(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=Ye(e,this);var t=j(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<Ue&&r(t.options.event+qe(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=Ue&&r(t.options.event+qe(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|De)))return!1;e++}return!0},recognize:function(e){var t=s({},e);if(!x(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(We|ze|32)&&(this.state=De),this.state=this.process(t),this.state&(Be|Fe|Ue|ze)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},S(Xe,He,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Be|Fe),a=this.attrTest(e);return r&&(n&H||!a)?t|ze:r||a?n&z?t|Ue:t&Be?t|Fe:Be:32}}),S(Ze,Xe,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var e=this.options.direction,t=[];return e&K&&t.push(Re),e&G&&t.push(Ae),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,a=e.direction,o=e.deltaX,i=e.deltaY;return a&t.direction||(t.direction&K?(a=0===o?q:o<0?V:Y,n=o!=this.pX,r=Math.abs(e.deltaX)):(a=0===i?q:i<0?X:Z,n=i!=this.pY,r=Math.abs(e.deltaY))),e.direction=a,n&&r>t.threshold&&a&t.direction},attrTest:function(e){return Xe.prototype.attrTest.call(this,e)&&(this.state&Be||!(this.state&Be)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ve(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),S(Ke,Xe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Be)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),S(Ge,He,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[je]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(z|H)&&!a)this.reset();else if(e.eventType&U)this.reset(),this._timer=m(function(){this.state=We,this.tryEmit()},t.time,this);else if(e.eventType&z)return We;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===We&&(e&&e.eventType&z?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),S(Je,Xe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Be)}}),S(Qe,Xe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|G,pointers:1},getTouchAction:function(){return Ze.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(K|G)?t=e.overallVelocity:n&K?t=e.overallVelocityX:n&G&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&z},emit:function(e){var t=Ve(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),S($e,He,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ne]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&U&&0===this.count)return this.failTimeout();if(r&&a&&n){if(e.eventType!=z)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,i=!this.pCenter||ie(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,i&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=We,this.tryEmit()},t.interval,this),Be):We}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==We&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),et.VERSION="2.0.7",et.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Je,{enable:!1}],[Ke,{enable:!1},["rotate"]],[Qe,{direction:K}],[Ze,{direction:K},["swipe"]],[$e],[$e,{event:"doubletap",taps:2},["tap"]],[Ge]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function tt(e,t){this.options=s({},et.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=function(e){var t=e.options.inputClass;return new(t||(D?ve:B?xe:P?_e:de))(e,te)}(this),this.touchAction=new Pe(this,this.options.touchAction),nt(this,!0),g(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function nt(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,function(a,o){n=A(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=a):r.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}tt.prototype={set:function(e){return s(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,a=t.curRecognizer;(!a||a&&a.state&We)&&(a=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||a&&n!=a&&!n.canRecognizeWith(a)?n.reset():n.recognize(e),!a&&n.state&(Be|Fe|Ue)&&(a=t.curRecognizer=n),o++}},get:function(e){if(e instanceof He)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(v(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=j(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==c&&t!==c){var n=this.handlers;return g(O(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==c){var n=this.handlers;return g(O(e),function(e){t?n[e]&&n[e].splice(j(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(et,{INPUT_START:U,INPUT_MOVE:W,INPUT_END:z,INPUT_CANCEL:H,STATE_POSSIBLE:De,STATE_BEGAN:Be,STATE_CHANGED:Fe,STATE_ENDED:Ue,STATE_RECOGNIZED:We,STATE_CANCELLED:ze,STATE_FAILED:32,DIRECTION_NONE:q,DIRECTION_LEFT:V,DIRECTION_RIGHT:Y,DIRECTION_UP:X,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:G,DIRECTION_ALL:J,Manager:tt,Input:ee,TouchAction:Pe,TouchInput:xe,MouseInput:de,PointerEventInput:ve,TouchMouseInput:_e,SingleTouchInput:we,Recognizer:He,AttrRecognizer:Xe,Tap:$e,Pan:Ze,Swipe:Qe,Pinch:Ke,Rotate:Je,Press:Ge,on:k,off:_,each:g,merge:w,extend:b,assign:s,inherit:S,bindFn:E,prefixed:A}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=et,(r=function(){return et}.call(t,n,t,e))===c||(e.exports=r)}(window,document)},yTJ9:function(e,t){e.exports=function(e){return e instanceof Date?o(e):"string"==typeof e?o(a(e)):"number"==typeof e?o(new Date(e)):void 0};var n={allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[],wordSeparator:" "}},r=n.strings;function a(e){if(e){var t=e.trim();return t=(t=(t=(t=t.replace(/\.\d\d\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)}}function o(e){return r.inWords(function(e){return(new Date).getTime()-e.getTime()}(e))}e.exports.settings=n,r.inWords=function(e){var t=r.prefixAgo,a=r.suffixAgo;n.allowFuture&&e<0&&(t=r.prefixFromNow,a=r.suffixFromNow);var o=Math.abs(e)/1e3,i=o/60,c=i/60,s=c/24,u=s/365;function l(t,n){var a="function"==typeof t?t(n,e):t,o=r.numbers&&r.numbers[n]||n;return a.replace(/%d/i,o)}var d=o<45&&l(r.seconds,Math.round(o))||o<90&&l(r.minute,1)||i<45&&l(r.minutes,Math.round(i))||i<90&&l(r.hour,1)||c<24&&l(r.hours,Math.round(c))||c<48&&l(r.day,1)||s<30&&l(r.days,Math.floor(s))||s<60&&l(r.month,1)||s<365&&l(r.months,Math.floor(s/30))||u<2&&l(r.year,1)||l(r.years,Math.floor(u)),p=r.wordSeparator||"";return void 0===r.wordSeparator&&(p=" "),[t,d,a].join(p).toString().trim()},r.parse=a},yl0K:function(e){e.exports={"// HOSTED_COMMERCIAL_FANGZHENG_LIST":"NOTE: this file is script generated, change should be made at 'fe/scripts/generateFontResource.js'",HOSTED_COMMERCIAL_FANGZHENG_LIST:[{family:"FZLanTingHei",label:"方正兰亭黑",typeList:["regular","light","bold"]},{family:"FZYuan",label:"方正圆体",typeList:["regular","light","bold"]},{family:"FZXinSong",label:"方正新书宋",typeList:["regular"]},{family:"FZKai",label:"方正楷体",typeList:["regular"]},{family:"FZGongYeHei",label:"方正工业黑",typeList:["regular"]},{family:"FZHanZhenGuangBiao",label:"方正汉真广标",typeList:["regular"]},{family:"FZZongYi",label:"方正综艺体",typeList:["regular"]}],"// HOSTED_COMMON_LIST":"NOTE: this file is script generated, change should be made at 'fe/scripts/generateFontResource.js'",HOSTED_COMMON_LIST:[{family:"PingFangSC",label:"PingFang SC",limitedDevices:["iphone","ipad","apple_watch"],typeList:["regular","bold"]},{family:"SourceHanSansSC",label:"思源黑体",typeList:["regular","bold"]},{family:"SFUIText",label:"SF UI Text",limitedDevices:["iphone","ipad","apple_watch"],typeList:["regular","bold"]},{family:"Roboto",label:"Roboto",typeList:["regular","bold"]}],"// WESTERN_COMMON_LIST":"NOTE: this file is script generated, change should be made at 'fe/scripts/generateFontResource.js'",WESTERN_COMMON_LIST:[{family:"Arial",label:"Arial",typeList:["regular","bold"]},{family:"Courier New",label:"Courier New",typeList:["regular","bold"]},{family:"Helvetica",label:"Helvetica",typeList:["regular","light","bold"]},{family:"Times New Roman",label:"Times New Roman",typeList:["regular","bold"]}]}},zAG7:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z0-9-]{2,63}$/i},zZYZ:function(e,t,n){},zkrS:function(e,t,n){"use strict";var r=n("yTJ9"),a=n.n(r),o=n("knB1"),i=n("QkVN"),c=n.n(i),s=window,u=s.confirm,l=s.alert,d=s.MB,p=s.MBLocale,f=s.I18N,h=s.Team,m=s.Project,v=s.Combo,g=s.Template,y=s.Screen,b=s.Screenstate,w=s.Widget,S=s.Widgetstate,E=s.Panel,x=s.Panelstate,C=s.Link,k=s.Collaborator,_=s.Comment,M=s.CommentThread,T=s.Asset;"zh-CN"===p&&c()(a.a.settings.strings,o.a);var O=window,j={MBLocale:p,parseTimeAgo:function(e){return a()(e)}},N={Team:h,Project:m,Combo:v,Template:g,Screen:y,Screenstate:b,Widget:w,Widgetstate:S,Panel:E,Panelstate:x,Link:C,Collaborator:k,Comment:_,CommentThread:M,Asset:T,requestCid:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Math.uuid(10,16)+Date.now()},queueSave:function(){return d.AutoSaver&&d.AutoSaver.triggerSave()}};t.a={Global:O,Storage:d.localStorageDelegate,confirm:function(){return u.apply(void 0,arguments)},alert:function(){return l.apply(void 0,arguments)},MB:d,I18N:f,L10N:j,SpineModel:N}}}]);
//# sourceMappingURL=lib-preview-02bc5ad213d9e9b80343.js.map